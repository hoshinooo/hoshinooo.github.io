<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>网络安全-弹性交换网络4</title>
      <link href="/posts/switching4.html"/>
      <url>/posts/switching4.html</url>
      
        <content type="html"><![CDATA[<h1 id="弹性交换网络"><a href="#弹性交换网络" class="headerlink" title="弹性交换网络"></a>弹性交换网络</h1><h2 id="DHCP的应用场景和原理"><a href="#DHCP的应用场景和原理" class="headerlink" title="DHCP的应用场景和原理"></a>DHCP的应用场景和原理</h2><h3 id="技术背景"><a href="#技术背景" class="headerlink" title="技术背景"></a>技术背景</h3><p><strong>企业网络中，大量的主机或设备需要获取IP地址等网络参数</strong></p><ul><li>如果采用手工配置，工作量大、容易出错且不好管理</li><li>如果用户擅自更改，还有可能会造成IP地址冲突等问题</li></ul><p><strong>使用动态主机配置协议DHCP，来分配IP地址等网络参数，可以减少管理员的工作量，避免出错</strong></p><h3 id="DHCP的定义"><a href="#DHCP的定义" class="headerlink" title="DHCP的定义"></a>DHCP的定义</h3><p><strong>DHCP，Dynamic Host Configuration Protocol</strong></p><ul><li>DHCP：动态主机配置协议</li><li>用于实现企业用户IP地址的动态分配和集中管理</li><li>避免繁琐的手工配置，快速适应网络的变化</li></ul><h3 id="DHCP的角色"><a href="#DHCP的角色" class="headerlink" title="DHCP的角色"></a>DHCP的角色</h3><p><strong>DHCP客户端</strong></p><ul><li>通过DHCP协议请求获取IP地址等网络参数，例如PC、手机、IP电话等</li></ul><p><strong>DHCP服务器</strong></p><ul><li>负责为DHCP客户端分配网络参数</li></ul><p><img src="/../img/img_artical/net_sec/4.4.1.png" alt="4.4.1"></p><p><strong>DHCP中继</strong></p><ul><li>当客户端与服务器不在一个网段的时候，才会用到DHCP中继设备</li><li>负责转发DHCP服务器和DHCP客户端之间的DHCP报文，协助DHCP服务器向DHCP客户端动态分配网络参数的设备</li></ul><p><img src="/../img/img_artical/net_sec/4.4.2.png" alt="4.4.2"></p><h3 id="DHCP工作原理"><a href="#DHCP工作原理" class="headerlink" title="DHCP工作原理"></a>DHCP工作原理</h3><p><strong>客户端首次接入网络从DHCP服务器中获取IP地址，会经过4个阶段</strong></p><ul><li>发现阶段：客户端<strong>广播</strong>发送DHCP Discover报文（<strong>DHCP发现报文</strong>，客户端找DHCP服务器，请求IP地址）</li><li>提供阶段：服务器收到客户端发的报文后，会<strong>单播</strong>回复DHCP Offer报文（<strong>DHCP回应报文</strong>，服务器给客户端发IP地址、网关、DNS等）</li><li>选择阶段：客户端收到Offer报文后，会再次<strong>广播</strong>发送DHCP Request报文（<strong>DHCP请求报文</strong>，客户端广播告知所有的服务器，选择了某某IP地址）</li><li>确认阶段：服务器收到客户端发报文后，会<strong>单播</strong>回复DHCP ACK报文（<strong>DHCP确认报文</strong>，确认分配结果，只有发了ACK报文，客户端才可以使用IP）</li></ul><p><img src="/../img/img_artical/net_sec/4.4.3.png" alt="4.4.3"></p><h2 id="基于全局的DHCP"><a href="#基于全局的DHCP" class="headerlink" title="基于全局的DHCP"></a>基于全局的DHCP</h2><h3 id="创建地址池"><a href="#创建地址池" class="headerlink" title="创建地址池"></a>创建地址池</h3><p><strong>地址池</strong></p><ul><li>DHCP服务器通过地址池为客户端提供IP地址等网络参数</li></ul><p><strong>创建地址池有2种方式</strong></p><ul><li>基于全局的地址池</li><li>基于接口的地址池</li></ul><h3 id="创建基于全局的DHCP"><a href="#创建基于全局的DHCP" class="headerlink" title="创建基于全局的DHCP"></a>创建基于全局的DHCP</h3><ul><li>开启设备的DHCP功能，确保设备为 DHCP 服务器</li><li>在DHCP服务器创建地址池，规划网段&#x2F;网关&#x2F;DNS和租约</li><li>在接收DHCP报文的接口上，开启基于全局的DHCP功能</li></ul><p><img src="/../img/img_artical/net_sec/4.4.4.png" alt="4.4.4"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1.开启路由器DHCP功能</span><br><span class="line">[Huawei]sysname dhcp</span><br><span class="line">[dhcp]dhcp enable</span><br><span class="line"></span><br><span class="line">2.在路由器上建立地址池，配置网段/网关/DNS和租约</span><br><span class="line">[dhcp]ip pool p1         //建立地址池并命名</span><br><span class="line">[dhcp-ip-pool-p1]network 192.168.1.0 mask 255.255.255.0</span><br><span class="line">[dhcp-ip-pool-p1]gateway-list 192.168.1.254</span><br><span class="line">[dhcp-ip-pool-p1]dns-list 8.8.8.8</span><br><span class="line">[dhcp-ip-pool-p1]lease day 3      //设置DHCP租约为3天 (默认1天)</span><br><span class="line"></span><br><span class="line">3.为路由器接口G0/0/0配置地址，并在接口上启用DHCP</span><br><span class="line">[dhcp]interface GigabitEthernet0/0/0</span><br><span class="line">[dhcp-GigabitEthernet0/0/0]ip address 192.168.1.254 24</span><br><span class="line">[dhcp-GigabitEthernet0/0/0]dhcp select global       //接口下启用基于全局的DHCP</span><br></pre></td></tr></table></figure><h2 id="基于接口的DHCP"><a href="#基于接口的DHCP" class="headerlink" title="基于接口的DHCP"></a>基于接口的DHCP</h2><h3 id="创建基于接口的DHCP"><a href="#创建基于接口的DHCP" class="headerlink" title="创建基于接口的DHCP"></a>创建基于接口的DHCP</h3><ul><li>开启设备的DHCP功能，确保设备为 DHCP 服务器</li><li>配置基于接口的DHCP地址池，并配置DNS和租约</li><li>在接收DHCP报文的接口上，开启基于接口的DHCP功能</li></ul><p><img src="/../img/img_artical/net_sec/4.4.5.png" alt="4.4.5"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.开启路由器DHCP功能</span><br><span class="line">[Huawei]sysname dhcp</span><br><span class="line">[dhcp]dhcp enable</span><br><span class="line"></span><br><span class="line">2.在接口G0/0/0配置地址，开启基于接口的DHCP</span><br><span class="line">[dhcp]interface GigabitEthernet0/0/0</span><br><span class="line">[dhcp-GigabitEthernet0/0/0]ip address 192.168.1.254 24</span><br><span class="line">[dhcp-GigabitEthernet0/0/0]dhcp select interface       //接口下启用基于接口的DHCP</span><br><span class="line">[dhcp-GigabitEthernet0/0/0]dhcp server dns-list 8.8.8.8</span><br><span class="line">[dhcp-GigabitEthernet0/0/0]dhcp server lease day 3</span><br></pre></td></tr></table></figure><h2 id="DHCP中继代理"><a href="#DHCP中继代理" class="headerlink" title="DHCP中继代理"></a>DHCP中继代理</h2><h3 id="DHCP中继概述"><a href="#DHCP中继概述" class="headerlink" title="DHCP中继概述"></a>DHCP中继概述</h3><p><strong>场景：</strong></p><ul><li>DHCP客户端与DHCP服务器不在一个网段时，才需要DHCP中继</li></ul><p><strong>作用</strong></p><ul><li>传递DHCP服务器和DHCP客户端之间的DHCP报文</li></ul><p><img src="/../img/img_artical/net_sec/4.4.7.png" alt="4.4.7"></p><h3 id="DHCP中继配置"><a href="#DHCP中继配置" class="headerlink" title="DHCP中继配置"></a>DHCP中继配置</h3><ul><li>DHCP客户端的网关接口，才有资格成为DHCP中继</li><li>开启DHCP中继的DHCP功能</li><li>设置DHCP中继接口的模式为 relay</li><li>指定DHCP中继接口的DHCP服务器地址</li></ul><p><img src="/../img/img_artical/net_sec/4.4.8.png" alt="4.4.8"></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.配置设备之间的互联接口及静态路由</span></span><br><span class="line"><span class="attr">[R2]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="attr">[R2-GigabitEthernet0/0/0]ip</span> <span class="string">address 10.10.10.2 24</span></span><br><span class="line"><span class="attr">[R2-GigabitEthernet0/0/0]quit</span></span><br><span class="line"><span class="attr">[R2]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="attr">[R2-GigabitEthernet0/0/1]ip</span> <span class="string">address 192.168.1.254 24</span></span><br><span class="line"><span class="attr">[R2-GigabitEthernet0/0/1]quit</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[R1]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/0]ip</span> <span class="string">address 10.10.10.1 24</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/0]quit</span></span><br><span class="line"><span class="attr">[R1]ip</span> <span class="string">route-static 192.168.1.0 24 10.10.10.2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.在R1上配置DHCP地址池，启用DHCP</span></span><br><span class="line"><span class="attr">[R1]dhcp</span> <span class="string">enable</span></span><br><span class="line"><span class="attr">[R1]ip</span> <span class="string">pool ntd</span></span><br><span class="line"><span class="attr">[R1-ip-pool-ntd]network</span> <span class="string">192.168.1.0 mask 255.255.255.0</span></span><br><span class="line"><span class="attr">[R1-ip-pool-ntd]gateway-list</span> <span class="string">192.168.1.254</span></span><br><span class="line"><span class="attr">[R1-ip-pool-ntd]dns-list</span> <span class="string">8.8.8.8</span></span><br><span class="line"><span class="attr">[R1-ip-pool-ntd]excluded-ip-address</span> <span class="string">192.168.1.253        //排除的IP地址</span></span><br><span class="line"><span class="attr">[R1]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/0]dhcp</span> <span class="string">select global     //开启基于全局的DHCP</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3.在R2上配置DHCP中继</span></span><br><span class="line"><span class="attr">[R2]dhcp</span> <span class="string">enable</span></span><br><span class="line"><span class="attr">[R2]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="attr">[R2-GigabitEthernet0/0/1]dhcp</span> <span class="string">select relay     //在接口G0/0/1上应用DHCP中继功能</span></span><br><span class="line"><span class="attr">[R2-GigabitEthernet0/0/1]dhcp</span> <span class="string">relay server-ip 10.10.10.1   //指向DHCP服务器的IP地址</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 弹性交换网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-弹性交换网络3</title>
      <link href="/posts/switching3.html"/>
      <url>/posts/switching3.html</url>
      
        <content type="html"><![CDATA[<h1 id="弹性交换网络"><a href="#弹性交换网络" class="headerlink" title="弹性交换网络"></a>弹性交换网络</h1><h2 id="VLAN间通信"><a href="#VLAN间通信" class="headerlink" title="VLAN间通信"></a>VLAN间通信</h2><h3 id="VLANIF虚接口"><a href="#VLANIF虚接口" class="headerlink" title="VLANIF虚接口"></a>VLANIF虚接口</h3><p><strong>三层交换机</strong></p><ul><li>具备路由功能的交换机，称之为三层交换机或多层交换机</li></ul><p><strong>VLAN间通信解决方案：VLANIF虚接口</strong></p><p><strong>VLANIF虚接口</strong></p><ul><li>每个VLAN都对应一个VLANIF接口</li><li>VLANIF接口是一种三层虚拟接口，可以实现VLAN间的三层互通</li><li>给每个VLAN需要配置一个VLANIF虚接口，配置接口IP地址，作为VLAN内主机的网关地址</li><li>VLANIF接口不占用额外的物理端口资源，节约成本通常在三层交换机上配置VLANIF接口，来实现VLAN间通信</li></ul><p><strong>三层交换机VLAN间通信的转发过程</strong></p><p><img src="/../img/img_artical/net_sec/4.3.1.png" alt="4.3.1"></p><h3 id="VLANIF虚接口配置"><a href="#VLANIF虚接口配置" class="headerlink" title="VLANIF虚接口配置"></a>VLANIF虚接口配置</h3><p><strong>VLANIF虚接口配置</strong></p><ul><li>在三层交换机上创建VLAN</li><li>为每个VLAN创建网关接口-VLANIF</li><li>为每个VLANIF配置网关IP地址</li><li>如有需要，还须在三层交换机上配置路由</li></ul><p><strong>要求实现不同VLAN间互通</strong></p><ul><li>创建VLAN、接口加入VLAN</li><li>配置VLANIF虚接口IP地址</li></ul><p><img src="/../img/img_artical/net_sec/4.3.2.png" alt="4.3.2"></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.创建VLAN、接口加入VLAN</span></span><br><span class="line"><span class="attr">[SWl]vlan</span> <span class="string">batch 2 3</span></span><br><span class="line"><span class="attr">[SWl]interface</span> <span class="string">g0/0/1</span></span><br><span class="line"><span class="attr">[SW1-G0/0/1]port</span> <span class="string">link-type access</span></span><br><span class="line"><span class="attr">[SW1-G0/0/1]port</span> <span class="string">default vlan 1</span></span><br><span class="line"><span class="attr">[SWlJinterface</span> <span class="string">g0/0/2</span></span><br><span class="line"><span class="attr">[SW1-G0/0/2]port</span> <span class="string">link-type access</span></span><br><span class="line"><span class="attr">[SW1-G0/0/2]port</span> <span class="string">default vlan 2</span></span><br><span class="line"><span class="attr">[SWl]interface</span> <span class="string">g0/0/3</span></span><br><span class="line"><span class="attr">[SW1-G0/0/3]port</span> <span class="string">link-type access</span></span><br><span class="line"><span class="attr">[SW1-G0/0/3]port</span> <span class="string">default vlan 3</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.配置VLANIF虚接口IP-网关地址</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">Vlanif 1</span></span><br><span class="line"><span class="attr">[SW1-Vlanif1]ip</span> <span class="string">address 192.168.1.254 24</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">Vlanif 2</span></span><br><span class="line"><span class="attr">[SW1-Vlanif2]ip</span> <span class="string">address 192.168.2.254 24</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">Vlanif 3</span></span><br><span class="line"><span class="attr">[SW1-Vlanif3]ip</span> <span class="string">address 192.168.3.254 24</span></span><br></pre></td></tr></table></figure><h2 id="VLAN聚合原理及配置"><a href="#VLAN聚合原理及配置" class="headerlink" title="VLAN聚合原理及配置"></a>VLAN聚合原理及配置</h2><h3 id="VLAN聚合基本概念"><a href="#VLAN聚合基本概念" class="headerlink" title="VLAN聚合基本概念"></a>VLAN聚合基本概念</h3><p><strong>VLAN聚合（VLAN Aggregation，也称SuperVLAN）</strong></p><ul><li>指在一个物理网络内，用多个VLAN（称为Sub-VLAN）隔离广播域</li><li>这些Sub-VLAN聚合成一个逻辑的VLAN（称为Super VLAN）</li><li>这些Sub-VLAN使用同一个IP子网和缺省网关，可以节约IP地址资源</li></ul><p><strong>Super VLAN：超级VLAN</strong></p><p><strong>Sub-VLAN：子VLAN</strong></p><h3 id="多VLAN中IP地址浪费问题"><a href="#多VLAN中IP地址浪费问题" class="headerlink" title="多VLAN中IP地址浪费问题"></a>多VLAN中IP地址浪费问题</h3><p><strong>VLAN越多，IP地址浪费越多</strong></p><ul><li>一个VLAN中，网络号、广播地址、网关地址都不能分配给主机使用</li><li>且一个VLAN中实际主机数量过少，也要分配一个单独的网段</li></ul><p><img src="/../img/img_artical/net_sec/4.3.3.png" alt="4.3.3"></p><h3 id="VLAN聚合作用"><a href="#VLAN聚合作用" class="headerlink" title="VLAN聚合作用"></a>VLAN聚合作用</h3><p><strong>在多VLAN的网络环境中，节省IP地址</strong></p><ul><li>每个Sub-VLAN对应一个广播域，多个Sub-VLAN和一个Super-VLAN关联，只给Super-VLAN分配一个IP网段，所有Sub-VLAN都使用Super-VLAN的IP网段进行三层通信，从而节省IP地址</li></ul><p><img src="/../img/img_artical/net_sec/4.3.4.png" alt="4.3.4"></p><h3 id="Sub-VLAN"><a href="#Sub-VLAN" class="headerlink" title="Sub-VLAN"></a>Sub-VLAN</h3><p><strong>Sub-VLAN</strong></p><ul><li>只包含物理接口，不能建立三层VLANIF接口</li><li>Sub-VLAN用于隔离广播域</li><li>每个Sub-VLAN内的主机与外部的三层通信是靠Super-VLAN的三层VLANIF接口来实现的</li></ul><h3 id="Super-VLAN"><a href="#Super-VLAN" class="headerlink" title="Super-VLAN"></a>Super-VLAN</h3><p><strong>Super-VLAN</strong></p><ul><li>Super-VLAN只建立三层VLANIF接口，不包含物理接口，与网关对应</li><li>一个Super-VLAN可以包含一个或多个Sub-VLAN</li><li>Sub-VLAN不再占用一个独立的子网网段</li><li>在同一个Super-VLAN中，无论主机属于哪一个Sub-VLAN，它的IP地址都在Super-VLAN对应的网段内</li></ul><h3 id="Sub-VLAN之间的通信存在问题"><a href="#Sub-VLAN之间的通信存在问题" class="headerlink" title="Sub-VLAN之间的通信存在问题"></a>Sub-VLAN之间的通信存在问题</h3><p><strong>存在问题</strong></p><ul><li>普通VLAN中，不同VLAN内的主机可以通过各自不同网关进行三层互通</li><li>但是Super-VLAN中，所有Sub-VLAN内的主机使用的是同一个网段的地址，共用同一个网关地址，主机只会做二层转发，而不会送网关进行三层转发</li><li>不同Sub-VLAN的主机，在二层是相互隔离的，这就造成了Sub-VLAN间无法通信的问题</li></ul><h3 id="Sub-VLAN之间的通信解决方案"><a href="#Sub-VLAN之间的通信解决方案" class="headerlink" title="Sub-VLAN之间的通信解决方案"></a>Sub-VLAN之间的通信解决方案</h3><p><strong>解决方案</strong></p><ul><li>解决这一问题的方法就是使用Proxy ARP</li></ul><p><strong>Proxy ARP</strong></p><ul><li>如果ARP请求是从一个网络的主机发往同一网段但不在同一VLAN（同一广播域）内的另一台主机，那么连接这两个网络的设备就可以回答该ARP请求，这个过程称作ARP代理（Proxy ARP）</li><li>VLAN间Proxy ARP：两台主机处于相同网段，但属于不同VLAN</li></ul><h3 id="Sub-VLAN配置"><a href="#Sub-VLAN配置" class="headerlink" title="Sub-VLAN配置"></a>Sub-VLAN配置</h3><p><strong>VLAN角色类型</strong></p><ul><li>Sub-VLAN</li><li>Super-VLAN</li></ul><p><strong>Sub-VLAN配置</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[SW1]vlan</span> <span class="string">2</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">Ethernet0/0/1</span></span><br><span class="line"><span class="attr">[SW1-E0/0/1]port</span> <span class="string">link-type access</span></span><br><span class="line"><span class="attr">[SW1-E0/0/1]port</span> <span class="string">default vlan 2</span></span><br></pre></td></tr></table></figure><p><strong>Super-VLAN配置</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[SW1]vlan</span> <span class="string">10                                             //创建vlan10</span></span><br><span class="line"><span class="attr">[SW1-vlan-10]aggregate-vlan</span>                              <span class="string">//配置vlan10为Super-vlan</span></span><br><span class="line"><span class="attr">[SW1-vlan-10]access-vlan2</span>                                <span class="string">//将Sub-vlan vlan2加入Super-vlan</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">vlanif 10</span></span><br><span class="line"><span class="attr">[SW1-vlanif-10]ip</span> <span class="string">address 192.168.10.254 24</span></span><br><span class="line"><span class="attr">[SW1-vlanif-10]arp-proxy</span> <span class="string">inter-sub-vlan-proxy enable     //开启Proxy ARP</span></span><br></pre></td></tr></table></figure><h3 id="VLAN聚合配置思路"><a href="#VLAN聚合配置思路" class="headerlink" title="VLAN聚合配置思路"></a>VLAN聚合配置思路</h3><p><strong>配置思路</strong></p><ul><li>创建Sub-VLAN</li><li>配置端口模式</li><li>端口加入VLAN</li><li>创建Super-VLAN</li><li>将Sub-VLAN加入SuperVLAN</li><li>配置Super-VLAN的VLANIF接口</li><li>Super-VLAN下配置Proxy ARP</li><li>验证设备之间的互通性</li></ul><h2 id="端口隔离原理与配置"><a href="#端口隔离原理与配置" class="headerlink" title="端口隔离原理与配置"></a>端口隔离原理与配置</h2><h3 id="端口隔离概述"><a href="#端口隔离概述" class="headerlink" title="端口隔离概述"></a>端口隔离概述</h3><ul><li><p>实现报文之间的2层隔离，除了使用VLAN 技术以后，还可以使用端口隔离技术</p></li><li><p>采用该技术后，属于同一个VLAN 内的端口所连接的设备也可以实现通信的隔离</p></li><li><p>端口隔离为用户提供了更加安全、更加灵活的组网方案</p></li><li><p>端口隔离的作用：采用端口隔离功能，可以实现同一VLAN内端口之间的隔离</p></li><li><p>如何实现端口隔离功能：只需要将端口加入到隔离组中，就可以实现隔离组内端口之间二层数据的隔离</p></li><li><p>端口隔离的优势：节约了VLAN，提供了更安全、更灵活的组网方案</p></li></ul><h3 id="端口隔离的特点"><a href="#端口隔离的特点" class="headerlink" title="端口隔离的特点"></a>端口隔离的特点</h3><ul><li>端口隔离只是针对同一设备上的端口隔离组成员，对于不同设备上的接口而言，无法实现该功能</li><li>同一端口隔离组的接口之间互相隔离</li><li>隔离组的接口和其他接口之间不隔离</li><li>不同端口隔离组的接口之间不隔离</li></ul><h3 id="端口隔离应用场景"><a href="#端口隔离应用场景" class="headerlink" title="端口隔离应用场景"></a>端口隔离应用场景</h3><p><img src="/../img/img_artical/net_sec/4.3.5.png" alt="4.3.5"></p><h3 id="端口隔离基本概念"><a href="#端口隔离基本概念" class="headerlink" title="端口隔离基本概念"></a>端口隔离基本概念</h3><p><img src="/../img/img_artical/net_sec/4.3.6.png" alt="4.3.6"></p><h3 id="端口隔离配置实现"><a href="#端口隔离配置实现" class="headerlink" title="端口隔离配置实现"></a>端口隔离配置实现</h3><p><img src="/../img/img_artical/net_sec/4.3.7.png" alt="4.3.7"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 弹性交换网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-弹性交换网络2</title>
      <link href="/posts/switching2.html"/>
      <url>/posts/switching2.html</url>
      
        <content type="html"><![CDATA[<h1 id="弹性交换网络"><a href="#弹性交换网络" class="headerlink" title="弹性交换网络"></a>弹性交换网络</h1><h2 id="STP协议概述"><a href="#STP协议概述" class="headerlink" title="STP协议概述"></a>STP协议概述</h2><h3 id="单点故障"><a href="#单点故障" class="headerlink" title="单点故障"></a>单点故障</h3><p><strong>PC之间的互通链路仅仅存在1个</strong></p><ul><li>任何一条链路出现问题，PC之间都会无法通信</li></ul><p><img src="/../img/img_artical/net_sec/4.2.1.png" alt="4.2.1"></p><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p><strong>提高网络可靠性</strong></p><ul><li>增加冗余&#x2F;备份链路</li></ul><p><img src="/../img/img_artical/net_sec/4.2.2.png" alt="4.2.2"></p><h3 id="产生新的问题"><a href="#产生新的问题" class="headerlink" title="产生新的问题"></a>产生新的问题</h3><p><strong>增加备份链路后交换网络上产生二层环路</strong></p><ul><li><p>PC1访问PC2，PC1知道PC2的IP地址，但是不知识PC2的MAC地址</p></li><li><p>PC1会发送ARP广播(目的MAC为全FFFF数据)</p></li></ul><p><img src="/../img/img_artical/net_sec/4.2.3.png" alt="4.2.3"></p><p><strong>环路导致广播风暴</strong></p><ul><li>交换机收到广播帧后，会从除接收端口外的其他所有接口广播</li><li>广播帧在交换机之间一直循环下去，众多的广播帧最终形成广播风暴</li></ul><p><img src="/../img/img_artical/net_sec/4.2.4.png" alt="4.2.4"></p><p><strong>广播风暴导致网络瘫痪</strong></p><ul><li>广播帧增多形成广播风暴，从而导致链路拥塞，并极大消耗设备资源，最终导致网络拥塞不可用，还会导致设备宕机不可用</li></ul><p><img src="/../img/img_artical/net_sec/4.2.5.png" alt="4.2.5"></p><h3 id="STP概述"><a href="#STP概述" class="headerlink" title="STP概述"></a>STP概述</h3><p><strong>STP：生成树协议 （IEEE802.1d）</strong></p><ul><li>STP：Spanning Tree Protocol（生成树协议）</li><li>通过阻塞某个接口在逻辑上断开环路，防止广播风暴，破除二层环路</li><li>当主线路故障，阻塞接口被激活，主线路恢复，备份线路再次被阻塞</li><li>交换机之间通过周期性的发送BPDU报文，来实现STP的功能</li></ul><p><img src="/../img/img_artical/net_sec/4.2.6.png" alt="4.2.6"></p><p><strong>BPDU：桥协议数据单元</strong></p><ul><li>Bridge Protocol Data Unit ，桥协议数据单元，即STP协议的报文</li><li>也称二层的”心跳报文”，周期性发送，默认每2秒发送1次</li><li>组播发送，组播MAC地址为：01-80-C2-00-00-00</li></ul><h2 id="STP工作原理"><a href="#STP工作原理" class="headerlink" title="STP工作原理"></a>STP工作原理</h2><h3 id="STP工作原理-1"><a href="#STP工作原理-1" class="headerlink" title="STP工作原理"></a>STP工作原理</h3><ul><li><p>步骤一：选举根交换机</p></li><li><p>步骤二：在每个非根交换机上选举一个根端口</p></li><li><p>步骤三：在每条链路上选举一个指定端口</p></li><li><p>步骤四：阻塞非根端口、非指定端口</p></li></ul><p><img src="/../img/img_artical/net_sec/4.2.7.png" alt="4.2.7"></p><h3 id="选举根交换机"><a href="#选举根交换机" class="headerlink" title="选举根交换机"></a>选举根交换机</h3><p><strong>根网桥（根交换机）</strong></p><ul><li>STP引入了根桥（Root Bridge）概念</li><li>在一个STP网络中，根桥只有一个</li><li>STP初始化时，所有的交换机都认为自己是”根交换机”</li><li>交换机之间通过比较BID的来确定根交换机，BID值小的为根交换机</li></ul><p><strong>网桥ID（BID）</strong></p><ul><li>STP协议为交换机取的名字，用于在交换网络中唯一标识该设备</li><li>BID是优先级与MAC地址组成，BID值越小越优先</li><li>BID优先级取值范围：0~61440、默认值是:32768</li><li>BID优先级步长值：4096 (0或4096的倍数)</li></ul><p><img src="/../img/img_artical/net_sec/4.2.8.png" alt="4.2.8"></p><p><strong>通常根据BID优先级，选择根交换机</strong></p><ul><li>BID值小的为根交换机，首先比较优先级，优先级小的为根交换机</li><li>如果优先级一致，则MAC地址小的为根交换机</li></ul><p><img src="/../img/img_artical/net_sec/4.2.9.png" alt="4.2.9"></p><h3 id="STP配置命令"><a href="#STP配置命令" class="headerlink" title="STP配置命令"></a>STP配置命令</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.启动或关闭交换机的STP功能，默认情况下交换机的STP功能处于开启状态</span></span><br><span class="line"><span class="attr">[Huawei]stp</span> <span class="string">&#123;enable | disable&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.选择交换机的STP运行模式，默认情况下交换机的STP运行模式为MSTP</span></span><br><span class="line"><span class="attr">[Huawei]stp</span> <span class="string">mode &#123;stp | rstp | mstp&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3.修改交换机的STP优先级，设置根交换机</span></span><br><span class="line"><span class="attr">[Huawei]stp</span> <span class="string">priority 4096</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4.查看生成树状态信息</span></span><br><span class="line"><span class="attr">[Huawei]display</span> <span class="string">stp</span></span><br></pre></td></tr></table></figure><h2 id="选举根端口和指定端口"><a href="#选举根端口和指定端口" class="headerlink" title="选举根端口和指定端口"></a>选举根端口和指定端口</h2><h3 id="选举根端口"><a href="#选举根端口" class="headerlink" title="选举根端口"></a>选举根端口</h3><p><strong>根端口定律</strong></p><ul><li>非根交换机中有且只有一个根端口</li></ul><p><strong>选举根端口原则</strong></p><ul><li>非根交换机到根交换机的根路径开销值最小的端口（此端口到根的路径成本之和最低）如果根路径开销值相同，则比较对端交换机的BID，越小越优</li><li>如果对端BID也相同，则比较对端的PID，越小越优（PID由端口优先级和端口号组成优先级取值范围：0~240、步长值为16、端口优先级默认为128，所以端口号小PID就小）</li></ul><p><img src="/../img/img_artical/net_sec/4.2.10.png" alt="4.2.10"></p><p><strong>路径开销（路径成本）：Cost</strong></p><ul><li>交换机的每一个端口都有一个路径开销-Cost值</li><li>交换机端口Cost值和端口带宽有关，带宽越高，Cost值越小</li><li>默认情况下千兆端口开销为20000</li><li>默认情况下百兆端口开销为200000</li></ul><p><img src="/../img/img_artical/net_sec/4.2.11.png" alt="4.2.11"></p><p><strong>在非根网桥SW2&#x2F;SW3上，选择一个根端口（RP）</strong></p><ul><li>到根交换机的根路径开销值最小的端口，即根端口</li><li>SW2&#x2F;SW3的根端口为G0&#x2F;0&#x2F;1</li></ul><p><img src="/../img/img_artical/net_sec/4.2.12.png" alt="4.2.12"></p><h3 id="选举指定端口"><a href="#选举指定端口" class="headerlink" title="选举指定端口"></a>选举指定端口</h3><p><strong>指定端口定律</strong></p><ul><li>在每条链路上选择一个指定端口</li><li>根交换机的接口全是指定端口</li></ul><p><strong>选举指定端口原则</strong></p><ul><li>一条链路上，到根交换机的根路径开销值最小的端口，即指定端口</li><li>如果根路径开销相同，则比较接口所在交换机的BID，越小越优</li><li>如果交换机的BID也相同，则比较PID，越小越优</li></ul><h2 id="BPDU"><a href="#BPDU" class="headerlink" title="BPDU"></a>BPDU</h2><h3 id="BPDU-1"><a href="#BPDU-1" class="headerlink" title="BPDU"></a>BPDU</h3><p><strong>BPDU的4个关键字段，用于选举交换机角色和端口角色</strong></p><table><thead><tr><th align="center">BPDU报文字段</th><th align="center">字段作用</th></tr></thead><tbody><tr><td align="center">协议ID</td><td align="center"></td></tr><tr><td align="center">协议版本号</td><td align="center"></td></tr><tr><td align="center">报文类型</td><td align="center"></td></tr><tr><td align="center">拓扑变化标志</td><td align="center"></td></tr><tr><td align="center"><font color="#ff0000"><strong>根网桥ID</strong></font></td><td align="center"><font color="#ff0000"><strong>当前根桥的BID</strong></font></td></tr><tr><td align="center"><font color="#ff0000"><strong>根路径开销</strong></font></td><td align="center"><font color="#ff0000"><strong>本端口累计到根桥的开销值（Cost）</strong></font></td></tr><tr><td align="center"><font color="#ff0000"><strong>发送网桥ID</strong></font></td><td align="center"><font color="#ff0000"><strong>本交换设备的BID</strong></font></td></tr><tr><td align="center"><font color="#ff0000"><strong>端口ID</strong></font></td><td align="center"><font color="#ff0000"><strong>发送该BPDU报文的端口ID（PID）</strong></font></td></tr><tr><td align="center">报文老化时间</td><td align="center"></td></tr><tr><td align="center">消息老化时间</td><td align="center"></td></tr><tr><td align="center">发送报文间隔时间</td><td align="center"></td></tr><tr><td align="center">转发延迟时间</td><td align="center"></td></tr></tbody></table><h3 id="BPDU类型"><a href="#BPDU类型" class="headerlink" title="BPDU类型"></a>BPDU类型</h3><ul><li>配置 BPDU</li><li>拓扑变更BPDU</li></ul><h3 id="STP的收敛"><a href="#STP的收敛" class="headerlink" title="STP的收敛"></a>STP的收敛</h3><p><strong>STP端口的5种状态</strong></p><table><thead><tr><th>状态</th><th>用途</th></tr></thead><tbody><tr><td>禁用（Disabled）</td><td>强制关闭，没有启用STP协议</td></tr><tr><td>阻塞（Blocking）</td><td>只接收BPDU，不能发送BPDU</td></tr><tr><td>侦听（Listening）</td><td>比较BPDU，确定交换机角色和端口角色</td></tr><tr><td>学习（Learning）</td><td>基于端口上收到的数据帧，学习MAC地址表</td></tr><tr><td>转发（Forwarding）</td><td>端口的最终完美状态，发送和接收用户数据</td></tr></tbody></table><p><strong>STP的3种计时器，用于维护STP</strong></p><ul><li>Hello时间：端口发送BPDU报文的时间间隔，默认是2s</li><li>转发延迟（Forward delay）：端口从侦听到学习状态，分别停留的时间，15s</li><li>最大老化时间（Max Age）：一个端口最大的”没有接收BPDU”的时间间隔，20s</li></ul><p><strong>STP的收敛时间为：30~50s，非常慢</strong></p><ul><li>根交换机故障，STP的收敛时间约50秒</li><li>链路故障：STP的收敛时间约30~50秒</li></ul><p><img src="/../img/img_artical/net_sec/4.2.13.png" alt="4.2.13"></p><h2 id="MSTP工作原理及配置"><a href="#MSTP工作原理及配置" class="headerlink" title="MSTP工作原理及配置"></a>MSTP工作原理及配置</h2><h3 id="STP回顾"><a href="#STP回顾" class="headerlink" title="STP回顾"></a>STP回顾</h3><p><strong>弊端</strong></p><ul><li>收敛时间慢：30s~50s</li><li>设备利用率低</li></ul><p><strong>方案</strong></p><ul><li>RSTP，快速生成树协议</li><li>MSTP，多生成树协议</li></ul><h3 id="RSTP概述"><a href="#RSTP概述" class="headerlink" title="RSTP概述"></a>RSTP概述</h3><p><strong>RSTP：快速生成树协议</strong></p><ul><li>公有协议：IEEE802.1w</li><li>STP的基础上优化而来</li><li>实现网络的快速收敛，降低网络故障时间，提高数据转发的效率</li></ul><p><strong>RSTP对STP的改进</strong></p><ul><li>增加了2种端口角色（AP和BP）<ul><li>Backup Port（备份端口）主要是由于Designated Port的故障而触发的。当Designated Port发生故障时，Backup Port会立即开始转发数据</li><li>Alternate Port（备用端口）网络拓扑发生变化时触发状态转换，并转变为指定（designated）端口或根（root）端口，从而提供冗余路径</li></ul></li><li>减少了3个端口状态（阻塞、学习、转发合为一种）</li><li>引入了让指定端口尽快进入转发状态的机制（P&#x2F;A机制）</li></ul><p><strong>RSTP的不足</strong></p><ul><li>RSTP和STP有一个共同缺陷：局域网内所有的VLAN共享一颗生成树</li><li>所有的VLAN的数据转发路径是相同的</li><li>交换机之间的多个链路，只能实现备份的作用，永远只会使用其中的主链路转发数据，无法实现VLAN数据流的负载均衡，从而无法提高设备利用率，还有可能造成部分VLAN的数据流无法转发。</li></ul><h3 id="MSTP概述"><a href="#MSTP概述" class="headerlink" title="MSTP概述"></a>MSTP概述</h3><p><strong>MSTP，即Multiple STP，多生成树协议</strong></p><ul><li>RSTP的基础上优化而来</li><li>MSTP网络中，引入了域的概念，称为MST域</li><li>每个MST域中包含一个或多个”生成树”称之为”实例”</li><li>引入了实例”instance”的概念，实现VLAN数据流的负载均衡</li><li>默认情况下，所有的VLAN都属于同一个默认的实例 –  instance 0</li><li>可以基于需求，将不同的VLAN分配到不同的实例中</li><li>不同的实例，就是不同的生成树，就对应着多个不同的根桥</li></ul><h3 id="配置思路"><a href="#配置思路" class="headerlink" title="配置思路"></a>配置思路</h3><p><strong>每个交换机创建相同的VLAN</strong></p><p><strong>交换机之间的链路配置为 Trunk，允许所有的VLAN通过</strong></p><p><strong>交换机启用STP协议，配置模式为MSTP</strong></p><p><strong>交换机指定MST域的域名、实例和vlan的对应关系</strong></p><p><strong>交换机上激活MST域的配置</strong></p><p><strong>验证与测试MST域的配置</strong></p><p><strong>同一个MST域的交换机配置特点：</strong></p><ul><li>都启动了MSTP</li><li>域名配置相同</li><li>实例配置相同</li></ul><h2 id="MSTP负载均衡"><a href="#MSTP负载均衡" class="headerlink" title="MSTP负载均衡"></a>MSTP负载均衡</h2><h3 id="MSTP负载均衡-1"><a href="#MSTP负载均衡-1" class="headerlink" title="MSTP负载均衡"></a>MSTP负载均衡</h3><p><strong>STP&#x2F;RSTP的弊端</strong></p><ul><li>所有的VLAN共用一个”生成树”，防止环路的同时只能确保一半的设备得到利用，另外一半的设备仅仅用作”备份”，无法提高设备的利用率</li></ul><p><strong>MSTP负载均衡</strong></p><ul><li>不同的VLAN关联到不同的实例</li><li>不同的实例的根交换机放置在不同的交换机上</li><li>不同的VLAN通过不同的根交换机进行数据的转发，从而确保提高设备的利用率，同时设备之间还能实现备份</li></ul><p><img src="/../img/img_artical/net_sec/4.2.14.png" alt="4.2.14"></p><p><strong>需求描述</strong></p><ul><li><p>PC1属于VLAN10，IP地址为192.168.10.1&#x2F;24，网关为192.168.10.254</p></li><li><p>PC2属于VLAN20，IP地址为192.168.20.1&#x2F;24，网关为192.168.20.254</p></li><li><p>确保PC1与PC2互通</p></li><li><p>合理配置MSTP，确保PC1与PC2之间的互通路径是最优的</p></li><li><p>配置命令</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">1.S1、S2、S3创建vlan并配置连接交换机的端口为trunk</span></span><br><span class="line"><span class="attr">[S1]VLAN</span> <span class="string">batch 10 20</span></span><br><span class="line"><span class="attr">[S1]port-group</span> <span class="string">1</span></span><br><span class="line"><span class="attr">[S1-port-group-1]group-member</span> <span class="string">G0/0/3 G0/0/10</span></span><br><span class="line"><span class="attr">[S1-port-group-1]port</span> <span class="string">link-type trunk </span></span><br><span class="line"><span class="attr">[S1-port-group-1]port</span> <span class="string">trunk allow-pass vlan ALL</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[S2]VLAN</span> <span class="string">batch 10 20</span></span><br><span class="line"><span class="attr">[S2]port-group</span> <span class="string">1</span></span><br><span class="line"><span class="attr">[S2-port-group-1]group-member</span> <span class="string">G0/0/4 G0/0/10</span></span><br><span class="line"><span class="attr">[S2-port-group-1]port</span> <span class="string">link-type trunk </span></span><br><span class="line"><span class="attr">[S2-port-group-1]port</span> <span class="string">trunk allow-pass vlan ALL</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[S3]VLAN</span> <span class="string">batch 10 20</span></span><br><span class="line"><span class="attr">[S3]port-group</span> <span class="string">1</span></span><br><span class="line"><span class="attr">[S3-port-group-1]group-member</span> <span class="string">G0/0/5 G0/0/6</span></span><br><span class="line"><span class="attr">[S3-port-group-1]port</span> <span class="string">link-type trunk </span></span><br><span class="line"><span class="attr">[S3-port-group-1]port</span> <span class="string">trunk allow-pass vlan ALL</span></span><br><span class="line"></span><br><span class="line"><span class="attr">2.S1、S2、S3配置MSTP区域并激活</span></span><br><span class="line"><span class="attr">[S1]stp</span> <span class="string">mode mstp 启用MSTP协议</span></span><br><span class="line"><span class="attr">[S1]stp</span> <span class="string">region-configuration 创建区域</span></span><br><span class="line"><span class="attr">[S1-mst-region]region-name</span> <span class="string">ntd 定义区域名为ntd</span></span><br><span class="line"><span class="attr">[S1-mst-region]instance</span> <span class="string">1 vlan 10 指定vlan与实例的对应关系</span></span><br><span class="line"><span class="attr">[S1-mst-region]instance</span> <span class="string">2 vlan 20</span></span><br><span class="line"><span class="attr">[S1-mst-region]active</span> <span class="string">region-configuration 激活区域配置</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">[S2]stp</span> <span class="string">mode mstp 启用MSTP协议</span></span><br><span class="line"><span class="attr">[S2]stp</span> <span class="string">region-configuration 创建区域</span></span><br><span class="line"><span class="attr">[S2-mst-region]region-name</span> <span class="string">ntd 定义区域名为ntd</span></span><br><span class="line"><span class="attr">[S2-mst-region]instance</span> <span class="string">1 vlan 10 指定vlan与实例的对应关系</span></span><br><span class="line"><span class="attr">[S2-mst-region]instance</span> <span class="string">2 vlan 20</span></span><br><span class="line"><span class="attr">[S2-mst-region]active</span> <span class="string">region-configuration 激活区域配置</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[S3]stp</span> <span class="string">mode mstp 启用MSTP协议</span></span><br><span class="line"><span class="attr">[S3]stp</span> <span class="string">region-configuration 创建区域</span></span><br><span class="line"><span class="attr">[S3-mst-region]region-name</span> <span class="string">ntd 定义区域名为ntd</span></span><br><span class="line"><span class="attr">[S3-mst-region]instance</span> <span class="string">1 vlan 10 指定vlan与实例的对应关系</span></span><br><span class="line"><span class="attr">[S3-mst-region]instance</span> <span class="string">2 vlan 20</span></span><br><span class="line"><span class="attr">[S3-mst-region]active</span> <span class="string">region-configuration 激活区域配置</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3.配置S1为vlan10的主根、vlan20的次根网桥并查看配置</span></span><br><span class="line"><span class="attr">[S1]stp</span> <span class="string">instance 1 priority 4096</span></span><br><span class="line"><span class="attr">[S1]stp</span> <span class="string">instance 2 priority 8192</span></span><br><span class="line"></span><br><span class="line"><span class="attr">4.配置S2为vlan20的主根、vlan10的次根根网桥并查看配置</span></span><br><span class="line"><span class="attr">[S2]stp</span> <span class="string">instance2 priority 4096</span></span><br><span class="line"><span class="attr">[S2]stp</span> <span class="string">instance 1 priority 8192</span></span><br><span class="line"></span><br><span class="line"><span class="attr">5.配置PC1加入vlan10、PC2加入vlan20</span></span><br><span class="line"><span class="attr">[S3]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="attr">[S3-GigabitEthernet0/0/1]port</span> <span class="string">link-type access </span></span><br><span class="line"><span class="attr">[S3-GigabitEthernet0/0/1]port</span> <span class="string">default vlan 10</span></span><br><span class="line"><span class="attr">[S3]interface</span> <span class="string">GigabitEthernet 0/0/2</span></span><br><span class="line"><span class="attr">[S3-GigabitEthernet0/0/2]port</span> <span class="string">link-type access </span></span><br><span class="line"><span class="attr">[S3-GigabitEthernet0/0/2]port</span> <span class="string">default vlan 20</span></span><br><span class="line"></span><br><span class="line"><span class="attr">6.配置S1与路由相连的接口加入vlan10</span></span><br><span class="line"><span class="attr">[S1]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="attr">[S1-GigabitEthernet0/0/1]port</span> <span class="string">link-type access </span></span><br><span class="line"><span class="attr">[S1-GigabitEthernet0/0/1]port</span> <span class="string">default vlan 10</span></span><br><span class="line"></span><br><span class="line"><span class="attr">7.配置S2与路由相连的接口加入</span> <span class="string">vlan20</span></span><br><span class="line"><span class="attr">[S2]interface</span> <span class="string">GigabitEthernet 0/0/2</span></span><br><span class="line"><span class="attr">[S2-GigabitEthernet0/0/2]port</span> <span class="string">link-type access </span></span><br><span class="line"><span class="attr">[S2-GigabitEthernet0/0/2]port</span> <span class="string">default vlan 20</span></span><br><span class="line"></span><br><span class="line"><span class="attr">8.配置路由器接口IP</span></span><br><span class="line"><span class="attr">[R1]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/1]ip</span> <span class="string">address 192.168.10.254 24</span></span><br><span class="line"><span class="attr">[R1]interface</span> <span class="string">GigabitEthernet 0/0/2</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/2]ip</span> <span class="string">address 192.168.20.254 24</span></span><br><span class="line"></span><br><span class="line"><span class="attr">9.测试与验证</span></span><br><span class="line"><span class="attr">pc1</span> <span class="string">ping  pc2  通</span></span><br><span class="line"></span><br><span class="line"><span class="attr">10.查看验证</span></span><br><span class="line"> <span class="attr">&lt;SW3&gt;display</span> <span class="string">stp brief </span></span><br><span class="line"><span class="attr">查看S1的instance</span> <span class="string">1 g0/0/3 g0/0/10都是指定接口</span></span><br><span class="line"><span class="attr">查看S2的instance</span> <span class="string">2 g0/0/4 g0/0/10都是指定接口  </span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 弹性交换网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-弹性交换网络1</title>
      <link href="/posts/switching1.html"/>
      <url>/posts/switching1.html</url>
      
        <content type="html"><![CDATA[<h1 id="弹性交换网络"><a href="#弹性交换网络" class="headerlink" title="弹性交换网络"></a>弹性交换网络</h1><h2 id="Trunk原理与配置"><a href="#Trunk原理与配置" class="headerlink" title="Trunk原理与配置"></a>Trunk原理与配置</h2><h3 id="Vlan内通信"><a href="#Vlan内通信" class="headerlink" title="Vlan内通信"></a>Vlan内通信</h3><p><strong>实现跨交换的同Vlan通信</strong></p><p><img src="/../img/img_artical/net_sec/4.1.1.png" alt="4.1.1"></p><h3 id="Trunk接口"><a href="#Trunk接口" class="headerlink" title="Trunk接口"></a>Trunk接口</h3><p><strong>场景</strong></p><ul><li>通常用于交换机与交换机互连</li></ul><p><strong>特点</strong></p><ul><li>同时可以属于多个VLAN</li><li>接收数据帧，检查数据帧中的vlan标签，判断是否允许这个vlan标签通过，如果允许则接收数据帧，如果不允许则丢弃数据</li><li>转发数据帧，检查数据帧中的vlan标签，判断是否允许这个vlan标签通过，如果不允许则丢弃数据，如果允许，且vlan标签与接口Pvid相同，则剥离标签后转发，如果不相同则直接转发</li></ul><h3 id="Hybrid接口"><a href="#Hybrid接口" class="headerlink" title="Hybrid接口"></a>Hybrid接口</h3><p><strong>场景</strong></p><ul><li>既可以连接用户终端，也可以连接交换机&#x2F;路由器</li></ul><p><strong>特点</strong></p><ul><li>同时可以属于多个VLAN</li><li>可以像Access 接口一样，发送出去的数据不携带标签</li><li>可以像Trunk 接口一样，发送出去的数据携带标签</li><li>可以灵活控制接口上发送的数据帧是否携带标签</li></ul><h3 id="配置Trunk接口"><a href="#配置Trunk接口" class="headerlink" title="配置Trunk接口"></a>配置Trunk接口</h3><p><strong>配置命令</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[SW1]vlan</span> <span class="string">batch vlan 1 to 10          //创建vlan</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">G0/0/0                 //进入接口</span></span><br><span class="line"><span class="attr">[SW1-G0/0/0]port</span> <span class="string">link-type trunk      //设置接口为trunk</span></span><br><span class="line"><span class="attr">[SW1-G0/0/0]port</span> <span class="string">trunk allow-pass vlan all     //设置trunk允许通过的vlan</span></span><br></pre></td></tr></table></figure><h2 id="Eth-Trunk原理"><a href="#Eth-Trunk原理" class="headerlink" title="Eth-Trunk原理"></a>Eth-Trunk原理</h2><h3 id="组网中经常遇到的问题"><a href="#组网中经常遇到的问题" class="headerlink" title="组网中经常遇到的问题"></a>组网中经常遇到的问题</h3><p><img src="/../img/img_artical/net_sec/4.1.2.png" alt="4.1.2"></p><h3 id="链路聚合技术"><a href="#链路聚合技术" class="headerlink" title="链路聚合技术"></a>链路聚合技术</h3><p><strong>概述</strong></p><ul><li>Eth-Trunk(链路聚合技术)作为一种捆绑技术，可以把多个独立的物理接口绑定在起，作为一个大带宽的逻辑接口使用</li></ul><p><strong>好处</strong></p><ul><li>增加设备之间的互联带宽</li><li>提高设备之间的可靠性</li><li>对流量负载均衡，提高链路利用率</li></ul><p><img src="/../img/img_artical/net_sec/4.1.3.png" alt="4.1.3"></p><h3 id="Eth-Trunk概念"><a href="#Eth-Trunk概念" class="headerlink" title="Eth-Trunk概念"></a>Eth-Trunk概念</h3><p><strong>Eth-Trunk链路聚合模式</strong></p><ul><li>手工模式</li><li>LACP模式</li></ul><h3 id="手工模式"><a href="#手工模式" class="headerlink" title="手工模式"></a>手工模式</h3><p><strong>当设备不支持LACP协议时，使用手工模式</strong></p><ul><li>手工模式下3条活动链路都参与数据转发并分担流量</li><li>当一条链路故障时，在剩余的2条活动链路中分担流量</li></ul><p><img src="/../img/img_artical/net_sec/4.1.4.png" alt="4.1.4"></p><h3 id="配置手工模式Eth-Trunk"><a href="#配置手工模式Eth-Trunk" class="headerlink" title="配置手工模式Eth-Trunk"></a>配置手工模式Eth-Trunk</h3><p><strong>手工模式链路聚合配置命令</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[SW1]interface</span> <span class="string">Eth-Trunk 1                //创建并进入 eth-trunk 1</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]mode</span> <span class="string">manual load-balance     //配置手工模式</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]trunk</span> <span class="string">port G0/0/1         //加入成员端口</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]trunk</span> <span class="string">port G0/0/2         //加入成员端口</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]port</span> <span class="string">link-type trunk      //配置 eth-trunk 类型为 trunk</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]port</span> <span class="string">trunk allow-pass vlan all  //允许所有的 vlan</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[SWl]display</span> <span class="string">eth-trunk 1           //查看当前设备的 eth-trunk 1的配置</span></span><br></pre></td></tr></table></figure><h2 id="LACP模式Eth-trunk配置"><a href="#LACP模式Eth-trunk配置" class="headerlink" title="LACP模式Eth-trunk配置"></a>LACP模式Eth-trunk配置</h2><h3 id="LACP模式"><a href="#LACP模式" class="headerlink" title="LACP模式"></a>LACP模式</h3><p><strong>LACP模式也称为M:N模式</strong></p><ul><li>M条活动链路，N条备份链路</li><li>当活动链路出现故障时，备份链路才进行转发</li></ul><h3 id="LACP模式工作原理"><a href="#LACP模式工作原理" class="headerlink" title="LACP模式工作原理"></a>LACP模式工作原理</h3><p><strong>LACP模式工作原理</strong></p><ul><li>确定主动端</li><li>确定活动链路</li><li>LACP抢占功能</li></ul><h3 id="确定LACP主动端"><a href="#确定LACP主动端" class="headerlink" title="确定LACP主动端"></a>确定LACP主动端</h3><p><strong>确定LACP主动端</strong></p><ul><li>通过比较两端设备的系统优先级来确定LACP主动端</li><li>系统优先级越小越优先，默认值为32768</li><li>如果系统优先级相同，则比较两端设备的MAC地址，越小越优先</li></ul><h3 id="确定LACP活动链路"><a href="#确定LACP活动链路" class="headerlink" title="确定LACP活动链路"></a>确定LACP活动链路</h3><ul><li>选出主动端后，以主动端的接口优先级来选择活动接口</li><li>如果主动端的接口优先级相同，则选择接口编号小的为活动接口</li><li>两端设备的活动端口建立的活动链路以负载分担的方式转发数据</li><li>可以设置活动端口的数量</li></ul><h3 id="开启LACP抢占功能"><a href="#开启LACP抢占功能" class="headerlink" title="开启LACP抢占功能"></a>开启LACP抢占功能</h3><ul><li>开启LACP抢占后，链路聚合组会始终选择高优先级的接口作为活动接口</li><li>活动接口故障后，备份链路的接口被激活，承担数据转发任务</li><li>活动接口恢复后，优先级高于备份接口，进行抢占，重新成为活动端口</li></ul><h3 id="配置LACP模式的Eth-Trunk"><a href="#配置LACP模式的Eth-Trunk" class="headerlink" title="配置LACP模式的Eth-Trunk"></a>配置LACP模式的Eth-Trunk</h3><p><strong>配置命令</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[SWl]lacp</span> <span class="string">priority 100      //设置LACP 系统优先级</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">Eth-Trunk 1  //创建并进入 eth-trunk 1</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]mode</span> <span class="string">lacp-static   //设置为LACP模式</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]trunk</span> <span class="string">port g0/0/1   //添加成员接口</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunkl]trunk</span> <span class="string">port g0/0/2</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]trunk</span> <span class="string">port g0/0/3</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunkl]port</span> <span class="string">link-type trunk  //设置trunk模式</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]port</span> <span class="string">trunk allow-pass vlan all  //允许所有vlan通过</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunk1]max</span> <span class="string">active-link number 2     //设置活动端口上限</span></span><br><span class="line"><span class="attr">[SW1-Eth-Trunkl]lacp</span> <span class="string">preempt enable//开启LACP抢占</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 弹性交换网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-网络通信原理4</title>
      <link href="/posts/netexp4.html"/>
      <url>/posts/netexp4.html</url>
      
        <content type="html"><![CDATA[<h1 id="网络通信原理"><a href="#网络通信原理" class="headerlink" title="网络通信原理"></a>网络通信原理</h1><h2 id="TCP数据包格式"><a href="#TCP数据包格式" class="headerlink" title="TCP数据包格式"></a>TCP数据包格式</h2><h3 id="传输层的作用"><a href="#传输层的作用" class="headerlink" title="传输层的作用"></a>传输层的作用</h3><p><strong>IP层提供点到点的连接</strong></p><p><strong>传输层提供端到端的连接</strong></p><ul><li>端口到端口的连接（不同端口号，代表不同应用程序）</li></ul><p><img src="/../img/img_artical/net_sec/3.4.1.png" alt="3.4.1"></p><h3 id="TCP协议概述"><a href="#TCP协议概述" class="headerlink" title="TCP协议概述"></a>TCP协议概述</h3><p><strong>TCP（Transmission Control Protocol）</strong></p><ul><li>传输控制协议</li><li>可靠的、面向连接的协议</li><li>传输效率低（建立连接需要的时间长）</li></ul><h3 id="UDP协议概述"><a href="#UDP协议概述" class="headerlink" title="UDP协议概述"></a>UDP协议概述</h3><p><strong>UDP（User Datagram Protocol）</strong></p><ul><li>用户数据报文协议</li><li>不可靠的、无连接的服务</li><li>传输效率高（无需专门建立连接，速度快）</li></ul><h3 id="TCP的报文结构"><a href="#TCP的报文结构" class="headerlink" title="TCP的报文结构"></a>TCP的报文结构</h3><p><img src="/../img/img_artical/net_sec/3.4.2.png" alt="3.4.2"></p><ul><li>源端口：源端口和IP地址的作用是标识报文的返回地址</li><li>目的端口：目标端口指明接收方计算机上的应用程序接口<ul><li>备注：源端口是随机的，目标端口是固定的</li></ul></li><li>序列号：seq，使用序列号，保证了tcp传输的有序性</li><li>确认号：ACK，确认号，表示在回复对端，你发的（在该序号之前的所有数据，我都已经收到）</li><li>首部长度：由固定头部和可选项组成， 最小为20字节，最大为60字节</li><li>保留：为将来定义新的用途保留，现在一般置0</li><li>控制位：共6个，每一个标志位表示一个控制功能<ul><li>SYN&#x3D;1：代表请求建立连接（同步位）</li><li>ACK&#x3D;1：代表同意建立连接（确认位）</li><li>FIN&#x3D;1：代表请求断开连接（停止位）</li><li>URG&#x3D;1：代表紧急指针开启—紧急指针：特别着急的数据段优先传递</li><li>PSH&#x3D;1：代表提示接收端应用程序要立刻将数据从缓冲区里面取走.</li><li>RST&#x3D;1：数据没有传输完成断开了，在次请求建议连接</li></ul></li><li>窗口：滑动窗口，代表数据在发送之前，设备间要进行协商，依照最小单位为准发送</li><li>校验和：此校验和是对整个的 TCP 报文段，包括 TCP 头部和 TCP 数据</li></ul><h2 id="TCP连接与断开"><a href="#TCP连接与断开" class="headerlink" title="TCP连接与断开"></a>TCP连接与断开</h2><h3 id="TCP连接与断开-1"><a href="#TCP连接与断开-1" class="headerlink" title="TCP连接与断开"></a>TCP连接与断开</h3><ul><li>TCP连接与断开<ul><li>TCP连接的建立：三次握手、TCP连接的断开：四次挥手</li></ul></li><li>SYN：同步位，TCP需要建立连接时将该值设为1</li><li>ACK：确认位，当该位为1时，用于确认发送方的数据</li><li>FIN：当TCP断开连接时将该位置为1</li></ul><h3 id="TCP的连接"><a href="#TCP的连接" class="headerlink" title="TCP的连接"></a>TCP的连接</h3><p><strong>TCP的连接：三次握手</strong></p><p><img src="/../img/img_artical/net_sec/3.4.3.png" alt="3.4.3"></p><h3 id="TCP的断开"><a href="#TCP的断开" class="headerlink" title="TCP的断开"></a>TCP的断开</h3><p><strong>TCP的断开：四次挥手</strong></p><p><img src="/../img/img_artical/net_sec/3.4.4.png" alt="3.4.4"></p><h2 id="UDP协议解析"><a href="#UDP协议解析" class="headerlink" title="UDP协议解析"></a>UDP协议解析</h2><h3 id="UDP封装格式"><a href="#UDP封装格式" class="headerlink" title="UDP封装格式"></a>UDP封装格式</h3><p><img src="/../img/img_artical/net_sec/3.4.5.png" alt="3.4.5"></p><ul><li><p>源端口：源端口和IP地址的作用是标识报文的返回地址</p></li><li><p>目的端口：目标端口指明接收方计算机上的应用程序接口</p></li><li><p>UDP长度：代表整个UDP的数据报是多大</p></li><li><p>UDP校验和：是一个检查机制，在发送数据包之前检查一下数据包的完整性</p></li></ul><h3 id="UDP的应用"><a href="#UDP的应用" class="headerlink" title="UDP的应用"></a>UDP的应用</h3><table><thead><tr><th align="center">端口</th><th align="center">协议</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">69</td><td align="center">TFTP</td><td align="center">简单文件传输协议</td></tr><tr><td align="center">53</td><td align="center">DNS</td><td align="center">域名服务</td></tr><tr><td align="center">123</td><td align="center">NTP</td><td align="center">网络时间协议</td></tr><tr><td align="center">67&#x2F;68</td><td align="center">DHCP</td><td align="center">动态主机配置协议</td></tr></tbody></table><h2 id="应用层协议介绍"><a href="#应用层协议介绍" class="headerlink" title="应用层协议介绍"></a>应用层协议介绍</h2><h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><p><strong>Domain Name System，域名系统</strong></p><ul><li>用来完成域名与IP地址之间的映射，便于用户对网站的记忆和访问</li><li>端口号为TCP或UDP的53</li></ul><h3 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h3><p><strong>File Transfer Protocol</strong></p><ul><li>文件传输协议</li><li>使用最为广泛的文件传输应用，用于稳定的传输的大容量的文件</li><li>端口号为TCP21和20</li></ul><p><strong>FTP的工作原理</strong></p><ul><li>控制连接：TCP21，用于发送FTP命令信息</li><li>数据连接：TCP20，用于上传、下载数据</li></ul><h3 id="Telnet"><a href="#Telnet" class="headerlink" title="Telnet"></a>Telnet</h3><p><strong>网络设备管理方式</strong></p><ul><li>本地管理，通过console 线缆管理网络设备。第一次配置设备时使用</li><li>远程管理，通过IP网络，利用远程管理协议管理设备，比如Telnet或SSH</li></ul><p><strong>常见的远程管理协议</strong></p><ul><li>Telnet，多在公司内部使用，传输数据的方式是明文，端口号为TCP23</li><li>SSH，可在任何场景下使用，传输数据的方式是密文，端口号为 TCP22</li></ul><p><strong>Telnet的常见认证方式</strong></p><ul><li>密码认证，远程登录时，仅仅需要密码，认证方式单一，权限控制不精准</li><li>AAA认证，远程登录时，需要用户名和密码，可为不同的用户分配不同权限远程登录权限的控制，更加灵活</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络通信原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-网络通信原理3</title>
      <link href="/posts/netexp3.html"/>
      <url>/posts/netexp3.html</url>
      
        <content type="html"><![CDATA[<h1 id="网络通信原理"><a href="#网络通信原理" class="headerlink" title="网络通信原理"></a>网络通信原理</h1><h2 id="IP数据包格式"><a href="#IP数据包格式" class="headerlink" title="IP数据包格式"></a>IP数据包格式</h2><h3 id="网络层概述"><a href="#网络层概述" class="headerlink" title="网络层概述"></a>网络层概述</h3><p><strong>位于OSI模型第三层</strong></p><p><strong>作用</strong></p><ul><li>定义网络设备的逻辑地址，俗称网络层地址（如IP地址）</li><li>在不同的网段之间选择最佳数据转发路径</li></ul><p><strong>协议</strong></p><ul><li>IP协议</li></ul><h3 id="IP数据包格式-1"><a href="#IP数据包格式-1" class="headerlink" title="IP数据包格式"></a>IP数据包格式</h3><p><strong>网络层的所有功能，都是通过该层的诸多协议实现的</strong></p><ul><li>目前网络中，主要的网络层协议是IP 协议</li></ul><p><img src="/../img/img_artical/net_sec/3.3.1.png" alt="3.3.1"></p><p><strong>IP数据报是可变长度的，它由两部分组成：首部和数据</strong></p><ul><li>首部由两部分组成:固定部分和可变部分</li><li>固定部分20字节，可变部分由一些选项组成，最长40字节</li></ul><p><img src="/../img/img_artical/net_sec/3.3.2.png" alt="3.3.2"></p><p><strong>字段作用解析</strong></p><ul><li><p>版本：指的IP地址的版本 （IPv4 或 IPV6）</p></li><li><p>首部长度：数据包的首部长度一共是多少</p></li><li><p>优先级与服务类型：表示数据包是否需要优选传递</p></li><li><p>总长度：表示的是整个数据包的大小，也就是首部+数据</p></li><li><p>标识符、标志、段偏移量：作用将拆开的数据包进行组合（用来数据重组的）</p></li><li><p>TTL值：数据生命周期</p><ul><li>作用：防止数据无限循环转发</li><li>原理：数据包每经过一台路由器，TTL值会减1，当TTL为0时，数据包被丢弃</li></ul></li><li><p>协议号：数据包在网络中传递时所用的协议</p><ul><li>1 – ICMP</li><li>6 – TCP</li><li>17 – UDP</li></ul></li><li><p>首部校验和：是用来做数据包核对用的，确定数据包是否是完整，如果是就接收，如果不是完整的数据包则丢弃</p></li><li><p>源IP地址 ：表示发送这个数据包的设备的IP地址</p></li><li><p>目标IP地址：表示接收这个数据包的设备的IP地址</p></li><li><p>可选项：他是一个可变长度，取值范围：0-40个字节 一般数据包中不是加该选项的</p></li><li><p>数据：他是应用层发出的数据—–在数据包中体现，单独看不到</p></li></ul><h2 id="IP地址解析"><a href="#IP地址解析" class="headerlink" title="IP地址解析"></a>IP地址解析</h2><h3 id="网络与广播地址"><a href="#网络与广播地址" class="headerlink" title="网络与广播地址"></a>网络与广播地址</h3><p><strong>网络地址</strong></p><ul><li>主机位全为0的IP地址</li><li>表示的是一个网络范围，仅仅表示一个区域，不代表任何一个主机</li><li>例如：192.168.1.0 255.255.25.0，是网络地址</li></ul><p><strong>广播地址</strong></p><ul><li>主机位全为1的IP地址</li><li>表示的是一个网络范围内的所有主机&#x2F;设备</li><li>例如：192.168.1.255 255.255.255.0，是广播地址</li></ul><h3 id="可用IP地址"><a href="#可用IP地址" class="headerlink" title="可用IP地址"></a>可用IP地址</h3><p><strong>可用IP地址范围及广播地址</strong></p><p><img src="/../img/img_artical/net_sec/3.3.3.png" alt="3.3.3"></p><h2 id="网络层常见协议"><a href="#网络层常见协议" class="headerlink" title="网络层常见协议"></a>网络层常见协议</h2><h3 id="ICMP协议概述"><a href="#ICMP协议概述" class="headerlink" title="ICMP协议概述"></a>ICMP协议概述</h3><p><strong>概述</strong></p><ul><li>ICMP（Internet Control Message Protocol），Internet控制消息协议</li><li>位于 OSI 模型第三层，即网络层</li><li>协议号：1</li></ul><p><strong>作用</strong></p><ul><li>在IP网络中发送控制消息，反馈可能发生在通信环境中的各种问题，从而为网络连通性测试以及网络故障定位提供有效指示信息</li></ul><p><strong>场景示例</strong></p><ul><li>当路由器收到一个不能被送到最终目的地的数据包时，路由器会向源主机发送一个ICMP主机不可达的消息</li></ul><p><img src="/../img/img_artical/net_sec/3.3.4.png" alt="3.3.4"></p><h3 id="ICMP协议应用"><a href="#ICMP协议应用" class="headerlink" title="ICMP协议应用"></a>ICMP协议应用</h3><p><strong>测试工具-Ping</strong></p><ul><li>测试两个设备之间的连通性</li><li>使用的是ICMP协议的数据包</li></ul><p><strong>测试命令</strong></p><ul><li>ping  目标IP</li><li>ping  目标IP  -t          &#x2F;&#x2F;一直ping目标地址</li><li>ping  目标IP  -c  X     &#x2F;&#x2F;指定ping几次</li><li>ping  目标IP  -i   X     &#x2F;&#x2F;指定ping包的字节大小</li><li>tracert  目标IP          &#x2F;&#x2F;路由追踪</li></ul><p><strong>Echo Request，请求报文</strong></p><p><strong>Echo Reply，响应报文</strong></p><p><img src="/../img/img_artical/net_sec/3.3.5.png" alt="3.3.5"></p><p><strong>常见的Ping反馈结果</strong></p><ul><li><p>连接建立成功，Reply from 目标地址….</p></li><li><p>目标主机不可达，Destination host unreachable</p><ul><li>同网段中没有这个IP地址，或IP地址错误</li><li>跨网段通信时，本主机没有填写网关地址</li></ul></li><li><p>请求时间超时，Request timed out</p><ul><li>对方主机没有填写网关地址</li><li>对方的防火墙阻断了</li></ul></li></ul><h3 id="ARP协议概述"><a href="#ARP协议概述" class="headerlink" title="ARP协议概述"></a>ARP协议概述</h3><p><strong>ARP（address resolution protocol）：地址解析协议</strong></p><ul><li>属于OSI 模型第三层（网络层）</li><li>主要作用是:基于目标IP地址获得对应的目标MAC地址，从而完成数据的2层头部封装实现数据的快速转发</li></ul><p><strong>ARP报文类型</strong></p><ul><li>ARP请求报文，源设备以广播的方式发送，向所有设备请求MAC地址</li><li>ARP回应报文，目标设备以单播的方式回应，直接返回给“源设备</li></ul><p><strong>ARP核心工作表</strong></p><ul><li>ARP表，包含的是IP地址与MAC地址的对应关系条目</li><li>ARP条目分为静态和动态两种类型</li><li>动态ARP条目的存活时间是1200s</li></ul><p><strong>任何设备发送数据的原理</strong></p><ul><li>任何设备在发送数据包之前，必须检查ARP 表，查看包含去往目标IP地址时所使用的MAC地址</li><li>如果ARP表包含目标IP地址对应的条目，则使用目标MAC封装数据</li><li>如果ARP表不包含对应的ARP条目信息，则发送ARP请求，获得目标MAC</li></ul><p><strong>ARP常用命令</strong></p><ul><li>PC&gt;arp  -a &#x2F;&#x2F;查看arp缓存表<br>Internet Address   Physical Address   Type<br>192.168.1.2         54-89-98-B9-74-25  dynamic (动态)</li><li>PC&gt;arp -d  &#x2F;&#x2F;清空arp缓存表</li><li>PC&gt;arp -s 192.168.1.2  54-89-98-B9-74-25  &#x2F;&#x2F;添加静态的ARP表记录</li></ul><h3 id="ARP工作原理"><a href="#ARP工作原理" class="headerlink" title="ARP工作原理"></a>ARP工作原理</h3><ul><li>设备刚开机时，ARP表是空的</li><li>主机10.1.1.1要与10.1.1.2通信，首先以广播方式发送ARP 请求</li></ul><p><img src="/../img/img_artical/net_sec/3.3.6.png" alt="3.3.6"></p><ul><li>所有主机都接收到10.1.1.1的ARP请求报文，但只有10.1.1.2给它一个单播回复，并将10.1.1.1的MAC地址保存在自己的ARP表</li></ul><p><img src="/../img/img_artical/net_sec/3.3.7.png" alt="3.3.7"></p><ul><li>主机10.1.1.1将10.1.1.2的MAC地址保存到ARP缓存中，然后就可以发送数据</li></ul><h2 id="路由原理和配置"><a href="#路由原理和配置" class="headerlink" title="路由原理和配置"></a>路由原理和配置</h2><h3 id="什么是路由"><a href="#什么是路由" class="headerlink" title="什么是路由"></a>什么是路由</h3><p><strong>将数据包从一个网段发送到另一个网段</strong></p><ul><li>需要依靠具备路由功能的设备来完成</li><li>常见的路由设备有路由器或三层交换机、防火墙</li></ul><h3 id="路由器如何工作"><a href="#路由器如何工作" class="headerlink" title="路由器如何工作"></a>路由器如何工作</h3><p><strong>根据路由表选择最佳路径</strong></p><ul><li>每个路由器都维护着一张路由表，这是转发数据包的关键</li><li>每条路由表记录指明了：到达某个子网或主机应从路由器的哪个物理端口发送，通过此端口可到达该路径的下一个路由器的地址</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[R1]display</span> <span class="string">ip routing-table</span></span><br><span class="line"></span><br><span class="line"> <span class="attr">目的地址</span>   <span class="string">/掩码        协议      优先级      开销值              下一跳            出接口 </span></span><br><span class="line"></span><br><span class="line"> <span class="attr">Destination/Mask</span>      <span class="string">Proto     Pre        Cost               NextHop          Interface </span></span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="路由表的形成"><a href="#路由表的形成" class="headerlink" title="路由表的形成"></a>路由表的形成</h3><p><strong>路由表是在路由器中维护的路由条目的集合，路由器根据路由表做路径选择，路由表是怎么形成的呢?</strong></p><p><strong>直连网段</strong></p><ul><li>配置接口IP地址</li><li>并且接口状态up</li></ul><p><strong>非直连网段</strong></p><p><img src="/../img/img_artical/net_sec/3.3.8.png" alt="3.3.8"></p><h3 id="路由的类型"><a href="#路由的类型" class="headerlink" title="路由的类型"></a>路由的类型</h3><p><strong>依据来源的不同，路由条目可以分为三种类型</strong></p><ul><li>通过链路层协议发现的路由称为直连路由，优先级为0</li><li>通过网络管理员手动添加的路由称为静态路由，优先级为60</li><li>通过动态路由协议自动发现的路由称为动态路由，ospf路由优先级为10</li></ul><h3 id="静态路由"><a href="#静态路由" class="headerlink" title="静态路由"></a>静态路由</h3><p><strong>静态路由：</strong></p><ul><li>由管理员手动配置添加，为单向条目</li><li>通信双方的路由器都需要配置路由，否则会导致数据包有去无回</li></ul><p><img src="/../img/img_artical/net_sec/3.3.9.png" alt="3.3.9"></p><h3 id="静态路由配置命令"><a href="#静态路由配置命令" class="headerlink" title="静态路由配置命令"></a>静态路由配置命令</h3><p><strong>使用ip route-static 命令</strong></p><ul><li>指定到达的目的网络</li><li>基本格式:</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[Huawei]ip</span> <span class="string">route-static 目标网络 子网掩码 下一跳地址</span></span><br></pre></td></tr></table></figure><h2 id="配置默认路由"><a href="#配置默认路由" class="headerlink" title="配置默认路由"></a>配置默认路由</h2><h3 id="默认路由"><a href="#默认路由" class="headerlink" title="默认路由"></a>默认路由</h3><p><strong>默认路由</strong></p><ul><li>默认的目标网络为0.0.0.0&#x2F;0，可以匹配任何目标地址</li><li>只有路由表中找不到任何明细路由时，才会使用默认路由（缺省路由）</li><li>默认路由，可以手动添加，也可以让路由器动态学习</li></ul><h3 id="默认路由配置命令"><a href="#默认路由配置命令" class="headerlink" title="默认路由配置命令"></a>默认路由配置命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]ip route-static 0.0.0.0 0 下一跳地址</span><br></pre></td></tr></table></figure><h2 id="路由器转发数据包的过程"><a href="#路由器转发数据包的过程" class="headerlink" title="路由器转发数据包的过程"></a>路由器转发数据包的过程</h2><p><img src="/../img/img_artical/net_sec/3.3.10.png" alt="3.3.10"></p><p><img src="/../img/img_artical/net_sec/3.3.11.png" alt="3.3.11"></p><p><img src="/../img/img_artical/net_sec/3.3.12.png" alt="3.3.12"></p><p><img src="/../img/img_artical/net_sec/3.3.13.png" alt="3.3.13"></p><p><img src="/../img/img_artical/net_sec/3.3.14.png" alt="3.3.14"></p><p><img src="/../img/img_artical/net_sec/3.3.15.png" alt="3.3.15"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络通信原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-网络通信原理2</title>
      <link href="/posts/netexp2.html"/>
      <url>/posts/netexp2.html</url>
      
        <content type="html"><![CDATA[<h1 id="网络通信原理"><a href="#网络通信原理" class="headerlink" title="网络通信原理"></a>网络通信原理</h1><h2 id="数据链路层解析"><a href="#数据链路层解析" class="headerlink" title="数据链路层解析"></a>数据链路层解析</h2><h3 id="数据链路层概述"><a href="#数据链路层概述" class="headerlink" title="数据链路层概述"></a>数据链路层概述</h3><p><strong>位于网络层与物理层之间</strong></p><p><img src="/../img/img_artical/net_sec/3.2.1.png" alt="3.2.1"></p><p><strong>功能</strong></p><ul><li>数据链路的建立、维护与拆除</li><li>帧形成、帧传输、帧同步</li><li>帧的差错恢复和流量控制</li></ul><p><strong>协议</strong></p><ul><li>Ethernet（以太网）</li></ul><h3 id="以太网概述"><a href="#以太网概述" class="headerlink" title="以太网概述"></a>以太网概述</h3><p><strong>以太网</strong></p><ul><li>以太网（Ethernet）是一种计算机局域网技术</li><li>以太网是目前最通用，使用最广泛的局域网通信协议标准</li><li>通常使用的局域网即”以太网”</li></ul><p><strong>主机A与主机B之间的通信，可能遇见的问题</strong></p><ul><li>如何区分不同设备</li><li>如何识别设备发送的数据</li></ul><p><strong>以太网地址 (MAC)</strong></p><ul><li>MAC地址用来标识以太网上唯一的一个设备</li><li>长度：48个bit  (6个字节）</li><li>组成：24个bit的厂商标识+24个bit的网卡编号</li><li>表示方式：使用12位的16进制数表示的  如：98-FA-9B-EE-AA-04</li><li>MAC地址的第8位为0表示单播地址，为1表示组播地址（每一个物理网卡都有一个全球唯一的MAC地址）</li><li>48位都为1 表示广播地址</li></ul><p><img src="/../img/img_artical/net_sec/3.2.2.png" alt="3.2.2"></p><h3 id="Ethernet-II帧格式"><a href="#Ethernet-II帧格式" class="headerlink" title="Ethernet II帧格式"></a>Ethernet II帧格式</h3><ul><li>目的地址：接收主机的MAC地址（6个字节&#x3D;48个bit）</li><li>源地址：发送数据主机的MAC地址</li><li>类型：用来表示上一层使用的什么协议，如果是0x800 代表上层协议是 ip协议</li><li>数据：要传输的数据（包含IP包头，包含TCP包头，包含数据）</li><li>帧校验序列：数据校验，检查数据是否损坏，好的就接收，坏的就丢弃</li><li>以太网帧的数据长度范围46-1500 字节 （净重）</li><li>以太网帧的长度范围64-1518 字节 （毛重）</li></ul><p><img src="/../img/img_artical/net_sec/3.2.3.png" alt="3.2.3"></p><h2 id="理解冲突域"><a href="#理解冲突域" class="headerlink" title="理解冲突域"></a>理解冲突域</h2><h3 id="单工、半双工与全双工"><a href="#单工、半双工与全双工" class="headerlink" title="单工、半双工与全双工"></a>单工、半双工与全双工</h3><p><strong>单工</strong></p><ul><li>只有一个信道，传输方向只能是单向的</li><li>传输数据的信道只有一个，只能接收数据，不能回复数据（类似BB机）</li></ul><p><strong>半双工</strong></p><ul><li>只有一个信道，在同一时刻，只能是单向传输</li><li>传输数据的信道只有一个，可以接收数据，也可以回复数据，但是不能同时进行（类似：对讲机）</li></ul><p><strong>全双工</strong></p><ul><li>双信道，同时可以有双向数据传输</li><li>传输数据的信道有两个，接口可以在同一时刻接收数据和发送数据（类似：电话）</li></ul><p><img src="/../img/img_artical/net_sec/3.2.4.png" alt="3.2.4"></p><h3 id="冲突域概述"><a href="#冲突域概述" class="headerlink" title="冲突域概述"></a>冲突域概述</h3><p><strong>什么是冲突域</strong></p><ul><li>早期以太网是多个网络节点共享同一链路，在同一传输介质上的多个节点共享同一条链路，多个节点争用链路的使用权，这样就会发生冲突</li><li>连接在同一传输介质上的产生冲突的所有节点的集合就是一个冲突域</li></ul><p><img src="/../img/img_artical/net_sec/3.2.5.png" alt="3.2.5"></p><h3 id="分割冲突域"><a href="#分割冲突域" class="headerlink" title="分割冲突域"></a>分割冲突域</h3><p><strong>为了提高传输效率，分割冲突域</strong></p><p><img src="/../img/img_artical/net_sec/3.2.6.png" alt="3.2.6"></p><h3 id="交换机分割冲突域"><a href="#交换机分割冲突域" class="headerlink" title="交换机分割冲突域"></a>交换机分割冲突域</h3><p><strong>交换机分割冲突域</strong></p><ul><li>早期的以太网利用物理层设备HUB来构建网络，不能隔绝冲突</li><li>交换机设备取代了HUB设备组建以太网后，交换机的每个接口访问另一个接口时，都有一条专有的线路，不会产生冲突，所以交换机的每个接口，都是一个不同的冲突域，所以交换机可以分割冲突域</li><li>全双工从根本上解决了以太网的冲突问题</li></ul><h2 id="交换机工作原理"><a href="#交换机工作原理" class="headerlink" title="交换机工作原理"></a>交换机工作原理</h2><h3 id="交换机概述"><a href="#交换机概述" class="headerlink" title="交换机概述"></a>交换机概述</h3><p><strong>交换机是用来连接局域网的主要设备</strong></p><ul><li>交换机能够根据以太网帧中目标MAC地址智能的转发数据，因此交换机工作在数据链路层</li><li>交换机可以分割冲突域，实现全双工通信</li><li>交换机转发数据，主要依靠的是核心工作表：MAC地址表</li></ul><h3 id="交换机工作原理-1"><a href="#交换机工作原理-1" class="headerlink" title="交换机工作原理"></a>交换机工作原理</h3><p><strong>交换机的转发原理</strong></p><ul><li>初始状态，MAC地址表是空的</li><li>MAC地址学习</li><li>广播未知数据帧</li><li>接收方回应</li><li>交换机实现单播通信</li></ul><p><strong>学习</strong></p><ul><li>学习数据帧源MAC地址，生成MAC地址表，并将源MAC地址和对应的接口号写入MAC地址表</li></ul><p><img src="/../img/img_artical/net_sec/3.2.7.png" alt="3.2.7"></p><p><strong>广播</strong></p><ul><li>若目标MAC地址在MAC地址表中没有，交换机就向该数据帧的入接口外的其他所有接口广播未知目标MAC地址</li></ul><p><img src="/../img/img_artical/net_sec/3.2.8.png" alt="3.2.8"></p><p><img src="/../img/img_artical/net_sec/3.2.9.png" alt="3.2.9"></p><p><strong>转发</strong></p><ul><li>交换机根据MAC地址表和目标MAC地址，单播转发数据帧</li></ul><p><img src="/../img/img_artical/net_sec/3.2.10.png" alt="3.2.10"></p><p><strong>更新</strong></p><ul><li>交换机MAC地址表中的转发条目是动态学习到的，老化时间是300秒</li><li>如果发现一个帧的入接口和MAC地址表中该源MAC地址所对应的接口不同，交换机将MAC地址重新学习到新的接口</li></ul><h3 id="查看MAC地址表"><a href="#查看MAC地址表" class="headerlink" title="查看MAC地址表"></a>查看MAC地址表</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;display</span> <span class="string">mac-address  </span></span><br><span class="line"><span class="attr">MAC</span> <span class="string">address table of slot 0:</span></span><br><span class="line"><span class="attr">-------------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr">MAC</span> <span class="string">Address    VLAN/       PEVLAN CEVLAN Port            Type      LSP/LSR-ID  </span></span><br><span class="line">               <span class="attr">VSI/SI</span>                                              <span class="string">MAC-Tunnel  </span></span><br><span class="line"><span class="attr">-------------------------------------------------------------------------------</span></span><br><span class="line"> <span class="attr">5489-9802-3b6e</span> <span class="string">1           -      -      GE0/0/1          dynamic   0/-         </span></span><br><span class="line"> <span class="attr">5489-9886-7447</span> <span class="string">1           -      -      GE0/0/2          dynamic   0/-         </span></span><br><span class="line"> <span class="attr">5489-9899-2a4a</span> <span class="string">1           -      -      GE0/0/3          dynamic   0/-         </span></span><br><span class="line"><span class="attr">-------------------------------------------------------------------------------</span></span><br></pre></td></tr></table></figure><h2 id="理解广播域"><a href="#理解广播域" class="headerlink" title="理解广播域"></a>理解广播域</h2><h3 id="广播域概述"><a href="#广播域概述" class="headerlink" title="广播域概述"></a>广播域概述</h3><p><strong>定义</strong></p><ul><li>广播域指接收同一广播消息的节点的集合，比如：一个节点发送目的MAC地址为全FFFF-FFFF-FFFF的广播报文，其余能够收到这条广播报文的节点的集合，就是一个广播域</li><li>通常”一个IP网段，就是一个广播域”</li></ul><p><img src="/../img/img_artical/net_sec/3.2.11.png" alt="3.2.11"></p><h3 id="广播域过大所带来的问题"><a href="#广播域过大所带来的问题" class="headerlink" title="广播域过大所带来的问题"></a>广播域过大所带来的问题</h3><p><strong>广播域中网络节点过多所带来的问题</strong></p><ul><li>一个广播域中的网络节点越多，广播报文也必然会越多</li><li>当广播报文越多，当前广播域的带宽占用就越多，网络不可用风险增大</li><li>当广播报文越多，当前广播域中的设备资源占用高，转发数据速度慢</li><li>所以当一个广播域中的节点过多，网络的稳定性和安全性会越低</li></ul><h2 id="VLAN概述"><a href="#VLAN概述" class="headerlink" title="VLAN概述"></a>VLAN概述</h2><h3 id="VLAN概述-1"><a href="#VLAN概述-1" class="headerlink" title="VLAN概述"></a>VLAN概述</h3><p><strong>什么是VLAN</strong></p><ul><li>VirtualLAN(虚拟局域网)</li><li>将一个物理的局域网(LAN) 逻辑上划分成多个虚拟局域网 (VLAN) 的通信技术</li></ul><p><strong>为什么引入VLAN</strong></p><ul><li>交换机分割了冲突域，但是不能分割广播域</li><li>随着交换机端口数量的增多，网络中广播增多，降低了网络的效率</li><li>为了分割广播域，引入了VLAN</li></ul><p><strong>VLAN分割广播域</strong></p><p><img src="/../img/img_artical/net_sec/3.2.12.png" alt="3.2.12"></p><p><strong>VLAN的作用</strong></p><ul><li>广播控制</li><li>安全性</li><li>带宽利用</li><li>延迟</li></ul><h3 id="VLAN的划分种类"><a href="#VLAN的划分种类" class="headerlink" title="VLAN的划分种类"></a>VLAN的划分种类</h3><p><strong>基于端口划分的静态VLAN（常见）</strong></p><ul><li>通常是基于接口划分</li></ul><p><img src="/../img/img_artical/net_sec/3.2.13.png" alt="3.2.13"></p><p><strong>基于MAC地址划分的动态VLAN</strong></p><h3 id="标准以太网帧及带有vlan-标签的数据帧"><a href="#标准以太网帧及带有vlan-标签的数据帧" class="headerlink" title="标准以太网帧及带有vlan 标签的数据帧"></a>标准以太网帧及带有vlan 标签的数据帧</h3><ul><li><p>Vlan数据帧（标准）：目标地址+源地址+类型+数据+帧校验序列</p></li><li><p>VLAN数据帧：目的地址+源地址+【Vlan-Tag】+类型+数据+帧校验序列</p></li><li><p>注：vlan-tag：共4个字节，分为4个字段，其中最后一个字段VID表示vlan编号（12个bit），2的12次方是4096，所以0-4095个vlan,但是0和4095是被保留的，所以一个交换机中可以创建的vlan编号最大到4094</p></li></ul><h2 id="VLAN配置"><a href="#VLAN配置" class="headerlink" title="VLAN配置"></a>VLAN配置</h2><h3 id="PVID"><a href="#PVID" class="headerlink" title="PVID"></a>PVID</h3><p><strong>PVID: Port Default VLANID，也称缺省VLAN</strong></p><ul><li>表示接口所属的VLAN</li><li>每个接口都有一个PVID</li><li>交换机中所有接口的PVID默认都为VLAN1，但是可以手动修改</li></ul><h3 id="配置VLAN的步骤"><a href="#配置VLAN的步骤" class="headerlink" title="配置VLAN的步骤"></a>配置VLAN的步骤</h3><p><strong>创建VLAN</strong></p><ul><li>创建单个VLAN</li><li>批量创建VLAN</li></ul><p><strong>将接口加入到相应的VLAN中</strong></p><h3 id="创建VLAN"><a href="#创建VLAN" class="headerlink" title="创建VLAN"></a>创建VLAN</h3><p><strong>创建单个VLAN</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[Huawei]vlan</span> <span class="string">10    //创建VLAN10</span></span><br></pre></td></tr></table></figure><p><strong>批量创建VLAN</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[Huawei]vlan</span> <span class="string">batch 10 15 20   //创建多个不连续vlan</span></span><br><span class="line"><span class="attr">[Huawei]vlan</span> <span class="string">batch 10 to 20   //创建多个连续vlan</span></span><br></pre></td></tr></table></figure><h3 id="删除VLAN"><a href="#删除VLAN" class="headerlink" title="删除VLAN"></a>删除VLAN</h3><p><strong>删除VLAN</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[Huawei]undo</span> <span class="string">vlan 10               //删除VLAN10</span></span><br><span class="line"><span class="attr">[Huawei]undo</span> <span class="string">vlan batch 10 15 20   //删除多个不连续vlan</span></span><br><span class="line"><span class="attr">[Huawei]undo</span> <span class="string">vlan batch 10 to 20   //删除多个连续vlan</span></span><br></pre></td></tr></table></figure><h3 id="Access接口"><a href="#Access接口" class="headerlink" title="Access接口"></a>Access接口</h3><p><strong>场景</strong></p><ul><li>通常用于连接终端设备（主机、服务器）</li></ul><p><strong>特点</strong></p><ul><li>同时只能属于一个VLAN</li><li>接收数据帧时，若该帧不带vlan标签，用接口PVID数值做为标签，给数据帧打标签</li><li>接收数据帧时，若该帧带vlan标签，判断vlan标签和本接口的PVID是否一致，一致接收数据，不一致则丢弃数据</li><li>转发数据帧时，若该帧vlan标签与本接口PVID一致，则剥离标签并转发，不一致则丢弃数据</li></ul><h3 id="将接口加入VLAN"><a href="#将接口加入VLAN" class="headerlink" title="将接口加入VLAN"></a>将接口加入VLAN</h3><p><strong>接口加入VLAN</strong></p><ul><li>创建VLAN</li><li>设置接口模式成Access</li><li>将接口加入VLAN</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[Huawei]interface</span> <span class="string">g0/0/1                 //进入g0/0/1接口</span></span><br><span class="line"><span class="attr">[Huawei-G0/0/1]port</span> <span class="string">link-type access     //将接口设置为access模式</span></span><br><span class="line"><span class="attr">[Huawei-G0/0/1]port</span> <span class="string">default vlan 2       //将接口加入vlan2</span></span><br></pre></td></tr></table></figure><h3 id="验证vlan的配置"><a href="#验证vlan的配置" class="headerlink" title="验证vlan的配置"></a>验证vlan的配置</h3><p><strong>检查vlan信息</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[Huawei]display</span> <span class="string">vlan               //显示所有vlan信息</span></span><br><span class="line"><span class="attr">[Huawei]display</span> <span class="string">vlan 2             //显示指定vlan信息</span></span><br><span class="line"><span class="attr">[Huawei]display</span> <span class="string">port vlan          //显示vlan中包含的接口信息</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络通信原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-网络通信原理1</title>
      <link href="/posts/netexp1.html"/>
      <url>/posts/netexp1.html</url>
      
        <content type="html"><![CDATA[<h1 id="网络通信原理"><a href="#网络通信原理" class="headerlink" title="网络通信原理"></a>网络通信原理</h1><h2 id="协议分层"><a href="#协议分层" class="headerlink" title="协议分层"></a>协议分层</h2><h3 id="计算机网络发展"><a href="#计算机网络发展" class="headerlink" title="计算机网络发展"></a>计算机网络发展</h3><p><strong>计算机的诞生</strong></p><ul><li>1946年2月14日ENIAC诞生</li></ul><p><strong>计算机网络的诞生</strong></p><ul><li>1969年APNET诞生</li></ul><p><strong>不同网络之间的互联</strong></p><ul><li>由于网络标准不一样，无法完成互联</li></ul><h3 id="计算机网络功能"><a href="#计算机网络功能" class="headerlink" title="计算机网络功能"></a>计算机网络功能</h3><p><strong>数据通信、资源共享、增加数据可靠性、提高系统处理能力（主要功能数据通信）</strong></p><p><img src="/../img/img_artical/net_sec/3.1.1.png" alt="3.1.1"></p><h3 id="什么是协议"><a href="#什么是协议" class="headerlink" title="什么是协议"></a>什么是协议</h3><p><strong>什么是协议?</strong></p><ul><li><p>为了使数据可以在网络上从源传递到目的地，网络上所有设备需要”讲”相同的”语言”</p></li><li><p>描述网络通信”语言”规范的一组规则就是协议</p></li><li><p>例如：两个人交谈，必须使用相同的语言，如果你说汉语，他说阿拉伯语……</p></li></ul><p><strong>数据通信协议的定义</strong></p><ul><li>决定数据的格式和传输的一组规则或者一组惯例</li></ul><h3 id="为什么分层"><a href="#为什么分层" class="headerlink" title="为什么分层"></a>为什么分层</h3><p><strong>网络通信的过程很复杂</strong></p><ul><li>数据以电子信号的形式穿越介质到达正确的计算机，然后转换成最初的形式，以便接收者能够阅读</li><li>为了降低网络设计的复杂性，将协议进行了分层设计，方便网络故障的定位</li></ul><h3 id="邮局实例（传统通信）"><a href="#邮局实例（传统通信）" class="headerlink" title="邮局实例（传统通信）"></a>邮局实例（传统通信）</h3><p><img src="/../img/img_artical/net_sec/3.1.2.png" alt="3.1.2"></p><h2 id="理解OSI模型"><a href="#理解OSI模型" class="headerlink" title="理解OSI模型"></a>理解OSI模型</h2><h3 id="OSI协议模型"><a href="#OSI协议模型" class="headerlink" title="OSI协议模型"></a>OSI协议模型</h3><p><img src="/../img/img_artical/net_sec/3.1.3.png" alt="3.1.3"></p><h3 id="OSI七层模型"><a href="#OSI七层模型" class="headerlink" title="OSI七层模型"></a>OSI七层模型</h3><p><strong>OSI参考模型</strong></p><ul><li>国际标准化组织(International Standard Organization，ISO)于1984年正式颁布开放系统互连 (Open System Interconnection，OSI) 参考模型</li><li>所有的软件和硬件开发都遵循统一的OSI模型</li></ul><p><img src="/../img/img_artical/net_sec/3.1.4.png" alt="3.1.4"></p><h3 id="OSI七层的功能简介"><a href="#OSI七层的功能简介" class="headerlink" title="OSI七层的功能简介"></a>OSI七层的功能简介</h3><table><thead><tr><th align="center">层名称</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">应用层</td><td align="center">为用户提供各种服务功能，比如各种应用程序，网络服务与最终用户的一个接口</td></tr><tr><td align="center">表示层</td><td align="center">数据的表示、安全、压缩、加密等</td></tr><tr><td align="center">会话层</td><td align="center">建立、维护、终止会话，例如断点续传</td></tr><tr><td align="center">传输层</td><td align="center">定义传输数据的协议端口号，实现了程序与程序的互连，可靠与不可靠的传输,流量控制差错校验</td></tr><tr><td align="center">网络层</td><td align="center">进行逻辑地址寻址，实现不同网络之间通信，定义了IP地址，为数据的传输选择最佳路径，路由器工作在网络层</td></tr><tr><td align="center">数据链路层</td><td align="center">建立逻辑链接，进行硬件地址寻址、通过MAC地址实现数据的通信，帧包装、帧传输、帧同步，交换机工作在数据链路层</td></tr><tr><td align="center">物理层</td><td align="center">建立、维护、断开物理连接，定义了接口及介质，实现了比特流的传输</td></tr></tbody></table><h2 id="理解TCP-IP模型"><a href="#理解TCP-IP模型" class="headerlink" title="理解TCP&#x2F;IP模型"></a>理解TCP&#x2F;IP模型</h2><h3 id="OSI模型与TCP-IP模型"><a href="#OSI模型与TCP-IP模型" class="headerlink" title="OSI模型与TCP&#x2F;IP模型"></a>OSI模型与TCP&#x2F;IP模型</h3><ul><li>OSI模型，仅仅是ISO 提出的一个”参考”标准</li><li>实际的网络中更多使用TCP&#x2F;IP 5层模型，但是实现的功能是相同的</li></ul><p><img src="/../img/img_artical/net_sec/3.1.5.png" alt="3.1.5"></p><h3 id="TCP-IP协议族的组成"><a href="#TCP-IP协议族的组成" class="headerlink" title="TCP&#x2F;IP协议族的组成"></a>TCP&#x2F;IP协议族的组成</h3><p><strong>TCP&#x2F;IP是一系列协议的集合，所以严格称呼应是TCP&#x2F;IP协议族</strong></p><p><img src="/../img/img_artical/net_sec/3.1.6.png" alt="3.1.6"></p><p><strong>网络层常见协议：</strong> </p><ul><li><p>IP：互联网协议，定义了IP地址</p></li><li><p>ICMP：网络控制消息协议，验证和测试网络连通性</p></li><li><p>ARP：地址解析协议，将IP地址解析成MAC地址</p></li><li><p>OSPF：开放式最短路径优先，动态路由协议</p></li></ul><p><strong>传输层常见协议：</strong></p><ul><li><p>TCP：传输控制协议—安全可靠，速度慢</p></li><li><p>UDP： 用户数据报协议—不可靠，速度快</p></li></ul><p><strong>应用层常见协议：</strong></p><ul><li><p>HTTP：超文本传输协议—TCP 80端口</p></li><li><p>FTP：文件传输协议—TCP 20  和21</p></li><li><p>TFTP：简单文件传输协议—UDP  69</p></li><li><p>DHCP：动态主机配置协议—UDP 67  68</p></li><li><p>Telnet：远程管理协议—TCP 23</p></li><li><p>RDP：远程桌面协议—TCP 3389</p></li><li><p>DNS：域名解析—TCP或UDP 53</p></li><li><p>SMTP：简单邮件传输协议—TCP 25</p></li><li><p>SNMP：网络管理协议—UDP 161</p></li></ul><h3 id="各层PDU"><a href="#各层PDU" class="headerlink" title="各层PDU"></a>各层PDU</h3><p><strong>PDU：Protocol Data Unit，协议数据单元，即协议的数据包</strong></p><p><img src="/../img/img_artical/net_sec/3.1.7.png" alt="3.1.7"></p><ul><li><p>传输层 数据段 segment</p></li><li><p>网络层 数据包 packet</p></li><li><p>数据链路层 数据帧 frame</p></li><li><p>物理层  比特流 bit</p></li></ul><h3 id="设备与层的对应关系"><a href="#设备与层的对应关系" class="headerlink" title="设备与层的对应关系"></a>设备与层的对应关系</h3><p><img src="/../img/img_artical/net_sec/3.1.8.png" alt="3.1.8"></p><h2 id="数据通信流程"><a href="#数据通信流程" class="headerlink" title="数据通信流程"></a>数据通信流程</h2><h3 id="数据通信"><a href="#数据通信" class="headerlink" title="数据通信"></a>数据通信</h3><p><strong>所谓的设备之间的通信，指的是设备之间能够互相传输数据</strong></p><p><strong>产生数据</strong></p><ul><li>即数据封装，指的是数据通过应用层产生以后，发送到第一层，每经过一层都添加一个协议头部的过程</li></ul><p><strong>传输数据</strong></p><ul><li>即网络传输，数据在由不同的网络设备组成的互联网中传输的过程，主要是依靠交换机和路由器实现数据在不同设备之间的转发</li></ul><p><strong>接收数据</strong></p><ul><li>即数据解封装，指的是数据被设备通过网线接收以后形成数据帧，然后一层一层分析头部，然后传递给上一层处理，一直到应用层的过程</li><li>也可以说是：不断的分析并删除每层的协议头部的过程</li></ul><p><strong>设备之间的数据传输，一定是双向的，每个方向都分为3个阶段</strong></p><ul><li>产生数据，也称之为”数据封装”</li><li>传输数据，也称之为”网络传输”</li><li>接收数据，也称之为”数据解封装”</li></ul><h3 id="数据封装过程"><a href="#数据封装过程" class="headerlink" title="数据封装过程"></a>数据封装过程</h3><p><strong>应用层在产生数据后，从应用层到物理层，每经过一层，都会加上每一层的头部信息，传输层封装TCP头部， 网络层封装IP头部，数据链路层封装MAC头部和尾部</strong></p><p><img src="/../img/img_artical/net_sec/3.1.9.png" alt="3.1.9"></p><h3 id="数据解封装过程"><a href="#数据解封装过程" class="headerlink" title="数据解封装过程"></a>数据解封装过程</h3><p><strong>数据从下往上的过程，接收数据后，从物理层到应用层，每达到一层，会把相应的头部信息拆除，数据链路层拆除MAC头部和尾部，网络层拆除IP头部，传输层拆除TCP头部</strong></p><p><img src="/../img/img_artical/net_sec/3.1.10.png" alt="3.1.10"></p><h2 id="物理层解析"><a href="#物理层解析" class="headerlink" title="物理层解析"></a>物理层解析</h2><h3 id="物理层概述"><a href="#物理层概述" class="headerlink" title="物理层概述"></a>物理层概述</h3><p><strong>物理层是TCP&#x2F;IP模型的最底层</strong></p><p><strong>物理层为数据传输提供稳定的物理连接</strong></p><h3 id="物理层功能"><a href="#物理层功能" class="headerlink" title="物理层功能"></a>物理层功能</h3><ul><li>定义设备的物理连接的标准和特性，比如接口形状，大小</li><li>定义电气特性，高低电压、传输速率和传输距离</li><li>构建数据通道，通过物理接口和传输介质来进行数据传输</li><li>物理层核心就是“信号和介质“</li></ul><h3 id="物理层传输介质"><a href="#物理层传输介质" class="headerlink" title="物理层传输介质"></a>物理层传输介质</h3><p><strong>有线介质</strong></p><ul><li>双绞线</li><li>光纤</li></ul><p><strong>无线介质</strong></p><ul><li>微波</li><li>激光</li><li>红外线</li></ul><p><strong>超五类线缆</strong></p><ul><li>局域网环境，最常见线缆</li><li>线缆外表有清晰“米标”</li><li>适用于100Mbps网络</li></ul><p><strong>6类线缆</strong></p><ul><li>增加十字骨架，抗干扰</li><li>适用于1000Mbps网络</li></ul><p><strong>7类和8类线缆</strong></p><ul><li>7类速率10Gbps</li><li>8类速率40Gbps</li></ul><p><strong>水晶头</strong></p><p><img src="/../img/img_artical/net_sec/3.1.11.png" alt="3.1.11"></p><p><strong>布线套装</strong></p><p><img src="/../img/img_artical/net_sec/3.1.12.png" alt="3.1.12"></p><p><strong>光纤</strong></p><ul><li>光纤按光在其中的传输模式可分为单模和多模</li></ul><p><strong>单模光纤</strong></p><ul><li>可支持1G~40Gb&#x2F;100Gb，距离200KM</li><li>适合用于长距离传输、可用于室内和室外</li></ul><p><strong>多模光纤</strong></p><ul><li>可支持1G~40Gb&#x2F;100Gb高速网络</li><li>适合用于短距离传输，通常用于室内</li></ul><p><strong>布线套装</strong></p><p><img src="/../img/img_artical/net_sec/3.1.13.png" alt="3.1.13"></p><h2 id="网线制作"><a href="#网线制作" class="headerlink" title="网线制作"></a>网线制作</h2><h3 id="制作双绞线"><a href="#制作双绞线" class="headerlink" title="制作双绞线"></a>制作双绞线</h3><p><strong>剥线</strong></p><ul><li>将双绞线的一端插入网线的剥线口 (末端离刀口长度约3-5厘米)，握住网线缓慢旋转一圈，去掉外部的套层，可看到相互缠绕的8根芯线</li><li>注意:不要割断金属芯线</li></ul><p><strong>理线</strong></p><ul><li>将裸露的8根双绞线分开，按照标准线序捋直排列好，并用网线钳将末端剪齐，保留1.2厘米左右</li></ul><p><img src="/../img/img_artical/net_sec/3.1.14.png" alt="3.1.14"></p><p><strong>排列好的每条芯线分别对应RJ-45水晶头的1-8针脚</strong></p><ul><li>T568B(白橙、橙、白绿、蓝、白蓝、绿、白棕、棕)</li><li>T568A(白绿、绿、白橙、蓝、白蓝、橙、白棕、棕)</li></ul><p><img src="/../img/img_artical/net_sec/3.1.15.png" alt="3.1.15"></p><p><strong>压线头</strong></p><ul><li>将整理好的双绞线芯线平稳捏住 (末端保持整齐)，插入到RJ-45水晶接头中(塑料卡扣朝下，开口朝向网线)确保8根芯线都顶到最里端的铜触片位置</li></ul><p><img src="/../img/img_artical/net_sec/3.1.16.png" alt="3.1.16"></p><p><strong>压线</strong></p><ul><li>将接好线的水晶头放到网线钳的压线口内 (注意要捏住网线，往里顶紧)，然后握住网线钳使劲压紧(线与线头不能有松动)，以确保水晶头的铜触片嵌入双绞线的芯线</li></ul><p><img src="/../img/img_artical/net_sec/3.1.17.png" alt="3.1.17"></p><p><strong>制作双绞线的另一端</strong></p><ul><li>依次剥线、理线、压线头，操作与前面一样</li><li>两端都压制好以后，一根网线就制作完工</li></ul><h3 id="测试双绞线"><a href="#测试双绞线" class="headerlink" title="测试双绞线"></a>测试双绞线</h3><p><strong>测试双绞线的连通性</strong></p><ul><li>将做好的双绞线两端分别插入测试仪的RJ-45接口，打开测试仪的电源开关，观察指示灯以判断网线连通性</li></ul><p><img src="/../img/img_artical/net_sec/3.1.18.png" alt="3.1.18"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络通信原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-Windows系统安全6</title>
      <link href="/posts/winsec6.html"/>
      <url>/posts/winsec6.html</url>
      
        <content type="html"><![CDATA[<h1 id="Window系统安全"><a href="#Window系统安全" class="headerlink" title="Window系统安全"></a>Window系统安全</h1><h2 id="PE急救工具盘"><a href="#PE急救工具盘" class="headerlink" title="PE急救工具盘"></a>PE急救工具盘</h2><h3 id="什么是PE工具箱"><a href="#什么是PE工具箱" class="headerlink" title="什么是PE工具箱"></a>什么是PE工具箱</h3><p><strong>基于WindowsPE制作，包含大量工具软件的U盘&#x2F;光盘系统</strong></p><ul><li>磁盘分区、分区调整、分区格式化</li><li>系统安装、系统备份和还原</li><li>修改密码、数据恢复</li></ul><p><strong>注: 网上的PE工具箱大同小异，以微PE为例</strong></p><h3 id="制作WinPE工具箱"><a href="#制作WinPE工具箱" class="headerlink" title="制作WinPE工具箱"></a>制作WinPE工具箱</h3><p><strong>制作</strong></p><ul><li>安装PE到U盘</li><li>安装PE到移动硬盘</li><li>生成可启动ISO</li></ul><p><img src="/../img/img_artical/net_sec/2.6.1.png" alt="2.6.1"></p><h2 id="重置Win密码"><a href="#重置Win密码" class="headerlink" title="重置Win密码"></a>重置Win密码</h2><h3 id="清除Windows登录密码"><a href="#清除Windows登录密码" class="headerlink" title="清除Windows登录密码"></a>清除Windows登录密码</h3><p><strong>如果忘记Windows开机密码</strong></p><ul><li>win7&#x2F;8&#x2F;10&#x2F;2012&#x2F;2016&#x2F;2019等全系列</li></ul><p><strong>原理</strong></p><ul><li>PE启动，修改密码文件C: Windows System32 config SAM</li></ul><p><strong>操作</strong></p><ul><li>NTPWEdit</li><li>清空密码&#x2F;设置新密码</li></ul><p><img src="/../img/img_artical/net_sec/2.6.2.png" alt="2.6.2"></p><h2 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h2><h3 id="分区大小调整"><a href="#分区大小调整" class="headerlink" title="分区大小调整"></a>分区大小调整</h3><p><strong>Win磁盘管理的压缩卷、扩展卷只能对“右侧”操作</strong></p><ul><li>压缩只能“释放”到右侧</li><li>基本磁盘扩展只能“合并”右侧空间</li></ul><p><strong>傲梅分区助手、DiskGenius</strong></p><ul><li>快速分区</li><li>自由调整分区大小</li></ul><p><img src="/../img/img_artical/net_sec/2.6.3.png" alt="2.6.3"></p><h2 id="系统备份与恢复"><a href="#系统备份与恢复" class="headerlink" title="系统备份与恢复"></a>系统备份与恢复</h2><h3 id="系统备份"><a href="#系统备份" class="headerlink" title="系统备份"></a>系统备份</h3><p><strong>WIM是英文Microsoft Windowslmaging Format(WIM)的简称，它是Windows基于文件的映像格式</strong></p><ul><li>一个文件中可以存储多个映像</li><li>可以离线维护映像</li><li>支持压缩</li></ul><p><strong>CGI备份还原工具</strong></p><ul><li>创建WIM备份</li></ul><p><img src="/../img/img_artical/net_sec/2.6.4.png" alt="2.6.4"></p><h3 id="系统恢复"><a href="#系统恢复" class="headerlink" title="系统恢复"></a>系统恢复</h3><p><strong>从WIM文件恢复</strong></p><p><img src="/../img/img_artical/net_sec/2.6.5.png" alt="2.6.5"></p><h2 id="制作U启动盘"><a href="#制作U启动盘" class="headerlink" title="制作U启动盘"></a>制作U启动盘</h2><h3 id="U启动程序"><a href="#U启动程序" class="headerlink" title="U启动程序"></a>U启动程序</h3><p><strong>下载制作U启程序</strong></p><ul><li>Ventov是一个制作可启动U盘的开源工具，只需要把ISO等类型的文件拷贝到U盘里面就可以启动了</li><li>同时支持x86LegacyBIOS、x86_64UEFI模式</li><li>支持Windows、Linux等操作系统</li></ul><h3 id="运行U启程序"><a href="#运行U启程序" class="headerlink" title="运行U启程序"></a>运行U启程序</h3><p><strong>制作U盘启动盘</strong></p><ul><li>确认电脑已插上U盘后，并且事先备份U盘数据内容</li><li>双击“Ventoy2Disk”运行</li></ul><h3 id="准备ISO镜像文件"><a href="#准备ISO镜像文件" class="headerlink" title="准备ISO镜像文件"></a>准备ISO镜像文件</h3><p><strong>复制操作系统ISO镜像文件到U盘</strong></p><p><img src="/../img/img_artical/net_sec/2.6.6.png" alt="2.6.6"></p><h3 id="引导方式"><a href="#引导方式" class="headerlink" title="引导方式"></a>引导方式</h3><p><strong>引导方式</strong></p><ul><li>BIOS，基本输入输出系统，Windows7及以前操作系统</li><li>UEFI，统一的可扩展固件接口，Windows8及以后操作系统</li></ul><p><strong>设置的方法</strong></p><ul><li>开机后根据提示操作，通常为 Del键或F2键</li></ul><h3 id="物理机进入“引导菜单”"><a href="#物理机进入“引导菜单”" class="headerlink" title="物理机进入“引导菜单”"></a>物理机进入“引导菜单”</h3><p><strong>插入U盘</strong></p><p><strong>进入”引导菜单”</strong></p><ul><li>根据提示按F12键进入</li><li>注:不同电脑按键可能不一样</li></ul><h3 id="物理机U盘启动计算机"><a href="#物理机U盘启动计算机" class="headerlink" title="物理机U盘启动计算机"></a>物理机U盘启动计算机</h3><p><strong>选择U盘引导</strong></p><ul><li>可以根据U盘的型号或容量判断</li></ul><p><strong>在Ventoy界面选中Windows 10ISO镜像</strong></p><p><img src="/../img/img_artical/net_sec/2.6.7.png" alt="2.6.7"></p><p><strong>出现”Pressany key to boot…”时，按回车或空格键</strong></p><p><strong>进入安装界面</strong></p><p><img src="/../img/img_artical/net_sec/2.6.8.png" alt="2.6.8"></p><h2 id="U启安装Win10系统"><a href="#U启安装Win10系统" class="headerlink" title="U启安装Win10系统"></a>U启安装Win10系统</h2><h3 id="虚拟机进入“引导菜单”"><a href="#虚拟机进入“引导菜单”" class="headerlink" title="虚拟机进入“引导菜单”"></a>虚拟机进入“引导菜单”</h3><p><strong>打开Windows10虚拟机</strong></p><p><strong>插入U盘</strong></p><p><img src="/../img/img_artical/net_sec/2.6.9.png" alt="2.6.9"></p><h3 id="虚拟机U盘启动计算机"><a href="#虚拟机U盘启动计算机" class="headerlink" title="虚拟机U盘启动计算机"></a>虚拟机U盘启动计算机</h3><p><strong>重新启动虚拟机，进入引导菜单</strong></p><ul><li>按Ctrl+Alt+Insert键重启</li><li>重启后，不停按ESC键</li></ul><p><strong>注:不要””关机再开机”的方式启动</strong></p><p><img src="/../img/img_artical/net_sec/2.6.10.png" alt="2.6.10"></p><p><strong>在Ventoy界面选中Windows 10ISO镜像</strong></p><p><img src="/../img/img_artical/net_sec/2.6.11.png" alt="2.6.11"></p><p><strong>进入安装界面</strong></p><p><img src="/../img/img_artical/net_sec/2.6.12.png" alt="2.6.12"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows系统安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-Windows系统安全5</title>
      <link href="/posts/winsec5.html"/>
      <url>/posts/winsec5.html</url>
      
        <content type="html"><![CDATA[<h1 id="Window系统安全"><a href="#Window系统安全" class="headerlink" title="Window系统安全"></a>Window系统安全</h1><h2 id="活动目录与域概述"><a href="#活动目录与域概述" class="headerlink" title="活动目录与域概述"></a>活动目录与域概述</h2><h3 id="域和域控制器"><a href="#域和域控制器" class="headerlink" title="域和域控制器"></a>域和域控制器</h3><p><strong>工作组</strong></p><ul><li>特点：地位平等、管理分散，没有实现集中管理</li><li>默认工作组名：WORKGROUP</li><li>工作组环境下创建的用户称为本地用户，本地用户是本地创建、本地存储、本地登录且只能登录本地一台计算机</li></ul><p><strong>域（Domain）</strong></p><ul><li>集中管理网络中多台计算机的一种逻辑模式</li><li>有别于工作组的对等式管理</li><li>是组织与存储资源的核心管理单元</li></ul><p><strong>域控制器（Domain Controller）</strong></p><ul><li>每个域中至少有一台域控制器</li><li>集中存放整个域的用户账号和安全数据库</li></ul><h3 id="活动目录的概念"><a href="#活动目录的概念" class="headerlink" title="活动目录的概念"></a>活动目录的概念</h3><p><strong>活动目录（Active Directory）</strong></p><ul><li>Windows网络中的目录服务</li><li>提供了存储网络对象信息并使网络用户使用这些数据的方法</li></ul><p><strong>活动目录特点</strong></p><ul><li>集中管理、便捷的网络资源（用户&#x2F;组账号、共享文件夹、打印机）访问</li><li>可扩展性</li></ul><h2 id="创建AD域网络"><a href="#创建AD域网络" class="headerlink" title="创建AD域网络"></a>创建AD域网络</h2><h3 id="升级域控的条件"><a href="#升级域控的条件" class="headerlink" title="升级域控的条件"></a>升级域控的条件</h3><ul><li>安装者必须具有本地管理员权限</li><li>操作系统版本必须为Windows Server版</li><li>本地磁盘至少有一个分区为NTFS文件系统</li><li>静态TCP&#x2F;IP设置（IP地址、子网掩码等）</li><li>有相应的DNS服务器支持</li><li>有足够的可用磁盘空间</li></ul><h3 id="安装第一台域控制器"><a href="#安装第一台域控制器" class="headerlink" title="安装第一台域控制器"></a>安装第一台域控制器</h3><p><strong>推荐步骤</strong></p><ul><li>设置网络环境和主机名</li><li>Active Directory域服务</li><li>提升为域控制器</li><li>在新林中新建域</li><li>林功能级别</li><li>设置目录服务还原模式的Administrator密码</li><li>安装</li></ul><h3 id="设置网络参数和主机名"><a href="#设置网络参数和主机名" class="headerlink" title="设置网络参数和主机名"></a>设置网络参数和主机名</h3><p><strong>配置域控制器网络环境</strong></p><p><img src="/../img/img_artical/net_sec/2.5.1.png" alt="2.5.1"></p><h3 id="添加活动目录"><a href="#添加活动目录" class="headerlink" title="添加活动目录"></a>添加活动目录</h3><p><strong>添加Active Directory域服务</strong></p><p><img src="/../img/img_artical/net_sec/2.5.2.png" alt="2.5.2"></p><h3 id="活动目录安装向导"><a href="#活动目录安装向导" class="headerlink" title="活动目录安装向导"></a>活动目录安装向导</h3><p><strong>添加新林、输入域名</strong></p><p><img src="/../img/img_artical/net_sec/2.5.3.png" alt="2.5.3"></p><p><strong>林级别及目录服务还原密码</strong></p><p><img src="/../img/img_artical/net_sec/2.5.4.png" alt="2.5.4"></p><p><strong>安装</strong></p><p><img src="/../img/img_artical/net_sec/2.5.5.png" alt="2.5.5"></p><h2 id="加入域网络"><a href="#加入域网络" class="headerlink" title="加入域网络"></a>加入域网络</h2><h3 id="客户计算机加入域"><a href="#客户计算机加入域" class="headerlink" title="客户计算机加入域"></a>客户计算机加入域</h3><p><strong>配置客户端网络环境</strong></p><p><img src="/../img/img_artical/net_sec/2.5.6.png" alt="2.5.6"></p><p><strong>设置 “计算机名&#x2F;域更改”</strong></p><p><img src="/../img/img_artical/net_sec/2.5.7.png" alt="2.5.7"></p><p><strong>输入域用户账户名</strong></p><p><img src="/../img/img_artical/net_sec/2.5.8.png" alt="2.5.8"></p><p><strong>确认域成员身份</strong></p><p><img src="/../img/img_artical/net_sec/2.5.9.png" alt="2.5.9"></p><h2 id="域用户管理"><a href="#域用户管理" class="headerlink" title="域用户管理"></a>域用户管理</h2><h3 id="创建域用户账户"><a href="#创建域用户账户" class="headerlink" title="创建域用户账户"></a>创建域用户账户</h3><p><strong>域用户账户存储在活动目录数据库中</strong></p><p><strong>创建域用户的工具</strong></p><p><img src="/../img/img_artical/net_sec/2.5.10.png" alt="2.5.10"></p><p><strong>显示名</strong></p><ul><li>在同一组织单位（OU）内应唯一</li></ul><p><strong>用户登录名</strong></p><ul><li>在整个域唯一</li><li>最长20字符</li></ul><h3 id="配置域用户账户属性"><a href="#配置域用户账户属性" class="headerlink" title="配置域用户账户属性"></a>配置域用户账户属性</h3><ul><li>登录时间</li><li>登录到</li><li>账户过期</li></ul><p><img src="/../img/img_artical/net_sec/2.5.11.png" alt="2.5.11"></p><p><strong>登录时间</strong></p><ul><li>默认任意时间都能登录</li></ul><p><strong>登录到</strong></p><ul><li>可限制登录的计算机</li></ul><p><img src="/../img/img_artical/net_sec/2.5.12.png" alt="2.5.12"></p><h2 id="OU与组策略"><a href="#OU与组策略" class="headerlink" title="OU与组策略"></a>OU与组策略</h2><h3 id="组织单元（OU）"><a href="#组织单元（OU）" class="headerlink" title="组织单元（OU）"></a>组织单元（OU）</h3><p><strong>概念</strong></p><ul><li>容器：有效地组织活动目录对象</li></ul><p><strong>设计方式</strong></p><ul><li>基于部门的OU</li><li>基于地理位置的OU</li><li>基于对象类型的OU</li><li>OU的设计也可以是混合的</li></ul><h3 id="组策略的作用"><a href="#组策略的作用" class="headerlink" title="组策略的作用"></a>组策略的作用</h3><p><strong>组策略（一组策略的集合）</strong></p><ul><li>可以统一修改系统、设置程序</li><li>调整桌面环境、安全设置、自动执行脚本、软件分发</li></ul><p><strong>使用组策略可以：</strong></p><ul><li>对整个域设置组策略，可影响所有成员计算机和域用户的工作环境</li><li>对OU设置组策略，可影响该OU下的所有计算机和域用户的工作环境</li><li>降低布置用户和计算机环境的总费用，方便推行公司计算机使用规范及安全策略</li></ul><h3 id="组策略设置对象"><a href="#组策略设置对象" class="headerlink" title="组策略设置对象"></a>组策略设置对象</h3><p><strong>组策略的具体设置保存在GPO中</strong></p><p><strong>默认的2个GPO</strong></p><ul><li>默认域策略（Default Domain Policy）</li><li>默认域控制器策略（Default Domain Controller Policy）</li></ul><h3 id="计算机配置与用户配置"><a href="#计算机配置与用户配置" class="headerlink" title="计算机配置与用户配置"></a>计算机配置与用户配置</h3><p><img src="/../img/img_artical/net_sec/2.5.13.png" alt="2.5.13"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows系统安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-Windows系统安全4</title>
      <link href="/posts/winsec4.html"/>
      <url>/posts/winsec4.html</url>
      
        <content type="html"><![CDATA[<h1 id="Window系统安全"><a href="#Window系统安全" class="headerlink" title="Window系统安全"></a>Window系统安全</h1><h2 id="DNS概述"><a href="#DNS概述" class="headerlink" title="DNS概述"></a>DNS概述</h2><h3 id="什么是DNS"><a href="#什么是DNS" class="headerlink" title="什么是DNS"></a>什么是DNS</h3><p><strong>什么是DNS</strong></p><ul><li>DNS域名解析系统</li><li>TCP端口53</li></ul><p><strong>为什么需要DNS系统</strong></p><ul><li><a href="http://www.baidu.com与119.75.217.56，哪个更好记？">www.baidu.com与119.75.217.56，哪个更好记？</a></li><li>互联网中的114查号台&#x2F;导航员</li></ul><p><strong>DNS（Domain Name System，域名系统）的功能</strong></p><ul><li>正向解析：根据注册的域名查找对应的IP地址，名字  –&gt;  IP</li><li>反向解析：根据IP地址查找对应的注册域名（相对不常用），IP  –&gt;  名字</li></ul><p><strong>域名解决方案的演进</strong></p><ul><li>早期（本地，hosts文件）C:\Windows\System32\drivers\etc\hosts(主机名解析文件)</li><li>现在（DNS服务器，分布式解析库）</li></ul><p><img src="/../img/img_artical/net_sec/2.4.1.png" alt="2.4.1"></p><h3 id="域名空间结构"><a href="#域名空间结构" class="headerlink" title="域名空间结构"></a>域名空间结构</h3><p><strong>层次化命名</strong></p><p><img src="/../img/img_artical/net_sec/2.4.2.png" alt="2.4.2"></p><p><strong>常见顶级域名</strong></p><ul><li>组织域、国家&#x2F;地区域名</li></ul><table><thead><tr><th align="center">组织域</th><th align="center">含义</th></tr></thead><tbody><tr><td align="center">gov</td><td align="center">政府机构</td></tr><tr><td align="center">com</td><td align="center">商业机构</td></tr><tr><td align="center">edu</td><td align="center">教育机构</td></tr><tr><td align="center">org</td><td align="center">民间团体组织</td></tr><tr><td align="center">net</td><td align="center">网络服务机构</td></tr><tr><td align="center">mil</td><td align="center">军事部门</td></tr><tr><td align="center">arpa</td><td align="center">反向域</td></tr></tbody></table><table><thead><tr><th align="center">国家&#x2F;地区域</th><th align="center">含义</th></tr></thead><tbody><tr><td align="center">cn</td><td align="center">中国</td></tr><tr><td align="center">hk</td><td align="center">中国香港</td></tr><tr><td align="center">tw</td><td align="center">中国台湾</td></tr><tr><td align="center">us</td><td align="center">美国</td></tr><tr><td align="center">ru</td><td align="center">俄罗斯</td></tr><tr><td align="center">…</td><td align="center">其他</td></tr></tbody></table><h2 id="DNS原理及配置"><a href="#DNS原理及配置" class="headerlink" title="DNS原理及配置"></a>DNS原理及配置</h2><h3 id="查询过程及方式"><a href="#查询过程及方式" class="headerlink" title="查询过程及方式"></a>查询过程及方式</h3><p><strong>客户端  &#x3D;&gt;  缓存DNS  &#x3D;&gt;  权威DNS</strong></p><h3 id="DNS的查询方法"><a href="#DNS的查询方法" class="headerlink" title="DNS的查询方法"></a>DNS的查询方法</h3><p><strong>从查询方式分类</strong></p><ul><li>递归查询</li><li>迭代查询</li></ul><p><strong>从查询内容分类</strong></p><ul><li>正向查询：由域名查找IP地址</li><li>反向查询：由IP地址查找域名</li></ul><h2 id="安装DNS服务"><a href="#安装DNS服务" class="headerlink" title="安装DNS服务"></a>安装DNS服务</h2><h3 id="配置DNS服务"><a href="#配置DNS服务" class="headerlink" title="配置DNS服务"></a>配置DNS服务</h3><p><strong>提供DNS服务的必要条件</strong></p><ul><li>有固定的IP地址</li><li>安装并启动DNS服务</li><li>有区域文件，配置转发器，或者配置根提示</li></ul><h3 id="安装DNS服务器角色"><a href="#安装DNS服务器角色" class="headerlink" title="安装DNS服务器角色"></a>安装DNS服务器角色</h3><ul><li><p>确认服务器已设置固定IP地址（如192.168.10.10)</p></li><li><p>添加  DNS服务器  角色</p></li></ul><p><img src="/../img/img_artical/net_sec/2.4.3.png" alt="2.4.3"></p><h3 id="创建DNS区域"><a href="#创建DNS区域" class="headerlink" title="创建DNS区域"></a>创建DNS区域</h3><p><strong>使用DNS管理器</strong></p><ul><li>Win+R运行dnsmgmt.msc</li><li>新建区域</li></ul><h2 id="配置DNS域名解析"><a href="#配置DNS域名解析" class="headerlink" title="配置DNS域名解析"></a>配置DNS域名解析</h2><h3 id="配置DNS区域解析"><a href="#配置DNS区域解析" class="headerlink" title="配置DNS区域解析"></a>配置DNS区域解析</h3><p><strong>常见资源记录类别</strong></p><table><thead><tr><th align="center">资源记录</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">A（主机）</td><td align="center">此区域中某个“FQDN –&gt; IP地址”的记录</td></tr><tr><td align="center">PTR（指针）</td><td align="center">此区域中某个“IP地址 –&gt; FQDN”的记录</td></tr><tr><td align="center">CNAME（别名）</td><td align="center">将多个名字映射到同一个站点</td></tr></tbody></table><h3 id="DNS正向解析"><a href="#DNS正向解析" class="headerlink" title="DNS正向解析"></a>DNS正向解析</h3><p><strong>配置正向解析</strong></p><ul><li>右击区域名添加创建A记录</li><li>添加A记录内容“www –&gt;  192.168.10.10”</li></ul><h3 id="DNS功能测试"><a href="#DNS功能测试" class="headerlink" title="DNS功能测试"></a>DNS功能测试</h3><p><strong>准备网络环境</strong></p><ul><li>客户端与DNS服务器网络连通</li><li>将客户端首选DNS设为企业自建的DNS</li><li>使用nslookup查询并观察结果</li></ul><p><strong>域名解析测试</strong></p><ul><li>使用nslookup  域名（查询并观察结果）</li></ul><h2 id="IIS概述"><a href="#IIS概述" class="headerlink" title="IIS概述"></a>IIS概述</h2><h3 id="Web服务"><a href="#Web服务" class="headerlink" title="Web服务"></a>Web服务</h3><p><strong>Web服务概述</strong></p><ul><li>服务端：支持HTTP协议的网页提供程序</li><li>浏览器&#x2F;客户端：下载并按标记规范显示网页的浏览器程序</li><li>Http超文本传输协议，端口80</li></ul><p><img src="/../img/img_artical/net_sec/2.4.4.png" alt="2.4.4"></p><h3 id="如何获取网页资源"><a href="#如何获取网页资源" class="headerlink" title="如何获取网页资源"></a>如何获取网页资源</h3><p><strong>URL网页</strong></p><ul><li>Uniform Resource Locator，统一资源定位器</li><li>资源类别：&#x2F;&#x2F;服务器地址&#x2F;目录地址&#x2F;文件名，比如<ul><li><a href="https://www.baidu.com/">https://www.baidu.com/</a></li><li><a href="https://www.bilibili.com/video/BV1Tg4y1C7Sq">https://www.bilibili.com/video/BV1Tg4y1C7Sq</a></li></ul></li></ul><h3 id="常见Web服务端软件"><a href="#常见Web服务端软件" class="headerlink" title="常见Web服务端软件"></a>常见Web服务端软件</h3><ul><li>Microsoft IIS</li><li>Apache HTTP Server</li><li>Nginx</li></ul><h3 id="什么是IIS"><a href="#什么是IIS" class="headerlink" title="什么是IIS"></a>什么是IIS</h3><p><strong>Internet Information Service，互联网信息服务</strong></p><ul><li>微软提供的Web服务产品，集成在Windows操作系统中</li><li>可以通过图形管理工具配置Web&#x2F;FTP服务</li></ul><h2 id="创建WEB站点"><a href="#创建WEB站点" class="headerlink" title="创建WEB站点"></a>创建WEB站点</h2><h3 id="安装Web服务器角色"><a href="#安装Web服务器角色" class="headerlink" title="安装Web服务器角色"></a>安装Web服务器角色</h3><p><strong>服务器管理器</strong></p><ul><li>添加角色和功能</li><li>Web服务器（IIS）</li></ul><p><img src="/../img/img_artical/net_sec/2.4.5.png" alt="2.4.5"></p><h3 id="准备网页文件"><a href="#准备网页文件" class="headerlink" title="准备网页文件"></a>准备网页文件</h3><p>为网站准备网页资料</p><p><img src="/../img/img_artical/net_sec/2.4.6.png" alt="2.4.6"></p><h3 id="配置Web站点"><a href="#配置Web站点" class="headerlink" title="配置Web站点"></a>配置Web站点</h3><p><strong>使用IIS管理器</strong></p><ul><li>Win + R运行inetmgr即可</li></ul><p><img src="/../img/img_artical/net_sec/2.4.7.png" alt="2.4.7"></p><p><strong>创建Web站点</strong></p><ul><li>右击网站–添加网站</li><li>输入网站名，选择物理路径</li></ul><p><img src="/../img/img_artical/net_sec/2.4.8.png" alt="2.4.8"></p><p><strong>配置默认文档的优先级</strong></p><ul><li>即访问此网站目录时，IIS提供给浏览器的第一个文档</li><li>大多数网站将index.html作为首页</li></ul><h3 id="客户端浏览"><a href="#客户端浏览" class="headerlink" title="客户端浏览"></a>客户端浏览</h3><p><strong>http:&#x2F;&#x2F;服务器IP地址</strong></p><p><img src="/../img/img_artical/net_sec/2.4.9.png" alt="2.4.9"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows系统安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-Windows系统安全3</title>
      <link href="/posts/winsec3.html"/>
      <url>/posts/winsec3.html</url>
      
        <content type="html"><![CDATA[<h1 id="Window系统安全"><a href="#Window系统安全" class="headerlink" title="Window系统安全"></a>Window系统安全</h1><h2 id="磁盘分区管理"><a href="#磁盘分区管理" class="headerlink" title="磁盘分区管理"></a>磁盘分区管理</h2><h3 id="磁盘的分区管理"><a href="#磁盘的分区管理" class="headerlink" title="磁盘的分区管理"></a>磁盘的分区管理</h3><p><strong>Win+R运行，执行  diskmgmt.msc  打开磁盘管理</strong></p><ul><li><p>右击分区  &#x3D;&gt;  格式化</p></li><li><p>格式化将清除卷上的所有数据</p></li></ul><h3 id="更改驱动器号"><a href="#更改驱动器号" class="headerlink" title="更改驱动器号"></a>更改驱动器号</h3><p><strong>更改驱动器盘符</strong></p><ul><li>使用驱动器号来表示并访问分区或卷</li></ul><h2 id="发布共享文件夹"><a href="#发布共享文件夹" class="headerlink" title="发布共享文件夹"></a>发布共享文件夹</h2><h3 id="Windows共享概述"><a href="#Windows共享概述" class="headerlink" title="Windows共享概述"></a>Windows共享概述</h3><p><strong>微软公司推出的网络文件&#x2F;打印机服务系统</strong></p><ul><li>可以将一台主机的资源分布给其他主机共用</li><li>共享&#x3D;资源复用</li></ul><p><strong>共享访问的优点</strong></p><ul><li>方便、快捷</li><li>相比光盘&#x2F;U盘不易受文件大小限制</li><li>可以实现访问控制权限</li></ul><h3 id="配置共享文件夹"><a href="#配置共享文件夹" class="headerlink" title="配置共享文件夹"></a>配置共享文件夹</h3><p><strong>右击文件夹  &#x3D;&gt;  共享  &#x3D;&gt;  添加用户  &#x3D;&gt;  分配权限</strong></p><h2 id="访问共享文件夹"><a href="#访问共享文件夹" class="headerlink" title="访问共享文件夹"></a>访问共享文件夹</h2><h3 id="通过UNC路径访问"><a href="#通过UNC路径访问" class="headerlink" title="通过UNC路径访问"></a>通过UNC路径访问</h3><p><strong>UNC（Universal Naming Convention）通用命名规则，快捷访问网络中资源</strong></p><p><strong>以下位置可输入UNC路径</strong></p><ul><li>资源管理器的地址栏</li><li>Win+r，运行框</li></ul><p><strong>UNC路径格式</strong></p><ul><li>\\服务器名\[共享名]</li><li>\\服务器IP\[共享名]</li></ul><h3 id="通过映射网络驱动器访问"><a href="#通过映射网络驱动器访问" class="headerlink" title="通过映射网络驱动器访问"></a>通过映射网络驱动器访问</h3><p><strong>把网络共享资源映射为网络驱动器（盘符），以简化访问步骤，常用于多频次访问场景</strong></p><p><strong>映射网络驱动器</strong></p><ul><li>右击  计算机  或  网络  </li><li>cmd运行，net  use  X:   \\服务器地址\共享名</li></ul><p><strong>断开网络驱动器</strong></p><ul><li>右击网络驱动器，选择  断开</li></ul><h2 id="共享资源管控"><a href="#共享资源管控" class="headerlink" title="共享资源管控"></a>共享资源管控</h2><h3 id="计算机管理-共享文件夹"><a href="#计算机管理-共享文件夹" class="headerlink" title="计算机管理-共享文件夹"></a>计算机管理-共享文件夹</h3><p><strong>管理共享文件夹</strong></p><ul><li>开始  &#x3D;&gt;  管理工具  &#x3D;&gt;  计算机管理  &#x3D;&gt;  系统工具  &#x3D;&gt;  共享文件夹  &#x3D;&gt;  共享</li></ul><p><strong>监控及管理已连接的用户</strong></p><ul><li>开始  &#x3D;&gt;  管理工具  &#x3D;&gt;  计算机管理  &#x3D;&gt;  系统工具  &#x3D;&gt;  共享文件夹  &#x3D;&gt;  会话</li></ul><p><strong>监控及管理被打开的文件</strong></p><ul><li>开始  &#x3D;&gt;  管理工具  &#x3D;&gt;  计算机管理  &#x3D;&gt;  系统工具  &#x3D;&gt;  共享文件夹  &#x3D;&gt;  打开的文件</li></ul><h3 id="特殊共享"><a href="#特殊共享" class="headerlink" title="特殊共享"></a>特殊共享</h3><p><strong>特殊共享</strong></p><ul><li>系统自动建立的用于管理目的的共享文件夹</li></ul><p><strong>主要类别</strong></p><ul><li>Drive letter$</li><li>ADMIN$</li></ul><p><strong>隐藏共享</strong></p><ul><li>共享名$</li></ul><h2 id="FTP服务概述"><a href="#FTP服务概述" class="headerlink" title="FTP服务概述"></a>FTP服务概述</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p><strong>FTP（File Transfer Protocol，文件传输协议）</strong></p><ul><li>是一种用于在网络上进行文件传输的协议</li><li>通俗说就是实现文件共享功能</li></ul><p><strong>基于C&#x2F;S架构的文档下载&#x2F;上传通信</strong></p><ul><li>FTP基于客户端-服务器模型，其中一个计算机作为FTP服务器，而其他计算机作为FTP客户端</li><li>服务端程序：提供文件存储和传输服务</li><li>客户端程序：通过连接到FTP服务器进行文件上传和下载</li></ul><h3 id="FTP服务组件"><a href="#FTP服务组件" class="headerlink" title="FTP服务组件"></a>FTP服务组件</h3><p><strong>Microsoft IIS</strong></p><ul><li>Internet Information Service，互联网信息服务</li><li>微软提供的Web&#x2F;FTP服务产品，集成在Windows操作系统中</li></ul><h2 id="部署FTP服务"><a href="#部署FTP服务" class="headerlink" title="部署FTP服务"></a>部署FTP服务</h2><h3 id="安装FTP服务软件"><a href="#安装FTP服务软件" class="headerlink" title="安装FTP服务软件"></a>安装FTP服务软件</h3><p><strong>安装核心组件</strong></p><ul><li>右击  此电脑  &#x3D;&gt;  管理  &#x3D;&gt;  管理  &#x3D;&gt;  添加角色和功能  &#x3D;&gt;  默认下一步  &#x3D;&gt;  …  &#x3D;&gt;  Web服务器（IIS）  &#x3D;&gt;  添加功能  &#x3D;&gt;  下一步…  &#x3D;&gt;  FTP服务  &#x3D;&gt;  安装</li></ul><p><img src="/../img/img_artical/net_sec/2.3.1.png" alt="2.3.1"></p><h3 id="添加FTP站点"><a href="#添加FTP站点" class="headerlink" title="添加FTP站点"></a>添加FTP站点</h3><p>添加FTP站点，指定站点名及根目录</p><p><img src="/../img/img_artical/net_sec/2.3.2.png" alt="2.3.2"></p><h3 id="FTP身份验证"><a href="#FTP身份验证" class="headerlink" title="FTP身份验证"></a>FTP身份验证</h3><p>FTP支持匿名登录和基本（认证）登录两种身份验证方式</p><ul><li>匿名登录允许用户以匿名身份登录FTP服务器，并访问公共文件</li><li>基本认证登录要求用户提供用户名和密码进行身份验证，只有通过验证的用户才能够访问受限文件</li><li>匿名身份验证，客户端通过资源管理器访问FTP直接登录</li><li>基本身份验证，客户端通过资源管理器访问FTP需输入用户名及密码</li></ul><h3 id="常用FTP客户端软件"><a href="#常用FTP客户端软件" class="headerlink" title="常用FTP客户端软件"></a>常用FTP客户端软件</h3><p>Windows资源管理器</p><ul><li>资源管理器地址栏输入ftp:&#x2F;&#x2F;服务器IP</li></ul><p>专用图形工具</p><ul><li>FileZilla Client、FlashFXP、LeapFTP、CuteFTP</li></ul><p>网页浏览器（仅下载）</p><ul><li>打开浏览器地址栏输入ftp:&#x2F;&#x2F;服务器IP</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows系统安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-Windows系统安全2</title>
      <link href="/posts/winsec2.html"/>
      <url>/posts/winsec2.html</url>
      
        <content type="html"><![CDATA[<h1 id="Window系统安全"><a href="#Window系统安全" class="headerlink" title="Window系统安全"></a>Window系统安全</h1><h2 id="安全基线概述"><a href="#安全基线概述" class="headerlink" title="安全基线概述"></a>安全基线概述</h2><h3 id="操作系统安全基线"><a href="#操作系统安全基线" class="headerlink" title="操作系统安全基线"></a>操作系统安全基线</h3><p><strong>安全基线</strong></p><ul><li>服务器安全基线是为了满足安全规范要求，服务器必须要达到的安全（最低）标准</li></ul><p><strong>主要有以下作用</strong></p><ul><li>设置口令复杂度策略，防止暴力破解密码</li><li>控制用户或文件权限，减少被攻击后的影响</li><li>最小化安装操作系统，防止不必要的服务带来的安全问题</li></ul><p><strong>基线范围</strong></p><ul><li>安全基线在银行、证券、运营商、互联网行业等信息安全领域的应用范围非常广泛</li></ul><p><strong>通常包含以下：</strong></p><ul><li>操作系统</li><li>网络设备</li><li>数据库</li></ul><h3 id="Windows系统安全配置"><a href="#Windows系统安全配置" class="headerlink" title="Windows系统安全配置"></a>Windows系统安全配置</h3><p><strong>安全配置</strong></p><ul><li>用户管理</li><li>密码策略管理</li><li>共享管理</li><li>文件权限管理</li><li>用户权限管理</li><li>日志审核管理</li><li>远程管理</li><li>其他安全选项</li></ul><h2 id="系统账户安全"><a href="#系统账户安全" class="headerlink" title="系统账户安全"></a>系统账户安全</h2><h3 id="本地安全策略"><a href="#本地安全策略" class="headerlink" title="本地安全策略"></a>本地安全策略</h3><p><strong>指的是为保护本计算机资源而配置的规则</strong></p><ul><li>账户策略：密码策略和账户锁定策略</li><li>本地策略：审核策略、用户权限分配、安全选项</li></ul><h3 id="本地安全策略工具"><a href="#本地安全策略工具" class="headerlink" title="本地安全策略工具"></a>本地安全策略工具</h3><p><strong>开始  &#x3D;&gt;  管理工具  &#x3D;&gt;  本地安全策略</strong></p><p><img src="/../img/img_artical/net_sec/2.2.1.png" alt="2.2.1"></p><h3 id="账户策略"><a href="#账户策略" class="headerlink" title="账户策略"></a>账户策略</h3><p><strong>账户策略：控制用户账户如何与计算机交互</strong></p><ul><li>密码策略：确定密码的设置，如密码复杂度和密码长度等</li><li>账户锁定策略：确定账户锁定的条件和时间</li></ul><h3 id="密码策略"><a href="#密码策略" class="headerlink" title="密码策略"></a>密码策略</h3><p><strong>密码必须符合复杂性要求</strong></p><ul><li>不能包含用户的账户名</li><li>包含以下四类字符中的三类字符：大写字母（A到Z），小写字母（a到z），数字（0到9），非字母字符（例如!  $  #  %等）</li></ul><p><strong>密码最小值</strong></p><ul><li>取值范围0-14，0表示无限长度</li></ul><p><strong>密码最长使用期限</strong></p><ul><li>默认42天，取值范围0-999，0表示永不过期</li></ul><p><strong>密码最短使用期限</strong></p><ul><li>取值范围0-998，默认0表示无限制，随时可更改密码</li></ul><p><strong>强制密码历史</strong></p><ul><li>默认0表示历史曾经使用过的密码可以随便使用，取值范围0-24</li></ul><p><strong>测试密码破解的网址：<a href="https://www.security.org/how-secure-is-my-password/"><strong>https://www.security.org/how-secure-is-my-password/</strong></a></strong></p><h3 id="账户锁定策略"><a href="#账户锁定策略" class="headerlink" title="账户锁定策略"></a>账户锁定策略</h3><p><strong>配置账户锁定策略，防止暴力破解攻击</strong></p><p><strong>账户锁定时间</strong></p><ul><li>在自动解锁之前保持锁定的分钟数，取值范围0-99999,0表示永不自动解锁，只能由管理员手动解锁</li></ul><p><strong>账户锁定阈值</strong></p><ul><li>登录尝试失败的次数，取值范围0-999，默认0表示不锁定账户</li></ul><p><strong>重置账户锁定计数器</strong></p><ul><li>多长时间内累加失败次数</li></ul><h2 id="系统审核"><a href="#系统审核" class="headerlink" title="系统审核"></a>系统审核</h2><h3 id="审核策略"><a href="#审核策略" class="headerlink" title="审核策略"></a>审核策略</h3><p><strong>本地策略适用于计算机，包含以下策略：</strong></p><ul><li>审核策略：设置计算机上的安全日志中的日志记录</li><li>用户权限分配：设置用户和组的权限</li><li>安全选项：为计算机指定安全设置</li></ul><p><strong>配置以安全日志的方式记录安全相关事件</strong></p><ul><li>审核策略更改，记录对策略的修改事件</li><li>审核登录事件，记录用户登录成功或失败事件</li><li>审核账户管理，记录用户添加&#x2F;删除&#x2F;重命名&#x2F;禁用&#x2F;启用等事件</li></ul><h2 id="用户权限配置"><a href="#用户权限配置" class="headerlink" title="用户权限配置"></a>用户权限配置</h2><h3 id="用户权限分配"><a href="#用户权限分配" class="headerlink" title="用户权限分配"></a>用户权限分配</h3><p><strong>设置用户和组的权限</strong></p><ul><li>允许通过远程桌面服务登录</li><li>允许本地登录</li><li>拒绝本地登录</li><li>更改系统时间</li><li>备份文件和目录</li></ul><h2 id="安全选项配置"><a href="#安全选项配置" class="headerlink" title="安全选项配置"></a>安全选项配置</h2><h3 id="安全选项策略"><a href="#安全选项策略" class="headerlink" title="安全选项策略"></a>安全选项策略</h3><p><strong>本地策略  &#x3D;&gt;  安全选项</strong></p><ul><li>交互式登录：无需按Ctrl+Alt+Del，默认禁用</li><li>交互式登录：提示用户在密码过期之前更改密码，默认5天</li><li>交互式登录：不显示最后的用户名，默认禁用</li><li>关机：允许系统在未登录的情况下关闭，默认禁用</li></ul><h2 id="账户系统安全加固"><a href="#账户系统安全加固" class="headerlink" title="账户系统安全加固"></a>账户系统安全加固</h2><h3 id="Window账户"><a href="#Window账户" class="headerlink" title="Window账户"></a>Window账户</h3><p><strong>多用户系统</strong></p><ul><li>Windows不应只有一个管理员账户、应根据业备需求，设定不同的用户和用户组，如管理员账户、Web用户、数据库用户</li></ul><p><strong>定期检查用户，删除无用、过期的账户</strong></p><ul><li>应保证所有用户均为有效且在用</li></ul><p><strong>禁用Guest账户</strong></p><ul><li>系统应禁用Guest账户，Guest账户默认不开启</li></ul><h3 id="Windows账户管理"><a href="#Windows账户管理" class="headerlink" title="Windows账户管理"></a>Windows账户管理</h3><p><strong>账户管理</strong></p><ul><li>更改默认管理员账户名称（应更改默认管理员administrator的名称，防止暴力破解等问题）</li><li>不显示最后的用户名（用户登出后，下次登录时，不应显示上次登录用户的名称）</li></ul><p><strong>检测方法</strong></p><ul><li>控制面板  &#x3D;&gt;  系统和安全  &#x3D;&gt;  管理工具  &#x3D;&gt;  计算机管理</li><li>控制面板  &#x3D;&gt;  系统和安全  &#x3D;&gt;  管理工具  &#x3D;&gt;  本地安全策略</li></ul><h3 id="查看账户"><a href="#查看账户" class="headerlink" title="查看账户"></a>查看账户</h3><p><strong>查看系统当前账户</strong></p><ul><li>打开cmd查看当前账户</li><li>开始  &#x3D;&gt;  控制面板  &#x3D;&gt;  管理工具  &#x3D;&gt;  计算机管理，进入本地用户和组，查看用户</li><li>打开注册表，查看用户和组</li></ul><p><strong>以管理员登录，进入命令提示环境查看用户</strong></p><ul><li>运行cmd</li><li>net user</li></ul><p><strong>打开注册表查看用户</strong></p><ul><li>运行regedit</li><li>HKEY_LOCAL_MACHINE&#x2F;SAM&#x2F;SAM&#x2F;Domains&#x2F;Account&#x2F;Users&#x2F;</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows系统安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-Windows系统安全1</title>
      <link href="/posts/winsec1.html"/>
      <url>/posts/winsec1.html</url>
      
        <content type="html"><![CDATA[<h1 id="Window系统安全"><a href="#Window系统安全" class="headerlink" title="Window系统安全"></a>Window系统安全</h1><h2 id="用户账户基础"><a href="#用户账户基础" class="headerlink" title="用户账户基础"></a>用户账户基础</h2><h3 id="用户账户概述"><a href="#用户账户概述" class="headerlink" title="用户账户概述"></a>用户账户概述</h3><p><strong>用户账户用来记录用户的用户名和口令、隶属的组等信息</strong></p><ul><li>每个用户账户包含唯一的登录名和对应的密码</li><li>不同的用户身份拥有不同的权限</li></ul><p><strong>操作系统根据SID识别不同用户</strong></p><ul><li>每个用户拥有唯一安全标识符（SID）</li><li>用户权限通过用户的SID来记录</li><li>查看命令为：whoami &#x2F;user</li></ul><p><img src="/../img/img_artical/net_sec/2.1.1.png" alt="2.1.1"></p><h3 id="本地用户和组控制台"><a href="#本地用户和组控制台" class="headerlink" title="本地用户和组控制台"></a>本地用户和组控制台</h3><p><strong>运行  lusrmgr.msc   ，直接打开   本地用户和组，</strong></p><ul><li>或者右击  开始  &#x3D;&gt;  计算机管理  &#x3D;&gt;  系统工具  &#x3D;&gt;  本地用户和组</li></ul><p><img src="/../img/img_artical/net_sec/2.1.2.png" alt="2.1.2"></p><h3 id="内置用户"><a href="#内置用户" class="headerlink" title="内置用户"></a>内置用户</h3><p><strong>Windows系统默认存在的系统</strong></p><ul><li>Administrator：管理员（权限最大）</li><li>Guest：来宾（权限最小），默认禁用</li></ul><p><font color="#ff0000"><strong>内置用户可以改名、禁用，但无法删除</strong></font></p><h2 id="用户账号操作"><a href="#用户账号操作" class="headerlink" title="用户账号操作"></a>用户账号操作</h2><h3 id="用户管理操作"><a href="#用户管理操作" class="headerlink" title="用户管理操作"></a>用户管理操作</h3><p><strong>创建新用户</strong></p><ul><li>右击空白处，选   新用户</li><li>指定用户名、密码及密码属性</li></ul><p><strong>账户属性</strong></p><ul><li><p>用户下次登录时须更改密码（每个员工创建不同帐户）</p></li><li><p>用户不能更改密码（用于公用帐户）</p></li><li><p>密码永不过期（默认42天）</p></li><li><p>帐户已禁用</p></li></ul><p><img src="/../img/img_artical/net_sec/2.1.3.png" alt="2.1.3"></p><p><strong>更改用户属性</strong></p><ul><li>常规属性、是否禁用、隶属于</li></ul><p><strong>设置密码</strong></p><ul><li>选中用户，右击选  设置密码</li></ul><p><img src="/../img/img_artical/net_sec/2.1.4.png" alt="2.1.4"></p><p><strong>重命名用户</strong></p><ul><li>适用于工作交接场合</li><li>由管理员将前任员工的账户改名</li></ul><p><strong>删除用户</strong></p><ul><li>适用于员工离职&#x2F;账户废止等场合</li></ul><p><font color="#ff0000"><strong>建议禁用账户而不是删除，若删除后重建同名账户，其SID值会不同</strong></font></p><h2 id="组账号基础"><a href="#组账号基础" class="headerlink" title="组账号基础"></a>组账号基础</h2><h3 id="组账户概述"><a href="#组账户概述" class="headerlink" title="组账户概述"></a>组账户概述</h3><p><strong>用来为多个用户批量授权</strong></p><ul><li>为一个组授予权限后，所有成员用户自动获得相应权限</li><li>用户加入一个组，自动获得此组的权限</li></ul><h3 id="创建新的组账号"><a href="#创建新的组账号" class="headerlink" title="创建新的组账号"></a>创建新的组账号</h3><p><strong>打开本地用户和组  &#x3D;&gt;  组  &#x3D;&gt;  右击  &#x3D;&gt;  新建组  &#x3D;&gt;  输入组名  &#x3D;&gt;  创建</strong></p><p><img src="/../img/img_artical/net_sec/2.1.5.png" alt="2.1.5"></p><h3 id="管理组成员"><a href="#管理组成员" class="headerlink" title="管理组成员"></a>管理组成员</h3><ul><li><p>双击本地组  &#x3D;&gt;  添加  &#x3D;&gt;  输入用户名  &#x3D;&gt;  确定  &#x3D;&gt;  确定</p></li><li><p>或者右击用户名  &#x3D;&gt;  属性  &#x3D;&gt;  隶属于  &#x3D;&gt;  输入组名  +&gt;  确定  &#x3D;&gt;  确定</p></li></ul><p><img src="/../img/img_artical/net_sec/2.1.6.png" alt="2.1.6"></p><h2 id="内置组账号管理"><a href="#内置组账号管理" class="headerlink" title="内置组账号管理"></a>内置组账号管理</h2><h3 id="内置组账号"><a href="#内置组账号" class="headerlink" title="内置组账号"></a>内置组账号</h3><p><strong>常用的内置组</strong></p><ul><li><p>Administrators:管理员组</p></li><li><p>Guests:来宾组</p></li><li><p>Network Configuration Operators：具有管理网络功能，例如更改IP地址</p></li><li><p>Backup Operators：具有备份和还原的权限</p></li><li><p>Remote Desktop Users：此组内用户可以从远程计算机使用远程桌面来连接</p></li><li><p>Print Operators：具有管理打印机的权限</p></li><li><p>Users:新用户默认组</p></li><li><p>Authenticated Users:任何有效登录的的用户都属于此组</p></li><li><p>Everyone:任何用户都属此组</p></li></ul><h2 id="NTFS权限基础"><a href="#NTFS权限基础" class="headerlink" title="NTFS权限基础"></a>NTFS权限基础</h2><h3 id="什么是文件系统"><a href="#什么是文件系统" class="headerlink" title="什么是文件系统"></a>什么是文件系统</h3><p><strong>基本作用</strong></p><ul><li>定义向磁盘上存文档的方法和数据结构，以及读文档的规则</li><li>格式化操作就是建新的文件系统</li></ul><p><strong>Windows常见的文件系统</strong></p><ul><li>FAT32，文件分配表</li><li>NTFS，新技术文件系统</li><li>ReFS，复原文件系统</li></ul><h3 id="NTFS文件系统的优点"><a href="#NTFS文件系统的优点" class="headerlink" title="NTFS文件系统的优点"></a>NTFS文件系统的优点</h3><ul><li>高读写：提高磁盘读写性能</li><li>可靠性：加密、访问控制列表</li><li>磁盘利用率：压缩、磁盘配额</li><li>大容量：最大可支持16EB</li><li>AD需要NTFS支持</li></ul><p><strong>如何获取NTFS文件系统的分区：</strong></p><ul><li>右击此电脑  &#x3D;&gt;  管理  &#x3D;&gt;  工具  &#x3D;&gt;  计算机管理  &#x3D;&gt;  磁盘管理  &#x3D;&gt;  格式化对应的分区</li></ul><h3 id="文件夹的NTFS权限"><a href="#文件夹的NTFS权限" class="headerlink" title="文件夹的NTFS权限"></a>文件夹的NTFS权限</h3><p><strong>目录操作权限</strong></p><ul><li>完全控制：可执行所有操作</li><li>修改：可修改、删除</li><li>读取和执行：可读取、执行</li><li>列出文件夹内容</li><li>读取：可读取内容</li><li>写入：可创建文件夹或者文件</li><li>特殊权限：调整“安全”设置的权限</li></ul><p><strong>文件操作权限</strong></p><ul><li>完全控制：可执行所有操作</li><li>修改：可修改、删除</li><li>读取和执行：可读取、执行</li><li>读取：可读取内容</li><li>写入：可创建文件夹或者文件</li><li>特殊权限：调整“安全”设置的权限</li></ul><p><strong><font color="ff0000">文件的NTFS权限与文件夹的NTFS权限对比少了一个列出文件夹内容的权限</font></strong></p><h2 id="NTFS权限应用规则"><a href="#NTFS权限应用规则" class="headerlink" title="NTFS权限应用规则"></a>NTFS权限应用规则</h2><h3 id="文档的NTFS选项设置"><a href="#文档的NTFS选项设置" class="headerlink" title="文档的NTFS选项设置"></a>文档的NTFS选项设置</h3><ul><li><p>右击指定的目录或文件  &#x3D;&gt;  属性  &#x3D;&gt;  安全  &#x3D;&gt;  编辑  &#x3D;&gt;  添加  &#x3D;&gt;  指定用户或组</p></li><li><p>确定后设置权限</p></li></ul><h3 id="权限累加"><a href="#权限累加" class="headerlink" title="权限累加"></a>权限累加</h3><p><strong>用户对文档的有效权限</strong></p><ul><li>等于用户的权限  +  用户所属各组的权限</li></ul><p><strong>累加权限示例</strong></p><ul><li>用户huangrong同时属于taohuadao和gaibang组</li></ul><p><img src="/../img/img_artical/net_sec/2.1.7.png" alt="2.1.7"></p><h3 id="权限的拒绝"><a href="#权限的拒绝" class="headerlink" title="权限的拒绝"></a>权限的拒绝</h3><p><strong>可以为文档配置拒绝权限</strong></p><ul><li>拒绝权限优先，能够实现“一票否决”</li></ul><p><strong>拒绝权限示例</strong></p><ul><li>用户huangrong同时属于taohuadao和gaibang组</li></ul><p><img src="/../img/img_artical/net_sec/2.1.8.png" alt="2.1.8"></p><h3 id="权限继承"><a href="#权限继承" class="headerlink" title="权限继承"></a>权限继承</h3><p><strong>新建文件和子目录自动继承上一级目录的权限</strong></p><h3 id="取消继承"><a href="#取消继承" class="headerlink" title="取消继承"></a>取消继承</h3><p><strong>放弃从上一级目录继承的权限</strong></p><ul><li>右击文件  &#x3D;&gt;  属性  &#x3D;&gt;  安全  &#x3D;&gt;  高级  &#x3D;&gt;  禁用继承  &#x3D;&gt;  在弹出的提示中选择第一个  &#x3D;&gt;  确定  &#x3D;&gt;  编辑  &#x3D;&gt;  选择普通用户  &#x3D;&gt;  取消完全控制的勾选仅留读权限  &#x3D;&gt;  确定</li></ul><h3 id="强制继承"><a href="#强制继承" class="headerlink" title="强制继承"></a>强制继承</h3><p><strong>使子目录及文档立即继承当前文件夹的权限</strong></p><ul><li>右击目录  &#x3D;&gt;  属性  &#x3D;&gt;  安全  &#x3D;&gt;  高级  &#x3D;&gt;  勾选禁用继承下的复选框  &#x3D;&gt;  是  &#x3D;&gt;  确定</li></ul><p><font color="#ff0000"><strong>注：下级取消继承后上级目录可以强制继承，上级目录强制继承后下级目录还可以再次取消继承</strong></font></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows系统安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-网络应用基础4</title>
      <link href="/posts/netbase4.html"/>
      <url>/posts/netbase4.html</url>
      
        <content type="html"><![CDATA[<h1 id="网络应用基础4"><a href="#网络应用基础4" class="headerlink" title="网络应用基础4"></a>网络应用基础4</h1><h2 id="Windows概述"><a href="#Windows概述" class="headerlink" title="Windows概述"></a>Windows概述</h2><h3 id="什么是操作系统"><a href="#什么是操作系统" class="headerlink" title="什么是操作系统"></a>什么是操作系统</h3><p><strong>Operation System，操作系统</strong></p><ul><li>是一套用来管理硬件与软件资源的程序</li><li>主要控制CPU处理器、内存、硬盘，操作文件系统的读取和写入</li><li>为用户提供一个与硬件&#x2F;软件交互的操作界面</li></ul><p><img src="/../img/img_artical/net_sec/1.4.1.png" alt="1.4.1"></p><h3 id="Windows系统分类"><a href="#Windows系统分类" class="headerlink" title="Windows系统分类"></a>Windows系统分类</h3><p><strong>适用于个人电脑</strong></p><ul><li>Windows 7&#x2F;8&#x2F;10&#x2F;11</li></ul><p><strong>适用于服务器</strong></p><ul><li>Windows Server 2008&#x2F;2012&#x2F;2016&#x2F;2019</li></ul><h3 id="Windows版本"><a href="#Windows版本" class="headerlink" title="Windows版本"></a>Windows版本</h3><p><strong>个人电脑系列</strong></p><ul><li>Windows 10 家庭版&#x2F;专业版&#x2F;企业版&#x2F;教育版</li></ul><p><strong>适用于服务器</strong></p><ul><li>Windows Server 2019 标准版&#x2F;数据中心版</li></ul><h3 id="选用Windows服务器的理由"><a href="#选用Windows服务器的理由" class="headerlink" title="选用Windows服务器的理由"></a>选用Windows服务器的理由</h3><ul><li>易操作</li><li>易部署</li><li>适合中小企业或局域网环境</li></ul><h2 id="虚拟化技术"><a href="#虚拟化技术" class="headerlink" title="虚拟化技术"></a>虚拟化技术</h2><h3 id="什么是虚拟化"><a href="#什么是虚拟化" class="headerlink" title="什么是虚拟化"></a>什么是虚拟化</h3><p><strong>通过软件技术来模拟更多的设备资源</strong></p><ul><li>1个物理设备&#x3D;&gt;n个虚拟设备</li></ul><p><img src="/../img/img_artical/net_sec/1.4.2.png" alt="1.4.2"></p><h3 id="虚拟化实现条件"><a href="#虚拟化实现条件" class="headerlink" title="虚拟化实现条件"></a>虚拟化实现条件</h3><p><strong>支持虚拟化的CPU处理器</strong></p><ul><li>Intel-VT、AMD-V</li></ul><p><strong>内存足够支撑运行多个虚拟机</strong></p><ul><li>建议不少于16GB</li></ul><p><strong>虚拟化平台软件</strong></p><h3 id="常见的虚拟化软件产品"><a href="#常见的虚拟化软件产品" class="headerlink" title="常见的虚拟化软件产品"></a>常见的虚拟化软件产品</h3><p><strong>主要厂商及产品</strong></p><table><thead><tr><th align="center">系列</th><th align="center">PC版</th><th align="center">企业版</th></tr></thead><tbody><tr><td align="center">VMware</td><td align="center">VMware Workstation</td><td align="center">VMware vSphere</td></tr><tr><td align="center">Microsoft</td><td align="center">VirtualPC</td><td align="center">Hyper-V</td></tr><tr><td align="center">RedHat</td><td align="center">KVM</td><td align="center">RHEV</td></tr><tr><td align="center">Oracle</td><td align="center">VM VirtualBox</td><td align="center">VM Server</td></tr></tbody></table><h3 id="安装VMware-Workstation"><a href="#安装VMware-Workstation" class="headerlink" title="安装VMware Workstation"></a>安装VMware Workstation</h3><p><strong>从VMware官网获取Workstation Pro安装文件</strong></p><ul><li><a href="https://www.vmware.com/cn.html">https://www.vmware.com/cn.html</a></li></ul><p><strong>双击安装文件，根据提示安装</strong></p><h3 id="创建新虚拟机"><a href="#创建新虚拟机" class="headerlink" title="创建新虚拟机"></a>创建新虚拟机</h3><ul><li><p>创建虚拟机安装目录（E:\虚拟机\Win10-1）</p></li><li><p>创建裸机</p></li><li><p>文件 &#x3D;&gt; 新建虚拟机 &#x3D;&gt; 自定义（高级）&#x3D;&gt; 下一步 &#x3D;&gt; 稍后安装操作系统 &#x3D;&gt; 下一步 &#x3D;&gt; 客户机操作系统 &#x3D;&gt; 选择Windows 10 X64 &#x3D;&gt; 下一步 &#x3D;&gt; 虚拟机名输入win10-1 &#x3D;&gt; 位置选择（E:\虚拟机\Win10-1）&#x3D;&gt; 下一步 &#x3D;&gt; 固件类型选择UEFI &#x3D;&gt; 下一步 &#x3D;&gt; 下一步 &#x3D;&gt; 输入内存2048M &#x3D;&gt; 下一步 &#x3D;&gt; 磁盘大小输入500G &#x3D;&gt; 将虚拟磁盘存储为单个文件 &#x3D;&gt; 下一步 &#x3D;&gt; 下一步 &#x3D;&gt; 完成</p></li></ul><h2 id="Win10系统安装"><a href="#Win10系统安装" class="headerlink" title="Win10系统安装"></a>Win10系统安装</h2><h3 id="安装准备"><a href="#安装准备" class="headerlink" title="安装准备"></a>安装准备</h3><p><strong>镜像光盘放光驱</strong></p><ul><li>双击CD&#x2F;DVD-浏览-选择系统镜像文件</li></ul><p><strong>Win10系统的硬件要求</strong></p><ul><li>CPU处理器：1.0Hhz或更快</li><li>启动内存：2GB（64位）</li><li>硬盘空间：不少于20GB（64位），建议100GB及以上</li></ul><h3 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h3><p><strong>点击启动按钮进入安装向导</strong></p><ul><li>出现如下提示，将鼠标点击到虚拟机内并按回车</li></ul><p><img src="/../img/img_artical/net_sec/1.4.3.png" alt="1.4.3"></p><p><strong>配置安装过程</strong></p><ul><li><p>下一步 &#x3D;&gt; 现在安装 &#x3D;&gt; 我接受许可条款 &#x3D;&gt; 下一步 &#x3D;&gt; 自定义 &#x3D;&gt; 新建 &#x3D;&gt; 输入102400MB &#x3D;&gt; 应用 &#x3D;&gt; 确定 &#x3D;&gt; 选择未分配的空间再点新建 &#x3D;&gt; 输入102400MB &#x3D;&gt; 应用 &#x3D;&gt; 选择第一个100G分区 &#x3D;&gt; 下一步 &#x3D;&gt; 提示正在安装windows &#x3D;&gt; 等待安装完自动重启</p></li><li><p>区域设置选择中国 &#x3D;&gt; 是 &#x3D;&gt; 键盘布局选择微软拼音 &#x3D;&gt; 是 &#x3D;&gt; 跳过 &#x3D;&gt; 改为域加入 &#x3D;&gt; 输入用户名及密码（123456）&#x3D;&gt; 下一步 &#x3D;&gt; 再输入密码 &#x3D;&gt; 下一步 &#x3D;&gt; 自定义安全问题 &#x3D;&gt; 下一步 &#x3D;&gt; 否 &#x3D;&gt; 隐私设置全部关闭 &#x3D;&gt; 接受 &#x3D;&gt; 等待进入桌面环境。</p></li></ul><h3 id="设备驱动"><a href="#设备驱动" class="headerlink" title="设备驱动"></a>设备驱动</h3><p><strong>什么是硬件驱动？</strong></p><ul><li>能够让计算机的硬件充分发挥硬件性能，使硬件能够正常工作，我们把这样的程序称为硬件驱动。</li></ul><p><strong>安装虚拟工具（VMware Tools）</strong></p><ul><li><p>虚拟机菜单-安装VMware Tools</p></li><li><p>打开资源管理器-点击光驱驱动器盘符-双击setup64-下一步-下一步-安装-完成-是</p></li><li><p>安装完VMwareTools后显示效果可全屏显示</p></li><li><p>物理机文件复制或拖拽到虚拟机</p></li><li><p>虚拟机安装虚拟工具相当于物理机安装硬件驱动程序</p></li></ul><h2 id="虚拟化高级应用"><a href="#虚拟化高级应用" class="headerlink" title="虚拟化高级应用"></a>虚拟化高级应用</h2><h3 id="虚拟机快照"><a href="#虚拟机快照" class="headerlink" title="虚拟机快照"></a>虚拟机快照</h3><ul><li><p>为虚拟机的不同时间点记录数据备份</p></li><li><p>需要时可用来快速恢复虚拟机（类似于玩游戏时候的存档读档）</p></li><li><p>操作：虚拟机菜单 &#x3D;&gt; 快照 &#x3D;&gt; 拍摄快照 &#x3D;&gt; 输入快照名及描述信息</p></li></ul><p><strong>建议关机后做虚拟机快照，关机快照稳定、节省磁盘空间</strong></p><h2 id="配置IP地址"><a href="#配置IP地址" class="headerlink" title="配置IP地址"></a>配置IP地址</h2><h3 id="配置IP地址-默认网关"><a href="#配置IP地址-默认网关" class="headerlink" title="配置IP地址&#x2F;默认网关"></a>配置IP地址&#x2F;默认网关</h3><p><strong>设置 &#x3D;&gt; 网络和Internet &#x3D;&gt; 更改适配器设置 &#x3D;&gt; 双击”Ethernet0” &#x3D;&gt; 属性 &#x3D;&gt; 双击”Internet协议版本4”</strong></p><p><img src="/../img/img_artical/net_sec/1.4.4.png" alt="1.4.4"></p><h3 id="IP地址配置方式"><a href="#IP地址配置方式" class="headerlink" title="IP地址配置方式"></a>IP地址配置方式</h3><p><strong>静态配置IP地址</strong></p><ul><li>需管理员手动配置、配置IP地址任务量大、容易错误及冲突，适用于网络规模小，一般服务器配置静态固定IP地址</li></ul><p><strong>动态配置IP地址</strong></p><ul><li>自动获取IP地址，需要有DHCP服务器的支持，降低网络地址配置任务量，避免手动输入错误及冲突的几率</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络应用基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-网络应用基础3</title>
      <link href="/posts/netbase3.html"/>
      <url>/posts/netbase3.html</url>
      
        <content type="html"><![CDATA[<h1 id="网络应用基础3"><a href="#网络应用基础3" class="headerlink" title="网络应用基础3"></a>网络应用基础3</h1><h2 id="远程管理交换机"><a href="#远程管理交换机" class="headerlink" title="远程管理交换机"></a>远程管理交换机</h2><h3 id="配置IP地址"><a href="#配置IP地址" class="headerlink" title="配置IP地址"></a>配置IP地址</h3><p><strong>远程管理需要通过IP地址访问网络设备</strong></p><ul><li>交换机的端口默认无法配置IP地址</li><li>需要使用虚拟端口Vlanif 1</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">Vlanif 1                           //进入Vlanif 1虚拟接口</span></span><br><span class="line"><span class="attr">[SW1-Vlanif1]ip</span> <span class="string">address 192.168.1.1 24            //配置IP地址为192.168.1.1，子网掩码为24</span></span><br></pre></td></tr></table></figure><h3 id="配置远程登录密码"><a href="#配置远程登录密码" class="headerlink" title="配置远程登录密码"></a>配置远程登录密码</h3><p><strong>远程登录需要配置VTY接口</strong></p><ul><li><p>VTY是虚拟终端，是一种网络设备远程连接的方式</p></li><li><p>vty 0 4表示同时开启0-4五个会话，即可最多同时供五个用户进行连接</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[SW1]user-interface</span> <span class="string">vty 0 4                                //进入用户接口VTY</span></span><br><span class="line"><span class="attr">[SW1-ui-vty0-4]set</span> <span class="string">authentication password cipher 123456   //配置密码为密文123456</span></span><br><span class="line"><span class="attr">[SW1-ui-vty0-4]user</span> <span class="string">privilege level 15                     //设置用户权限为15</span></span><br></pre></td></tr></table></figure><p><strong>用户等级权限如下：</strong></p><ul><li>0 参观，ping、tracert、telnet、display、quit等</li><li>1 监控，reboot、reset、undo、debugging等</li><li>2 系统配置，所有配置命令（管理级配置命令除外）</li><li>3<del>15，所有命令（4</del>15用于精细化权限管理）</li></ul><h3 id="远程连接测试"><a href="#远程连接测试" class="headerlink" title="远程连接测试"></a>远程连接测试</h3><p><strong>需要支持telnet的客户端软件</strong></p><ul><li><p>第三方软件，如SecureCRT、Putty、Xshell等</p></li><li><p>路由器&#x2F;交换机自带telnet命令</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW2&gt;telnet</span> <span class="string">192.168.1.1                                     //telnet + 目标主机IP地址</span></span><br><span class="line"><span class="attr">Trying</span> <span class="string">192.168.1.1 ...</span></span><br><span class="line"><span class="attr">Press</span> <span class="string">CTRL+K to abort</span></span><br><span class="line"><span class="attr">Connected</span> <span class="string">to 192.168.1.1 ...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">Login</span> <span class="string">authentication</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">Password</span>:                                                  <span class="string">//输入密码</span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">The max number of VTY users is 5, and the number</span></span><br><span class="line">      <span class="attr">of</span> <span class="string">current VTY users on line is 1.</span></span><br><span class="line">      <span class="attr">The</span> <span class="string">current login time is 2023-11-23 19:57:58.</span></span><br><span class="line"><span class="attr">&lt;SW1&gt;</span>                                                      <span class="string">//主机名已从SW2变为SW1</span></span><br></pre></td></tr></table></figure><h2 id="路由介绍"><a href="#路由介绍" class="headerlink" title="路由介绍"></a>路由介绍</h2><h3 id="什么是路由器"><a href="#什么是路由器" class="headerlink" title="什么是路由器"></a>什么是路由器</h3><p><strong>负责在不同网络之间转发数据的设备</strong></p><ul><li>路由器决定到达目标的路径</li><li>路由器也为直连网络的主机充当”网关”角色</li></ul><p><img src="/../img/img_artical/net_sec/1.3.1.png" alt="1.3.1"></p><p><strong>路由器是实现网络互连的核心设备</strong></p><h2 id="路由器工作原理"><a href="#路由器工作原理" class="headerlink" title="路由器工作原理"></a>路由器工作原理</h2><h3 id="路由器工作原理简述"><a href="#路由器工作原理简述" class="headerlink" title="路由器工作原理简述"></a>路由器工作原理简述</h3><p><strong>每台路由器维护一份路由表，路由表记录着：</strong></p><ul><li>要访问XX网段应从哪个接口发送数据</li><li>可到达的下一个路由器（主机）的地址</li></ul><p><strong>路由器如何工作？</strong></p><ul><li><p>路由器接收数据包</p></li><li><p>检查数据包中的目标IP</p></li><li><p>在路由表中查找与目标IP相匹配的路由条目</p></li><li><p>路由表中找到与目标IP相匹配的路由条目后，按照此条目所指的方向将数据转发出去</p></li></ul><p><img src="/../img/img_artical/net_sec/1.3.2.png" alt="1.3.2"></p><h2 id="路由表基本配置"><a href="#路由表基本配置" class="headerlink" title="路由表基本配置"></a>路由表基本配置</h2><h3 id="配置设备名、接口地址"><a href="#配置设备名、接口地址" class="headerlink" title="配置设备名、接口地址"></a>配置设备名、接口地址</h3><p><strong>配置设备名（sysname）</strong></p><p><strong>配置接口地址（ip address IP地址 子网掩码）</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;u</span> <span class="string">t m                                         //取消终端提示消息</span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">Current terminal monitor is off.                </span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;system-view</span>                                   <span class="string">//进入系统视图</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[Huawei]sysname</span> <span class="string">R1                                    //将路由器改名为R1</span></span><br><span class="line"><span class="attr">[R1]interface</span> <span class="string">GigabitEthernet 0/0/0                   //进入GE0/0/0端口</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.1.254 24  //配置IP地址为192.168.1.254 子网掩码为255.255.255.0</span></span><br></pre></td></tr></table></figure><h3 id="保存路由器配置"><a href="#保存路由器配置" class="headerlink" title="保存路由器配置"></a>保存路由器配置</h3><p><strong>保存路由器配置（save）</strong></p><ul><li>大多数通用操作与交换机配置相同</li></ul><p></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;R1&gt;save</span></span><br><span class="line">  <span class="attr">The</span> <span class="string">current configuration will be written to the device. </span></span><br><span class="line">  <span class="attr">Are</span> <span class="string">you sure to continue? (y/n)[n]:y                              //提示配置将被写入设备，是否继续，输入y继续</span></span><br><span class="line">  <span class="attr">It</span> <span class="string">will take several minutes to save configuration file, please wait.......</span></span><br><span class="line">  <span class="attr">Configuration</span> <span class="string">file had been saved successfully</span></span><br><span class="line">  <span class="attr">Note</span>: <span class="string">The configuration file will take effect after being activated</span></span><br><span class="line"><span class="attr">&lt;R1&gt;</span></span><br></pre></td></tr></table></figure><h2 id="直连路由"><a href="#直连路由" class="headerlink" title="直连路由"></a>直连路由</h2><h3 id="什么是直连路由"><a href="#什么是直连路由" class="headerlink" title="什么是直连路由"></a>什么是直连路由</h3><p><strong>直连路由是指路由器接口所连接的网络段</strong></p><h3 id="路由器组网示例"><a href="#路由器组网示例" class="headerlink" title="路由器组网示例"></a>路由器组网示例</h3><p><strong>多网段互连</strong></p><ul><li>教学部、市场部各自有独立网段，如何实现互连？</li></ul><p><img src="/../img/img_artical/net_sec/1.3.3.png" alt="1.3.3"></p><p><strong>PC1配置：</strong></p><p><img src="/../img/img_artical/net_sec/1.3.4.png" alt="1.3.4"></p><p><strong>PC2配置：</strong></p><p><img src="/../img/img_artical/net_sec/1.3.5.png" alt="1.3.5"></p><p><strong>PC3配置：</strong></p><p><img src="/../img/img_artical/net_sec/1.3.6.png" alt="1.3.6"></p><p><strong>PC4配置：</strong></p><p><img src="/../img/img_artical/net_sec/1.3.7.png" alt="1.3.7"></p><p><strong>路由器R1配置：</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;u</span> <span class="string">t m</span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">Current terminal monitor is off.</span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[Huawei]sysname</span> <span class="string">R1</span></span><br><span class="line"><span class="attr">[R1]interface</span> <span class="string">GigabitEthernet 0/0/0</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/0]ip</span> <span class="string">address 192.168.2.254 24</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/0]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="attr">[R1-GigabitEthernet0/0/1]ip</span> <span class="string">address 192.168.1.254 24</span></span><br></pre></td></tr></table></figure><p><strong>验证连通性：PC1 ping PC2、PC3、PC4</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">PC&gt;ping</span> <span class="string">192.168.1.2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Ping</span> <span class="string">192.168.1.2: 32 data bytes, Press Ctrl_C to break</span></span><br><span class="line"><span class="attr">From</span> <span class="string">192.168.1.2: bytes=32 seq=1 ttl=128 time=47 ms</span></span><br><span class="line"><span class="attr">From</span> <span class="string">192.168.1.2: bytes=32 seq=2 ttl=128 time=31 ms</span></span><br><span class="line"><span class="attr">From</span> <span class="string">192.168.1.2: bytes=32 seq=3 ttl=128 time=31 ms</span></span><br><span class="line"></span><br><span class="line"><span class="attr">---</span> <span class="string">192.168.1.2 ping statistics ---</span></span><br><span class="line">  <span class="attr">3</span> <span class="string">packet(s) transmitted</span></span><br><span class="line">  <span class="attr">3</span> <span class="string">packet(s) received</span></span><br><span class="line">  <span class="attr">0.00%</span> <span class="string">packet loss</span></span><br><span class="line">  <span class="attr">round-trip</span> <span class="string">min/avg/max = 31/36/47 ms</span></span><br><span class="line"></span><br><span class="line"><span class="attr">PC&gt;ping</span> <span class="string">192.168.2.1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Ping</span> <span class="string">192.168.2.1: 32 data bytes, Press Ctrl_C to break</span></span><br><span class="line"><span class="attr">Request</span> <span class="string">timeout!</span></span><br><span class="line"><span class="attr">Request</span> <span class="string">timeout!</span></span><br><span class="line"><span class="attr">From</span> <span class="string">192.168.2.1: bytes=32 seq=3 ttl=127 time=62 ms</span></span><br><span class="line"><span class="attr">From</span> <span class="string">192.168.2.1: bytes=32 seq=4 ttl=127 time=63 ms</span></span><br><span class="line"><span class="attr">From</span> <span class="string">192.168.2.1: bytes=32 seq=5 ttl=127 time=62 ms</span></span><br><span class="line"></span><br><span class="line"><span class="attr">---</span> <span class="string">192.168.2.1 ping statistics ---</span></span><br><span class="line">  <span class="attr">5</span> <span class="string">packet(s) transmitted</span></span><br><span class="line">  <span class="attr">3</span> <span class="string">packet(s) received</span></span><br><span class="line">  <span class="attr">40.00%</span> <span class="string">packet loss</span></span><br><span class="line">  <span class="attr">round-trip</span> <span class="string">min/avg/max = 0/62/63 ms</span></span><br><span class="line"></span><br><span class="line"><span class="attr">PC&gt;ping</span> <span class="string">192.168.2.2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Ping</span> <span class="string">192.168.2.2: 32 data bytes, Press Ctrl_C to break</span></span><br><span class="line"><span class="attr">Request</span> <span class="string">timeout!</span></span><br><span class="line"><span class="attr">From</span> <span class="string">192.168.2.2: bytes=32 seq=2 ttl=127 time=47 ms</span></span><br><span class="line"><span class="attr">From</span> <span class="string">192.168.2.2: bytes=32 seq=3 ttl=127 time=62 ms</span></span><br><span class="line"></span><br><span class="line"><span class="attr">---</span> <span class="string">192.168.2.2 ping statistics ---</span></span><br><span class="line">  <span class="attr">3</span> <span class="string">packet(s) transmitted</span></span><br><span class="line">  <span class="attr">2</span> <span class="string">packet(s) received</span></span><br><span class="line">  <span class="attr">33.33%</span> <span class="string">packet loss</span></span><br><span class="line">  <span class="attr">round-trip</span> <span class="string">min/avg/max = 0/54/62 ms</span></span><br></pre></td></tr></table></figure><h3 id="查看路由表"><a href="#查看路由表" class="headerlink" title="查看路由表"></a>查看路由表</h3><p><strong>查看路由表 display ip routing-table</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[R1]display</span> <span class="string">ip routing-table </span></span><br><span class="line"><span class="attr">Route</span> <span class="string">Flags: R - relay, D - download to fib</span></span><br><span class="line"><span class="attr">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr">Routing</span> <span class="string">Tables: Public</span></span><br><span class="line">         <span class="attr">Destinations</span> : <span class="string">10       Routes : 10       </span></span><br><span class="line"></span><br><span class="line"><span class="attr">Destination/Mask</span>    <span class="string">Proto   Pre  Cost      Flags NextHop         Interface</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">127.0.0.0/8</span>   <span class="string">Direct  0    0           D   127.0.0.1       InLoopBack0</span></span><br><span class="line">      <span class="attr">127.0.0.1/32</span>  <span class="string">Direct  0    0           D   127.0.0.1       InLoopBack0</span></span><br><span class="line"><span class="attr">127.255.255.255/32</span>  <span class="string">Direct  0    0           D   127.0.0.1       InLoopBack0</span></span><br><span class="line">    <span class="attr">192.168.1.0/24</span>  <span class="string">Direct  0    0           D   192.168.1.254   GigabitEthernet0/0/1         </span></span><br><span class="line">    <span class="attr">//通往1.0网段找1.254地址，从0/0/1接口出去</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">192.168.1.254/32</span>  <span class="string">Direct  0    0           D   127.0.0.1       GigabitEthernet</span></span><br><span class="line"><span class="attr">0/0/1</span></span><br><span class="line">  <span class="attr">192.168.1.255/32</span>  <span class="string">Direct  0    0           D   127.0.0.1       GigabitEthernet</span></span><br><span class="line"><span class="attr">0/0/1</span></span><br><span class="line">    <span class="attr">192.168.2.0/24</span>  <span class="string">Direct  0    0           D   192.168.2.254   GigabitEthernet0/0/0        </span></span><br><span class="line">    <span class="attr">//通往2.0网段找2.254地址，从0/0/0接口出去</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">192.168.2.254/32</span>  <span class="string">Direct  0    0           D   127.0.0.1       GigabitEthernet</span></span><br><span class="line"><span class="attr">0/0/0</span></span><br><span class="line">  <span class="attr">192.168.2.255/32</span>  <span class="string">Direct  0    0           D   127.0.0.1       GigabitEthernet</span></span><br><span class="line"><span class="attr">0/0/0</span></span><br><span class="line"><span class="attr">255.255.255.255/32</span>  <span class="string">Direct  0    0           D   127.0.0.1       InLoopBack0</span></span><br></pre></td></tr></table></figure><h2 id="远程管理路由器"><a href="#远程管理路由器" class="headerlink" title="远程管理路由器"></a>远程管理路由器</h2><h3 id="配置远程登录"><a href="#配置远程登录" class="headerlink" title="配置远程登录"></a>配置远程登录</h3><p><strong>远程登录需要配置VTY接口</strong></p><ul><li><p>VTY是虚拟终端，是一种网络设备远程连接的方式</p></li><li><p>vty 0 4表示同时开启0-4五个会话，即可最多同时供五个用户进行连接</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[R1]user-interface</span> <span class="string">vty 0 4                                //进入用户接口VTY</span></span><br><span class="line"><span class="attr">[R1-ui-vty0-4]set</span> <span class="string">authentication password cipher 123456   //配置密码为密文123456</span></span><br><span class="line"><span class="attr">[R1-ui-vty0-4]user</span> <span class="string">privilege level 15                     //设置用户权限为15</span></span><br></pre></td></tr></table></figure><p><strong>用户等级权限如下：</strong></p><ul><li>0 参观，ping、tracert、telnet、display、quit等</li><li>1 监控，reboot、reset、undo、debugging等</li><li>2 系统配置，所有配置命令（管理级配置命令除外）</li><li>3<del>15，所有命令（4</del>15用于精细化权限管理）</li></ul><h3 id="远程连接测试-1"><a href="#远程连接测试-1" class="headerlink" title="远程连接测试"></a>远程连接测试</h3><p><strong>需要支持telnet的客户端软件</strong></p><ul><li><p>第三方软件，如SecureCRT、Putty、Xshell等</p></li><li><p>路由器&#x2F;交换机自带telnet命令</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;telnet</span> <span class="string">192.168.1.1                                     //telnet + 目标主机IP地址</span></span><br><span class="line"><span class="attr">Trying</span> <span class="string">192.168.1.1 ...</span></span><br><span class="line"><span class="attr">Press</span> <span class="string">CTRL+K to abort</span></span><br><span class="line"><span class="attr">Connected</span> <span class="string">to 192.168.1.1 ...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">Login</span> <span class="string">authentication</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">Password</span>:                                                  <span class="string">//输入密码</span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">The max number of VTY users is 5, and the number</span></span><br><span class="line">      <span class="attr">of</span> <span class="string">current VTY users on line is 1.</span></span><br><span class="line">      <span class="attr">The</span> <span class="string">current login time is 2023-11-23 19:57:58.</span></span><br><span class="line"><span class="attr">&lt;R1&gt;</span>                                                      <span class="string">//主机名已从SW1变为R1</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络应用基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-网络应用基础2</title>
      <link href="/posts/netbase2.html"/>
      <url>/posts/netbase2.html</url>
      
        <content type="html"><![CDATA[<h1 id="网络应用基础2"><a href="#网络应用基础2" class="headerlink" title="网络应用基础2"></a>网络应用基础2</h1><h2 id="交换机介绍"><a href="#交换机介绍" class="headerlink" title="交换机介绍"></a>交换机介绍</h2><h3 id="什么是交换机"><a href="#什么是交换机" class="headerlink" title="什么是交换机"></a>什么是交换机</h3><p><strong>交换机，Switch</strong></p><ul><li>用于将多台计算机&#x2F;交换机连接到一起，组建网络</li><li>交换机负责为其中任意两台计算机提供独享线路进行通信</li><li>连接电脑组建局域网（组建局域网的主要设备）</li></ul><p><img src="/../img/img_artical/net_sec/1.2.1.png" alt="1.2.1"></p><h3 id="非网管型交换机"><a href="#非网管型交换机" class="headerlink" title="非网管型交换机"></a>非网管型交换机</h3><p><strong>也称为即插即用交换机</strong></p><ul><li>即插即用，无需（也不支持）对设备进行配置</li><li>使用简单、价格便宜（数百元）</li></ul><p><img src="/../img/img_artical/net_sec/1.2.2.png" alt="1.2.2"></p><h3 id="网管型交换机"><a href="#网管型交换机" class="headerlink" title="网管型交换机"></a>网管型交换机</h3><p><strong>也称为智能交换机</strong></p><ul><li>能够实现网段划分、流量控制等更多高级功能（隔离、限速、ACL、堆叠）</li><li>支持对设备做高级配置，价格也贵一些（数千元、数万元）</li></ul><p><img src="/../img/img_artical/net_sec/1.2.3.png" alt="1.2.3"></p><h2 id="部署eNSP平台"><a href="#部署eNSP平台" class="headerlink" title="部署eNSP平台"></a>部署eNSP平台</h2><h3 id="eNSP网络仿真平台介绍"><a href="#eNSP网络仿真平台介绍" class="headerlink" title="eNSP网络仿真平台介绍"></a>eNSP网络仿真平台介绍</h3><p><strong>华为研发的一款图形化网络仿真平台</strong></p><ul><li>便于ICT（信息通信技术）从业者快速熟悉华为产品</li><li>可以实现企业网络<strong>规划&#x2F;设计&#x2F;运维</strong>等相关操作，帮助使用者了解并掌握相关操作和配置</li></ul><h3 id="认识eNSP操作界面"><a href="#认识eNSP操作界面" class="headerlink" title="认识eNSP操作界面"></a>认识eNSP操作界面</h3><p><strong>拓扑绘制区</strong></p><p><strong>设备和线缆区</strong></p><p><img src="/../img/img_artical/net_sec/1.2.4.png" alt="1.2.4"></p><h2 id="交换机组网"><a href="#交换机组网" class="headerlink" title="交换机组网"></a>交换机组网</h2><h3 id="网路拓扑介绍"><a href="#网路拓扑介绍" class="headerlink" title="网路拓扑介绍"></a>网路拓扑介绍</h3><p><strong>教学部网段 192.168.1.0&#x2F;24</strong></p><ul><li>计算机pc1-1：IP地址192.168.1.1，掩码255.255.255.0</li><li>计算机pc1-2：IP地址192.168.1.2，掩码255.255.255.0</li><li>……</li></ul><p><img src="/../img/img_artical/net_sec/1.2.1.png" alt="1.2.5"></p><h3 id="绘制拓扑"><a href="#绘制拓扑" class="headerlink" title="绘制拓扑"></a>绘制拓扑</h3><p><strong>按照图例绘制简化版eNSP拓扑</strong></p><ul><li>1台交换机、2台PC机、2条网线</li><li>为方便识别，对每个设备、计算机重新命名</li></ul><p><img src="/../img/img_artical/net_sec/1.2.6.png" alt="1.2.6"></p><h3 id="交换组网的配置实现"><a href="#交换组网的配置实现" class="headerlink" title="交换组网的配置实现"></a>交换组网的配置实现</h3><p><strong>配置计算机PC1-1及PC1-2的IP地址及子网掩码</strong></p><p><img src="/../img/img_artical/net_sec/1.2.7.png" alt="1.2.7"></p><p><strong>结果验证</strong></p><ul><li><p>确认交换机LSW1、计算机PC1-1和PC1-2都已启动</p></li><li><p>从PC1-1能ping通PC1-2的IP地址，反之亦然</p></li></ul><p><img src="/../img/img_artical/net_sec/1.2.8.png" alt="1.2.8"></p><h2 id="交换机配置视图"><a href="#交换机配置视图" class="headerlink" title="交换机配置视图"></a>交换机配置视图</h2><h3 id="建立配置连接"><a href="#建立配置连接" class="headerlink" title="建立配置连接"></a>建立配置连接</h3><p><strong>软件连接：Putty、ServerCRT、Xshell等</strong></p><p><strong>硬件连接</strong></p><ul><li>计算机COM&#x2F;USB口 &#x3D;&gt; Console线 &#x3D;&gt; 交换机Console口</li></ul><p><img src="/../img/img_artical/net_sec/1.2.9.png" alt="1.2.9"></p><h3 id="几种命令行配置视图"><a href="#几种命令行配置视图" class="headerlink" title="几种命令行配置视图"></a>几种命令行配置视图</h3><p><strong>华为交换机内部是华为VRP（Versatile Routing Platform，通用路由平台）网络操作系统，该系统也用在路由器、防火墙等产品上</strong></p><p><img src="/../img/img_artical/net_sec/1.2.10.png" alt="1.2.10"></p><h3 id="切换不同视图"><a href="#切换不同视图" class="headerlink" title="切换不同视图"></a>切换不同视图</h3><p><strong>进入命令行终端时默认在用户视图，此时通过命令可切换视图</strong></p><ul><li>通过system-view、interface命令进行切换</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;</span>                                        <span class="string">//用户视图</span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;system-view</span>                             <span class="string">//切换系统视图</span></span><br><span class="line"><span class="attr">[Huawei]</span>                                        <span class="string">//系统视图</span></span><br><span class="line"><span class="attr">[Huawei]interface</span> <span class="string">GigabitEthernet 0/0/1         //切换接口视图</span></span><br><span class="line"><span class="attr">[Huawei-GigabitEthernet0/0/1]</span>                   <span class="string">//接口视图</span></span><br></pre></td></tr></table></figure><p><strong>视图回退操作</strong></p><ul><li>退回到前一个视图：quit命令</li><li>快速返回到用户视图：return命令，或快捷键Ctrl + Z</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">[Huawei-GigabitEthernet0/0/1]quit</span>     <span class="string">//返回上一个视图</span></span><br><span class="line"><span class="attr">[Huawei]</span></span><br><span class="line"><span class="attr">[Huawei]return</span>  <span class="string">//快速返回用户视图</span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;</span></span><br></pre></td></tr></table></figure><h3 id="操作技巧"><a href="#操作技巧" class="headerlink" title="操作技巧"></a>操作技巧</h3><p><strong>命令行特性</strong></p><ul><li>命令可简写</li><li>按TAB键自动补全</li><li>按？能获取帮助信息</li><li>命令不区分大小写</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">//TAB补全</span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;sys</span>                                       <span class="string">//按TAB补全</span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[Huawei]</span></span><br><span class="line"><span class="attr">//?获取帮助信息</span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;sy?</span></span><br><span class="line">  <span class="attr">system-view</span>         <span class="string"></span></span><br><span class="line"><span class="attr">//简写</span>  <span class="string"></span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;sy</span>                                         <span class="string">//按回车</span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">//不区分大小写</span>    <span class="string"></span></span><br><span class="line"><span class="attr">[Huawei]QUIT</span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;</span></span><br></pre></td></tr></table></figure><h2 id="命令行基本操作"><a href="#命令行基本操作" class="headerlink" title="命令行基本操作"></a>命令行基本操作</h2><h3 id="查看VRP系统版本"><a href="#查看VRP系统版本" class="headerlink" title="查看VRP系统版本"></a>查看VRP系统版本</h3><p><strong>display version命令</strong></p><ul><li>可显示系统版本、设备型号、已开机时间</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;display</span> <span class="string">version </span></span><br><span class="line"><span class="attr">Huawei</span> <span class="string">Versatile Routing Platform Software</span></span><br><span class="line"><span class="attr">VRP</span> <span class="string">(R) software, Version 5.110 (S5700 V200R001C00)           //系统版本、设备型号</span></span><br><span class="line"><span class="attr">Copyright</span> <span class="string">(c) 2000-2011 HUAWEI TECH CO., LTD</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Quidway</span> <span class="string">S5700-28C-HI Routing Switch uptime is 0 week, 0 day, 0 hour, 40 minutes      //开机时间</span></span><br><span class="line"><span class="attr">&lt;Huawei&gt;</span></span><br></pre></td></tr></table></figure><h3 id="查看当前交换机的配置"><a href="#查看当前交换机的配置" class="headerlink" title="查看当前交换机的配置"></a>查看当前交换机的配置</h3><p><strong>查看当前有效配置（display current-configuration）</strong></p><p><strong>查看当前视图配置（display this）</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;display</span> <span class="string">current-configuration                    //全部配置信息</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">sysname</span> <span class="string">Huawei</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">cluster</span> <span class="string">enable</span></span><br><span class="line"><span class="attr">ntdp</span> <span class="string">enable</span></span><br><span class="line"><span class="attr">ndp</span> <span class="string">enable</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">..........</span></span><br><span class="line"><span class="attr">..........</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[Huawei]display</span> <span class="string">this                                     //查看当前视图配置</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">sysname</span> <span class="string">Huawei</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">cluster</span> <span class="string">enable</span></span><br><span class="line"><span class="attr">ntdp</span> <span class="string">enable</span></span><br><span class="line"><span class="attr">ndp</span> <span class="string">enable</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">drop</span> <span class="string">illegal-mac alarm</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">return</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="配置设备名"><a href="#配置设备名" class="headerlink" title="配置设备名"></a>配置设备名</h3><p><strong>sysname命令</strong></p><ul><li><p>作用：可以在众多交换机中区分出来</p></li><li><p>命名规范：部门、位置、机架编号</p></li><li><p>需要在系统视图下执行</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;Huawei&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[Huawei]sysname</span> <span class="string">SW1                              //将设备名改为SW1</span></span><br><span class="line"><span class="attr">[SW1]</span></span><br></pre></td></tr></table></figure><h3 id="保存交换机的配置"><a href="#保存交换机的配置" class="headerlink" title="保存交换机的配置"></a>保存交换机的配置</h3><p><strong>保存当前配置（save）</strong></p><ul><li>需要在用户视图下执行</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;save</span></span><br><span class="line"><span class="attr">The</span> <span class="string">current configuration will be written to the device.</span></span><br><span class="line"><span class="attr">Are</span> <span class="string">you sure to continue?[Y/N]y                           //输入y确认</span></span><br><span class="line"><span class="attr">Save</span> <span class="string">the configuration successfully.  //保存成功</span></span><br></pre></td></tr></table></figure><h3 id="启用-禁用端口"><a href="#启用-禁用端口" class="headerlink" title="启用&#x2F;禁用端口"></a>启用&#x2F;禁用端口</h3><p><strong>默认自动开启，可以手动关闭以排查网络故障</strong></p><p><strong>在指定接口视图下</strong></p><ul><li>执行shutdown命令可以手动禁用此接口</li><li>执行undo shutdown命令可恢复启用此接口</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[SW1]interface</span> <span class="string">GigabitEthernet 0/0/1</span></span><br><span class="line"><span class="attr">[SW1-GigabitEthernet0/0/1]shutdown</span>                   <span class="string">//关闭端口</span></span><br><span class="line"><span class="attr">[SW1-GigabitEthernet0/0/1]undo</span> <span class="string">shutdown              //启动端口</span></span><br></pre></td></tr></table></figure><p><strong>undo命令行一般用来恢复缺省状态、禁用某个功能或者删除某项配置</strong></p><h3 id="设置终端密码"><a href="#设置终端密码" class="headerlink" title="设置终端密码"></a>设置终端密码</h3><p><strong>默认交换机登录无需密码，为了安全需要添加认证密码</strong></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[SW1]user-interface</span> <span class="string">console 0                                  //进入用户接口console</span></span><br><span class="line"><span class="attr">[SW1-ui-console0]authentication-mode</span> <span class="string">password                  //启用密码认证</span></span><br><span class="line"><span class="attr">[SW1-ui-console0]set</span> <span class="string">authentication password simple 123456     //设置明文密码123456</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Login</span> <span class="string">authentication                                           //再次登录时需密码验证</span></span><br><span class="line"><span class="attr">Password</span>:<span class="string"></span></span><br><span class="line"><span class="attr">&lt;SW1&gt;</span></span><br></pre></td></tr></table></figure><p><strong>设置密码时需设置密码类型</strong></p><ul><li><p>simple为明文密码</p></li><li><p>cipher为密文密码</p></li><li><p>区别为明文密码在配置中可以看到，密文密码会被加密</p></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[SW1]user-interface</span> <span class="string">console 0</span></span><br><span class="line"><span class="attr">[SW1-ui-console0]display</span> <span class="string">this</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">user-interface</span> <span class="string">con 0</span></span><br><span class="line"> <span class="attr">authentication-mode</span> <span class="string">password</span></span><br><span class="line"> <span class="attr">set</span> <span class="string">authentication password simple 123456                       //明文密码</span></span><br><span class="line"><span class="attr">user-interface</span> <span class="string">vty 0 4</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">return</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[SW1-ui-console0]set</span> <span class="string">authentication password cipher 123456</span></span><br><span class="line"><span class="attr">[SW1-ui-console0]display</span> <span class="string">this</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">user-interface</span> <span class="string">con 0</span></span><br><span class="line"> <span class="attr">authentication-mode</span> <span class="string">password</span></span><br><span class="line"> <span class="attr">set</span> <span class="string">authentication password cipher O|*dXi\0b)`S/0Rb&#123;DzN8qg#    //密文密码</span></span><br><span class="line"><span class="attr">user-interface</span> <span class="string">vty 0 4</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">return</span></span><br></pre></td></tr></table></figure><h2 id="配置技巧"><a href="#配置技巧" class="headerlink" title="配置技巧"></a>配置技巧</h2><h3 id="取消终端提示消息"><a href="#取消终端提示消息" class="headerlink" title="取消终端提示消息"></a>取消终端提示消息</h3><p><strong>undo terminal monitor</strong></p><p><strong>配置命令会被终端界面一些提示消息打断，可以使用此命令关闭提示消息，只对当前终端有效，且重新登录时自动启动</strong></p><ul><li>只能在用户视图下配置<ul><li>初学者可以暂时取消这些提示消息</li></ul></li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;undo</span> <span class="string">terminal monitor </span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">Current terminal monitor is off.</span></span><br></pre></td></tr></table></figure><h3 id="更改自动退出超时"><a href="#更改自动退出超时" class="headerlink" title="更改自动退出超时"></a>更改自动退出超时</h3><p><strong>终端会话默认超过10分钟会自动退出</strong></p><ul><li>调试设备时可以延长超时时间</li><li>为了安全调试完毕后需设置短时间</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;system-view</span> <span class="string"></span></span><br><span class="line"><span class="attr">Enter</span> <span class="string">system view, return user view with Ctrl+Z.</span></span><br><span class="line"><span class="attr">[SW1]user-interface</span> <span class="string">console 0</span></span><br><span class="line"><span class="attr">[SW1-ui-console0]idle-timeout</span> <span class="string">1440               //修改超时时间为1440分钟</span></span><br></pre></td></tr></table></figure><p><strong>如果设置为0的话则设备永不休眠</strong></p><h3 id="重启设备"><a href="#重启设备" class="headerlink" title="重启设备"></a>重启设备</h3><p><strong>reboot</strong></p><ul><li>在用户视图下执行，可重启当前设备</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;reboot</span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">The system is now comparing the configuration, please wait.</span></span><br><span class="line"><span class="attr">Warning</span>: <span class="string">All the configuration will be saved to the configuration file for the n</span></span><br><span class="line"><span class="attr">ext</span> <span class="string">startup:flash:/vrpcfg.zip, Continue?[Y/N]:n                                       //如果交换机配置进行了修改则询问是否保存配置</span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">If want to reboot with saving diagnostic information, input &#x27;N&#x27; and then e</span></span><br><span class="line"><span class="attr">xecute</span> <span class="string">&#x27;reboot save diagnostic-information&#x27;.</span></span><br><span class="line"><span class="attr">System</span> <span class="string">will reboot! Continue?[Y/N]:y                                                  //确认是否进行重启</span></span><br></pre></td></tr></table></figure><p><strong>如果重启前未对配置进行修改则不会进行第一次确认</strong></p><h3 id="恢复出厂设置"><a href="#恢复出厂设置" class="headerlink" title="恢复出厂设置"></a>恢复出厂设置</h3><p><strong>reset saved-configuration</strong></p><ul><li>用户视图下执行，适用于系统配置紊乱&#x2F;错误、修复不便等情况</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&lt;SW1&gt;reset</span> <span class="string">saved-configuration </span></span><br><span class="line"><span class="attr">Warning</span>: <span class="string">The action will delete the saved configuration in the device.</span></span><br><span class="line"><span class="attr">The</span> <span class="string">configuration will be erased to reconfigure. Continue? [Y/N]:y                  //提示恢复出厂设置将清空所有配置，是否继续</span></span><br><span class="line"><span class="attr">Warning</span>: <span class="string">Now clearing the configuration in the device.</span></span><br><span class="line"><span class="attr">Nov</span> <span class="string">23 2023 19:45:20-08:00 SW1 %%01CFM/4/RST_CFG(l)[0]:The user chose Y when dec</span></span><br><span class="line"><span class="attr">iding</span> <span class="string">whether to reset the saved configuration.</span></span><br><span class="line"><span class="attr">Info</span>: <span class="string">Succeeded in clearing the configuration in the device.</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络应用基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网络安全-网络应用基础1</title>
      <link href="/posts/netbase1.html"/>
      <url>/posts/netbase1.html</url>
      
        <content type="html"><![CDATA[<h1 id="网络应用基础"><a href="#网络应用基础" class="headerlink" title="网络应用基础"></a>网络应用基础</h1><h2 id="TCP-IP协议及配置"><a href="#TCP-IP协议及配置" class="headerlink" title="TCP&#x2F;IP协议及配置"></a>TCP&#x2F;IP协议及配置</h2><h3 id="TCP-IP协议概述"><a href="#TCP-IP协议概述" class="headerlink" title="TCP&#x2F;IP协议概述"></a>TCP&#x2F;IP协议概述</h3><p><strong>TCP&#x2F;IP协议族</strong></p><ul><li>计算机之间进行通信时必须共同遵循的一种通信规定</li><li>最广泛使用的通信协议的集合</li><li>包含大量Internet应用中的标准协议</li><li>支持跨网络结构、跨操作系统平台的数据通信</li></ul><p><strong>主机与主机之间通信的三要素</strong></p><ul><li>IP地址</li><li>子网掩码</li><li>默认网关</li></ul><h3 id="什么是IP地址"><a href="#什么是IP地址" class="headerlink" title="什么是IP地址"></a>什么是IP地址</h3><p><strong>用来标识一个网络节点的互联网地址</strong></p><p><strong>IPV4地址的组成</strong></p><ul><li>地址长度：32位</li><li>网络位+主机位</li></ul><h3 id="IPV4地址表示方式"><a href="#IPV4地址表示方式" class="headerlink" title="IPV4地址表示方式"></a>IPV4地址表示方式</h3><p><strong>点分十进制</strong></p><ul><li>4个十进制数（0~255）表示，以点隔开</li></ul><p><img src="/../img/img_artical/net_sec/1.1.1.png" alt="1.1.1"></p><h3 id="IP地址分类-网络规模"><a href="#IP地址分类-网络规模" class="headerlink" title="IP地址分类(网络规模)"></a>IP地址分类(网络规模)</h3><p><strong>常用的IP地址</strong></p><ul><li>A类：0 ~ 127         超大型网络      <font color=#ff0000>网</font>.主.主.主</li><li>B类：128 ~ 191       大型网络        <font color=#ff0000>网</font>.<font color=#ff0000>网</font>.主.主</li><li>C类：192 ~ 223       中小型网络      <font color=#ff0000>网</font>.<font color=#ff0000>网</font>.<font color=#ff0000>网</font>.主</li></ul><p><strong>组播及科研专用</strong></p><ul><li>D类：224 ~ 239       组播网络          </li><li>E类： 240 ~ 255       科研网络</li></ul><table><thead><tr><th>类别</th><th>IP范围</th></tr></thead><tbody><tr><td>A类</td><td><font color=#ff0000>0</font>.0.0.0 ~  <font color=#ff0000>127</font>.255.255.255</td></tr><tr><td>B类</td><td><font color=#ff0000>128</font>.<font color=#ff0000>0</font>.0.0 ~  <font color=#ff0000>191</font>.<font color=#ff0000>255</font>.255.255</td></tr><tr><td>C类</td><td><font color=#ff0000>192</font>.<font color=#ff0000>0</font>.<font color=#ff0000>0</font>.0 ~  <font color=#ff0000>223</font>.<font color=#ff0000>255</font>.<font color=#ff0000>255</font>.255</td></tr></tbody></table><h3 id="什么是子网掩码"><a href="#什么是子网掩码" class="headerlink" title="什么是子网掩码"></a>什么是子网掩码</h3><p><strong>判断IP地址的网络位，相同网络位的IP地址可以直接通信</strong></p><p><strong>不能单独存在，必须结合IP地址一起使用</strong></p><p><strong>默认子网掩码</strong></p><ul><li>A类：255.0.0.0        <font color=#ff0000>网</font>.主.主.主</li><li>B类：255.255.0.0      <font color=#ff0000>网</font>.<font color=#ff0000>网</font>.主.主</li><li>C类：255.255.255.0    <font color=#ff0000>网</font>.<font color=#ff0000>网</font>.<font color=#ff0000>网</font>.主</li></ul><h3 id="默认网关"><a href="#默认网关" class="headerlink" title="默认网关"></a>默认网关</h3><p><strong>什么是网关</strong></p><ul><li><p>从一个网段连接另一个网段的”关口”</p></li><li><p>通常是一台路由器或者防火墙&#x2F;接入服务器的地址</p></li></ul><p><img src="/../img/img_artical/net_sec/1.1.2.png" alt="1.1.2"></p><h3 id="IP地址使用场景"><a href="#IP地址使用场景" class="headerlink" title="IP地址使用场景"></a>IP地址使用场景</h3><p><strong>根据使用范围区分：</strong></p><ul><li>公有地址：可以在互联网合法使用，需要向NIC付费申请，全球唯一</li><li>私有地址：预留给企业内部使用，无需付费，局域网唯一</li></ul><table><thead><tr><th align="center">类别</th><th align="center">私有IP范围</th></tr></thead><tbody><tr><td align="center">A类</td><td align="center"><font color="#ff0000">10</font>.0.0.0 ~ <font color="#ff0000">10</font>.255.255.255</td></tr><tr><td align="center">B类</td><td align="center"><font color="#ff0000">172.16</font>.0.0 ~ <font color="#ff0000">172.31</font>.255.255</td></tr><tr><td align="center">C类</td><td align="center"><font color="#ff0000">192.168</font>.0.0 ~ <font color="#ff0000">192.168</font>.255.255</td></tr></tbody></table><p><strong>注：所有的IP地址都由国际组织NIC(Network Information Center)负责统一分配，截止2019年11月26日,全球IPv4地址已经正式用尽了，128位的IPv6地址正在逐步普及。</strong></p><h3 id="查看IP地址参数"><a href="#查看IP地址参数" class="headerlink" title="查看IP地址参数"></a>查看IP地址参数</h3><p><strong>设置 &#x3D;&gt; 网络和Internet &#x3D;&gt; 以太网</strong></p><ul><li>找到”本地连接”或”Ethernet0”，打开即可查看</li></ul><p><img src="/../img/img_artical/net_sec/1.1.3.png" alt="1.1.3"></p><p><strong>Win + R键调出运行窗口，输入cmd打开命令窗口</strong></p><p><strong>执行ipconfig命令</strong></p><ul><li>获得IP地址、子网掩码、默认网关等信息</li><li>&#x2F;all选项可以查看更详细的DNS服务器、物理地址（MAC地址）等信息</li></ul><p><img src="/../img/img_artical/net_sec/1.1.4.png" alt="1.1.4"></p><h3 id="测试网络连通性"><a href="#测试网络连通性" class="headerlink" title="测试网络连通性"></a>测试网络连通性</h3><p><strong>ping命令</strong></p><ul><li>向目标主机发送数据包，根据反馈结果判断网络连通性。</li></ul><p><img src="/../img/img_artical/net_sec/1.1.5.png" alt="1.1.5"></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全（更新ing） </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络应用基础 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
